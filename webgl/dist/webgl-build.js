/*! For license information please see webgl-build.js.LICENSE.txt */
!function(t,e){if("object"==typeof exports&&"object"==typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{var r=e();for(var n in r)("object"==typeof exports?exports:t)[n]=r[n]}}(window,(function(){return function(t){var e={};function r(n){if(e[n])return e[n].exports;var i=e[n]={i:n,l:!1,exports:{}};return t[n].call(i.exports,i,i.exports,r),i.l=!0,i.exports}return r.m=t,r.c=e,r.d=function(t,e,n){r.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},r.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},r.t=function(t,e){if(1&e&&(t=r(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)r.d(n,i,function(e){return t[e]}.bind(null,i));return n},r.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return r.d(e,"a",e),e},r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r.p="",r(r.s=18)}([function(t,e){t.exports={0:"NONE",1:"ONE",2:"LINE_LOOP",3:"LINE_STRIP",4:"TRIANGLES",5:"TRIANGLE_STRIP",6:"TRIANGLE_FAN",256:"DEPTH_BUFFER_BIT",512:"NEVER",513:"LESS",514:"EQUAL",515:"LEQUAL",516:"GREATER",517:"NOTEQUAL",518:"GEQUAL",519:"ALWAYS",768:"SRC_COLOR",769:"ONE_MINUS_SRC_COLOR",770:"SRC_ALPHA",771:"ONE_MINUS_SRC_ALPHA",772:"DST_ALPHA",773:"ONE_MINUS_DST_ALPHA",774:"DST_COLOR",775:"ONE_MINUS_DST_COLOR",776:"SRC_ALPHA_SATURATE",1024:"STENCIL_BUFFER_BIT",1028:"FRONT",1029:"BACK",1032:"FRONT_AND_BACK",1280:"INVALID_ENUM",1281:"INVALID_VALUE",1282:"INVALID_OPERATION",1285:"OUT_OF_MEMORY",1286:"INVALID_FRAMEBUFFER_OPERATION",2304:"CW",2305:"CCW",2849:"LINE_WIDTH",2884:"CULL_FACE",2885:"CULL_FACE_MODE",2886:"FRONT_FACE",2928:"DEPTH_RANGE",2929:"DEPTH_TEST",2930:"DEPTH_WRITEMASK",2931:"DEPTH_CLEAR_VALUE",2932:"DEPTH_FUNC",2960:"STENCIL_TEST",2961:"STENCIL_CLEAR_VALUE",2962:"STENCIL_FUNC",2963:"STENCIL_VALUE_MASK",2964:"STENCIL_FAIL",2965:"STENCIL_PASS_DEPTH_FAIL",2966:"STENCIL_PASS_DEPTH_PASS",2967:"STENCIL_REF",2968:"STENCIL_WRITEMASK",2978:"VIEWPORT",3024:"DITHER",3042:"BLEND",3088:"SCISSOR_BOX",3089:"SCISSOR_TEST",3106:"COLOR_CLEAR_VALUE",3107:"COLOR_WRITEMASK",3317:"UNPACK_ALIGNMENT",3333:"PACK_ALIGNMENT",3379:"MAX_TEXTURE_SIZE",3386:"MAX_VIEWPORT_DIMS",3408:"SUBPIXEL_BITS",3410:"RED_BITS",3411:"GREEN_BITS",3412:"BLUE_BITS",3413:"ALPHA_BITS",3414:"DEPTH_BITS",3415:"STENCIL_BITS",3553:"TEXTURE_2D",4352:"DONT_CARE",4353:"FASTEST",4354:"NICEST",5120:"BYTE",5121:"UNSIGNED_BYTE",5122:"SHORT",5123:"UNSIGNED_SHORT",5124:"INT",5125:"UNSIGNED_INT",5126:"FLOAT",5386:"INVERT",5890:"TEXTURE",6401:"STENCIL_INDEX",6402:"DEPTH_COMPONENT",6403:"RED",6406:"ALPHA",6407:"RGB",6408:"RGBA",6409:"LUMINANCE",6410:"LUMINANCE_ALPHA",7680:"KEEP",7681:"REPLACE",7682:"INCR",7683:"DECR",7936:"VENDOR",7937:"RENDERER",7938:"VERSION",9728:"NEAREST",9729:"LINEAR",9984:"NEAREST_MIPMAP_NEAREST",9985:"LINEAR_MIPMAP_NEAREST",9986:"NEAREST_MIPMAP_LINEAR",9987:"LINEAR_MIPMAP_LINEAR",10240:"TEXTURE_MAG_FILTER",10241:"TEXTURE_MIN_FILTER",10242:"TEXTURE_WRAP_S",10243:"TEXTURE_WRAP_T",10497:"REPEAT",10752:"POLYGON_OFFSET_UNITS",16384:"COLOR_BUFFER_BIT",32769:"CONSTANT_COLOR",32770:"ONE_MINUS_CONSTANT_COLOR",32771:"CONSTANT_ALPHA",32772:"ONE_MINUS_CONSTANT_ALPHA",32773:"BLEND_COLOR",32774:"FUNC_ADD",32777:"BLEND_EQUATION_RGB",32778:"FUNC_SUBTRACT",32779:"FUNC_REVERSE_SUBTRACT",32819:"UNSIGNED_SHORT_4_4_4_4",32820:"UNSIGNED_SHORT_5_5_5_1",32823:"POLYGON_OFFSET_FILL",32824:"POLYGON_OFFSET_FACTOR",32854:"RGBA4",32855:"RGB5_A1",32873:"TEXTURE_BINDING_2D",32926:"SAMPLE_ALPHA_TO_COVERAGE",32928:"SAMPLE_COVERAGE",32936:"SAMPLE_BUFFERS",32937:"SAMPLES",32938:"SAMPLE_COVERAGE_VALUE",32939:"SAMPLE_COVERAGE_INVERT",32968:"BLEND_DST_RGB",32969:"BLEND_SRC_RGB",32970:"BLEND_DST_ALPHA",32971:"BLEND_SRC_ALPHA",33071:"CLAMP_TO_EDGE",33170:"GENERATE_MIPMAP_HINT",33189:"DEPTH_COMPONENT16",33306:"DEPTH_STENCIL_ATTACHMENT",33321:"R8",33635:"UNSIGNED_SHORT_5_6_5",33648:"MIRRORED_REPEAT",33901:"ALIASED_POINT_SIZE_RANGE",33902:"ALIASED_LINE_WIDTH_RANGE",33984:"TEXTURE0",33985:"TEXTURE1",33986:"TEXTURE2",33987:"TEXTURE3",33988:"TEXTURE4",33989:"TEXTURE5",33990:"TEXTURE6",33991:"TEXTURE7",33992:"TEXTURE8",33993:"TEXTURE9",33994:"TEXTURE10",33995:"TEXTURE11",33996:"TEXTURE12",33997:"TEXTURE13",33998:"TEXTURE14",33999:"TEXTURE15",34e3:"TEXTURE16",34001:"TEXTURE17",34002:"TEXTURE18",34003:"TEXTURE19",34004:"TEXTURE20",34005:"TEXTURE21",34006:"TEXTURE22",34007:"TEXTURE23",34008:"TEXTURE24",34009:"TEXTURE25",34010:"TEXTURE26",34011:"TEXTURE27",34012:"TEXTURE28",34013:"TEXTURE29",34014:"TEXTURE30",34015:"TEXTURE31",34016:"ACTIVE_TEXTURE",34024:"MAX_RENDERBUFFER_SIZE",34041:"DEPTH_STENCIL",34055:"INCR_WRAP",34056:"DECR_WRAP",34067:"TEXTURE_CUBE_MAP",34068:"TEXTURE_BINDING_CUBE_MAP",34069:"TEXTURE_CUBE_MAP_POSITIVE_X",34070:"TEXTURE_CUBE_MAP_NEGATIVE_X",34071:"TEXTURE_CUBE_MAP_POSITIVE_Y",34072:"TEXTURE_CUBE_MAP_NEGATIVE_Y",34073:"TEXTURE_CUBE_MAP_POSITIVE_Z",34074:"TEXTURE_CUBE_MAP_NEGATIVE_Z",34076:"MAX_CUBE_MAP_TEXTURE_SIZE",34338:"VERTEX_ATTRIB_ARRAY_ENABLED",34339:"VERTEX_ATTRIB_ARRAY_SIZE",34340:"VERTEX_ATTRIB_ARRAY_STRIDE",34341:"VERTEX_ATTRIB_ARRAY_TYPE",34342:"CURRENT_VERTEX_ATTRIB",34373:"VERTEX_ATTRIB_ARRAY_POINTER",34466:"NUM_COMPRESSED_TEXTURE_FORMATS",34467:"COMPRESSED_TEXTURE_FORMATS",34660:"BUFFER_SIZE",34661:"BUFFER_USAGE",34816:"STENCIL_BACK_FUNC",34817:"STENCIL_BACK_FAIL",34818:"STENCIL_BACK_PASS_DEPTH_FAIL",34819:"STENCIL_BACK_PASS_DEPTH_PASS",34877:"BLEND_EQUATION_ALPHA",34921:"MAX_VERTEX_ATTRIBS",34922:"VERTEX_ATTRIB_ARRAY_NORMALIZED",34930:"MAX_TEXTURE_IMAGE_UNITS",34962:"ARRAY_BUFFER",34963:"ELEMENT_ARRAY_BUFFER",34964:"ARRAY_BUFFER_BINDING",34965:"ELEMENT_ARRAY_BUFFER_BINDING",34975:"VERTEX_ATTRIB_ARRAY_BUFFER_BINDING",35040:"STREAM_DRAW",35044:"STATIC_DRAW",35048:"DYNAMIC_DRAW",35632:"FRAGMENT_SHADER",35633:"VERTEX_SHADER",35660:"MAX_VERTEX_TEXTURE_IMAGE_UNITS",35661:"MAX_COMBINED_TEXTURE_IMAGE_UNITS",35663:"SHADER_TYPE",35664:"FLOAT_VEC2",35665:"FLOAT_VEC3",35666:"FLOAT_VEC4",35667:"INT_VEC2",35668:"INT_VEC3",35669:"INT_VEC4",35670:"BOOL",35671:"BOOL_VEC2",35672:"BOOL_VEC3",35673:"BOOL_VEC4",35674:"FLOAT_MAT2",35675:"FLOAT_MAT3",35676:"FLOAT_MAT4",35678:"SAMPLER_2D",35680:"SAMPLER_CUBE",35712:"DELETE_STATUS",35713:"COMPILE_STATUS",35714:"LINK_STATUS",35715:"VALIDATE_STATUS",35716:"INFO_LOG_LENGTH",35717:"ATTACHED_SHADERS",35718:"ACTIVE_UNIFORMS",35719:"ACTIVE_UNIFORM_MAX_LENGTH",35720:"SHADER_SOURCE_LENGTH",35721:"ACTIVE_ATTRIBUTES",35722:"ACTIVE_ATTRIBUTE_MAX_LENGTH",35724:"SHADING_LANGUAGE_VERSION",35725:"CURRENT_PROGRAM",36003:"STENCIL_BACK_REF",36004:"STENCIL_BACK_VALUE_MASK",36005:"STENCIL_BACK_WRITEMASK",36006:"FRAMEBUFFER_BINDING",36007:"RENDERBUFFER_BINDING",36048:"FRAMEBUFFER_ATTACHMENT_OBJECT_TYPE",36049:"FRAMEBUFFER_ATTACHMENT_OBJECT_NAME",36050:"FRAMEBUFFER_ATTACHMENT_TEXTURE_LEVEL",36051:"FRAMEBUFFER_ATTACHMENT_TEXTURE_CUBE_MAP_FACE",36053:"FRAMEBUFFER_COMPLETE",36054:"FRAMEBUFFER_INCOMPLETE_ATTACHMENT",36055:"FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT",36057:"FRAMEBUFFER_INCOMPLETE_DIMENSIONS",36061:"FRAMEBUFFER_UNSUPPORTED",36064:"COLOR_ATTACHMENT0",36096:"DEPTH_ATTACHMENT",36128:"STENCIL_ATTACHMENT",36160:"FRAMEBUFFER",36161:"RENDERBUFFER",36162:"RENDERBUFFER_WIDTH",36163:"RENDERBUFFER_HEIGHT",36164:"RENDERBUFFER_INTERNAL_FORMAT",36168:"STENCIL_INDEX8",36176:"RENDERBUFFER_RED_SIZE",36177:"RENDERBUFFER_GREEN_SIZE",36178:"RENDERBUFFER_BLUE_SIZE",36179:"RENDERBUFFER_ALPHA_SIZE",36180:"RENDERBUFFER_DEPTH_SIZE",36181:"RENDERBUFFER_STENCIL_SIZE",36194:"RGB565",36336:"LOW_FLOAT",36337:"MEDIUM_FLOAT",36338:"HIGH_FLOAT",36339:"LOW_INT",36340:"MEDIUM_INT",36341:"HIGH_INT",36346:"SHADER_COMPILER",36347:"MAX_VERTEX_UNIFORM_VECTORS",36348:"MAX_VARYING_VECTORS",36349:"MAX_FRAGMENT_UNIFORM_VECTORS",37440:"UNPACK_FLIP_Y_WEBGL",37441:"UNPACK_PREMULTIPLY_ALPHA_WEBGL",37442:"CONTEXT_LOST_WEBGL",37443:"UNPACK_COLORSPACE_CONVERSION_WEBGL",37444:"BROWSER_DEFAULT_WEBGL"}},function(t,e){t.exports={ACTIVE_ATTRIBUTES:35721,ACTIVE_ATTRIBUTE_MAX_LENGTH:35722,ACTIVE_TEXTURE:34016,ACTIVE_UNIFORMS:35718,ACTIVE_UNIFORM_MAX_LENGTH:35719,ALIASED_LINE_WIDTH_RANGE:33902,ALIASED_POINT_SIZE_RANGE:33901,ALPHA:6406,ALPHA_BITS:3413,ALWAYS:519,ARRAY_BUFFER:34962,ARRAY_BUFFER_BINDING:34964,ATTACHED_SHADERS:35717,BACK:1029,BLEND:3042,BLEND_COLOR:32773,BLEND_DST_ALPHA:32970,BLEND_DST_RGB:32968,BLEND_EQUATION:32777,BLEND_EQUATION_ALPHA:34877,BLEND_EQUATION_RGB:32777,BLEND_SRC_ALPHA:32971,BLEND_SRC_RGB:32969,BLUE_BITS:3412,BOOL:35670,BOOL_VEC2:35671,BOOL_VEC3:35672,BOOL_VEC4:35673,BROWSER_DEFAULT_WEBGL:37444,BUFFER_SIZE:34660,BUFFER_USAGE:34661,BYTE:5120,CCW:2305,CLAMP_TO_EDGE:33071,COLOR_ATTACHMENT0:36064,COLOR_BUFFER_BIT:16384,COLOR_CLEAR_VALUE:3106,COLOR_WRITEMASK:3107,COMPILE_STATUS:35713,COMPRESSED_TEXTURE_FORMATS:34467,CONSTANT_ALPHA:32771,CONSTANT_COLOR:32769,CONTEXT_LOST_WEBGL:37442,CULL_FACE:2884,CULL_FACE_MODE:2885,CURRENT_PROGRAM:35725,CURRENT_VERTEX_ATTRIB:34342,CW:2304,DECR:7683,DECR_WRAP:34056,DELETE_STATUS:35712,DEPTH_ATTACHMENT:36096,DEPTH_BITS:3414,DEPTH_BUFFER_BIT:256,DEPTH_CLEAR_VALUE:2931,DEPTH_COMPONENT:6402,RED:6403,DEPTH_COMPONENT16:33189,DEPTH_FUNC:2932,DEPTH_RANGE:2928,DEPTH_STENCIL:34041,DEPTH_STENCIL_ATTACHMENT:33306,DEPTH_TEST:2929,DEPTH_WRITEMASK:2930,DITHER:3024,DONT_CARE:4352,DST_ALPHA:772,DST_COLOR:774,DYNAMIC_DRAW:35048,ELEMENT_ARRAY_BUFFER:34963,ELEMENT_ARRAY_BUFFER_BINDING:34965,EQUAL:514,FASTEST:4353,FLOAT:5126,FLOAT_MAT2:35674,FLOAT_MAT3:35675,FLOAT_MAT4:35676,FLOAT_VEC2:35664,FLOAT_VEC3:35665,FLOAT_VEC4:35666,FRAGMENT_SHADER:35632,FRAMEBUFFER:36160,FRAMEBUFFER_ATTACHMENT_OBJECT_NAME:36049,FRAMEBUFFER_ATTACHMENT_OBJECT_TYPE:36048,FRAMEBUFFER_ATTACHMENT_TEXTURE_CUBE_MAP_FACE:36051,FRAMEBUFFER_ATTACHMENT_TEXTURE_LEVEL:36050,FRAMEBUFFER_BINDING:36006,FRAMEBUFFER_COMPLETE:36053,FRAMEBUFFER_INCOMPLETE_ATTACHMENT:36054,FRAMEBUFFER_INCOMPLETE_DIMENSIONS:36057,FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT:36055,FRAMEBUFFER_UNSUPPORTED:36061,FRONT:1028,FRONT_AND_BACK:1032,FRONT_FACE:2886,FUNC_ADD:32774,FUNC_REVERSE_SUBTRACT:32779,FUNC_SUBTRACT:32778,GENERATE_MIPMAP_HINT:33170,GEQUAL:518,GREATER:516,GREEN_BITS:3411,HIGH_FLOAT:36338,HIGH_INT:36341,INCR:7682,INCR_WRAP:34055,INFO_LOG_LENGTH:35716,INT:5124,INT_VEC2:35667,INT_VEC3:35668,INT_VEC4:35669,INVALID_ENUM:1280,INVALID_FRAMEBUFFER_OPERATION:1286,INVALID_OPERATION:1282,INVALID_VALUE:1281,INVERT:5386,KEEP:7680,LEQUAL:515,LESS:513,LINEAR:9729,LINEAR_MIPMAP_LINEAR:9987,LINEAR_MIPMAP_NEAREST:9985,LINES:1,LINE_LOOP:2,LINE_STRIP:3,LINE_WIDTH:2849,LINK_STATUS:35714,LOW_FLOAT:36336,LOW_INT:36339,LUMINANCE:6409,LUMINANCE_ALPHA:6410,MAX_COMBINED_TEXTURE_IMAGE_UNITS:35661,MAX_CUBE_MAP_TEXTURE_SIZE:34076,MAX_FRAGMENT_UNIFORM_VECTORS:36349,MAX_RENDERBUFFER_SIZE:34024,MAX_TEXTURE_IMAGE_UNITS:34930,MAX_TEXTURE_SIZE:3379,MAX_VARYING_VECTORS:36348,MAX_VERTEX_ATTRIBS:34921,MAX_VERTEX_TEXTURE_IMAGE_UNITS:35660,MAX_VERTEX_UNIFORM_VECTORS:36347,MAX_VIEWPORT_DIMS:3386,MEDIUM_FLOAT:36337,MEDIUM_INT:36340,MIRRORED_REPEAT:33648,NEAREST:9728,NEAREST_MIPMAP_LINEAR:9986,NEAREST_MIPMAP_NEAREST:9984,NEVER:512,NICEST:4354,NONE:0,NOTEQUAL:517,NO_ERROR:0,NUM_COMPRESSED_TEXTURE_FORMATS:34466,ONE:1,ONE_MINUS_CONSTANT_ALPHA:32772,ONE_MINUS_CONSTANT_COLOR:32770,ONE_MINUS_DST_ALPHA:773,ONE_MINUS_DST_COLOR:775,ONE_MINUS_SRC_ALPHA:771,ONE_MINUS_SRC_COLOR:769,OUT_OF_MEMORY:1285,PACK_ALIGNMENT:3333,POINTS:0,POLYGON_OFFSET_FACTOR:32824,POLYGON_OFFSET_FILL:32823,POLYGON_OFFSET_UNITS:10752,RED_BITS:3410,RENDERBUFFER:36161,RENDERBUFFER_ALPHA_SIZE:36179,RENDERBUFFER_BINDING:36007,RENDERBUFFER_BLUE_SIZE:36178,RENDERBUFFER_DEPTH_SIZE:36180,RENDERBUFFER_GREEN_SIZE:36177,RENDERBUFFER_HEIGHT:36163,RENDERBUFFER_INTERNAL_FORMAT:36164,RENDERBUFFER_RED_SIZE:36176,RENDERBUFFER_STENCIL_SIZE:36181,RENDERBUFFER_WIDTH:36162,RENDERER:7937,REPEAT:10497,REPLACE:7681,RGB:6407,RGB5_A1:32855,RGB565:36194,RGBA:6408,RGBA4:32854,SAMPLER_2D:35678,SAMPLER_CUBE:35680,SAMPLES:32937,SAMPLE_ALPHA_TO_COVERAGE:32926,SAMPLE_BUFFERS:32936,SAMPLE_COVERAGE:32928,SAMPLE_COVERAGE_INVERT:32939,SAMPLE_COVERAGE_VALUE:32938,SCISSOR_BOX:3088,SCISSOR_TEST:3089,SHADER_COMPILER:36346,SHADER_SOURCE_LENGTH:35720,SHADER_TYPE:35663,SHADING_LANGUAGE_VERSION:35724,SHORT:5122,SRC_ALPHA:770,SRC_ALPHA_SATURATE:776,SRC_COLOR:768,STATIC_DRAW:35044,STENCIL_ATTACHMENT:36128,STENCIL_BACK_FAIL:34817,STENCIL_BACK_FUNC:34816,STENCIL_BACK_PASS_DEPTH_FAIL:34818,STENCIL_BACK_PASS_DEPTH_PASS:34819,STENCIL_BACK_REF:36003,STENCIL_BACK_VALUE_MASK:36004,STENCIL_BACK_WRITEMASK:36005,STENCIL_BITS:3415,STENCIL_BUFFER_BIT:1024,STENCIL_CLEAR_VALUE:2961,STENCIL_FAIL:2964,STENCIL_FUNC:2962,STENCIL_INDEX:6401,STENCIL_INDEX8:36168,STENCIL_PASS_DEPTH_FAIL:2965,STENCIL_PASS_DEPTH_PASS:2966,STENCIL_REF:2967,STENCIL_TEST:2960,STENCIL_VALUE_MASK:2963,STENCIL_WRITEMASK:2968,STREAM_DRAW:35040,SUBPIXEL_BITS:3408,TEXTURE:5890,TEXTURE0:33984,TEXTURE1:33985,TEXTURE2:33986,TEXTURE3:33987,TEXTURE4:33988,TEXTURE5:33989,TEXTURE6:33990,TEXTURE7:33991,TEXTURE8:33992,TEXTURE9:33993,TEXTURE10:33994,TEXTURE11:33995,TEXTURE12:33996,TEXTURE13:33997,TEXTURE14:33998,TEXTURE15:33999,TEXTURE16:34e3,TEXTURE17:34001,TEXTURE18:34002,TEXTURE19:34003,TEXTURE20:34004,TEXTURE21:34005,TEXTURE22:34006,TEXTURE23:34007,TEXTURE24:34008,TEXTURE25:34009,TEXTURE26:34010,TEXTURE27:34011,TEXTURE28:34012,TEXTURE29:34013,TEXTURE30:34014,TEXTURE31:34015,TEXTURE_2D:3553,TEXTURE_BINDING_2D:32873,TEXTURE_BINDING_CUBE_MAP:34068,TEXTURE_CUBE_MAP:34067,TEXTURE_CUBE_MAP_NEGATIVE_X:34070,TEXTURE_CUBE_MAP_NEGATIVE_Y:34072,TEXTURE_CUBE_MAP_NEGATIVE_Z:34074,TEXTURE_CUBE_MAP_POSITIVE_X:34069,TEXTURE_CUBE_MAP_POSITIVE_Y:34071,TEXTURE_CUBE_MAP_POSITIVE_Z:34073,TEXTURE_MAG_FILTER:10240,TEXTURE_MIN_FILTER:10241,TEXTURE_WRAP_S:10242,TEXTURE_WRAP_T:10243,TRIANGLES:4,TRIANGLE_FAN:6,TRIANGLE_STRIP:5,UNPACK_ALIGNMENT:3317,UNPACK_COLORSPACE_CONVERSION_WEBGL:37443,UNPACK_FLIP_Y_WEBGL:37440,UNPACK_PREMULTIPLY_ALPHA_WEBGL:37441,UNSIGNED_BYTE:5121,UNSIGNED_INT:5125,UNSIGNED_SHORT:5123,UNSIGNED_SHORT_4_4_4_4:32819,UNSIGNED_SHORT_5_5_5_1:32820,UNSIGNED_SHORT_5_6_5:33635,VALIDATE_STATUS:35715,VENDOR:7936,VERSION:7938,VERTEX_ATTRIB_ARRAY_BUFFER_BINDING:34975,VERTEX_ATTRIB_ARRAY_ENABLED:34338,VERTEX_ATTRIB_ARRAY_NORMALIZED:34922,VERTEX_ATTRIB_ARRAY_POINTER:34373,VERTEX_ATTRIB_ARRAY_SIZE:34339,VERTEX_ATTRIB_ARRAY_STRIDE:34340,VERTEX_ATTRIB_ARRAY_TYPE:34341,VERTEX_SHADER:35633,VIEWPORT:2978,ZERO:0,R8:33321}},function(t,e,r){"use strict";var n=r(13);n.stats=r(5),t.exports=n},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=function(){function t(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}();function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var s=function(){function t(e,r,n){void 0===r&&(r=!1),i(this,t),this._fn=e,this._once=r,this._thisArg=n,this._next=this._prev=this._owner=null}return n(t,[{key:"detach",value:function(){return null!==this._owner&&(this._owner.detach(this),!0)}}]),t}();function a(t,e){return t._head?(t._tail._next=e,e._prev=t._tail,t._tail=e):(t._head=e,t._tail=e),e._owner=t,e}var o=function(){function t(){i(this,t),this._head=this._tail=void 0}return n(t,[{key:"handlers",value:function(){var t=!(arguments.length<=0||void 0===arguments[0])&&arguments[0],e=this._head;if(t)return!!e;for(var r=[];e;)r.push(e),e=e._next;return r}},{key:"has",value:function(t){if(!(t instanceof s))throw new Error("MiniSignal#has(): First arg must be a MiniSignalBinding object.");return t._owner===this}},{key:"dispatch",value:function(){var t=this._head;if(!t)return!1;for(;t;)t._once&&this.detach(t),t._fn.apply(t._thisArg,arguments),t=t._next;return!0}},{key:"add",value:function(t){var e=arguments.length<=1||void 0===arguments[1]?null:arguments[1];if("function"!=typeof t)throw new Error("MiniSignal#add(): First arg must be a Function.");return a(this,new s(t,!1,e))}},{key:"once",value:function(t){var e=arguments.length<=1||void 0===arguments[1]?null:arguments[1];if("function"!=typeof t)throw new Error("MiniSignal#once(): First arg must be a Function.");return a(this,new s(t,!0,e))}},{key:"detach",value:function(t){if(!(t instanceof s))throw new Error("MiniSignal#detach(): First arg must be a MiniSignalBinding object.");return t._owner!==this||(t._prev&&(t._prev._next=t._next),t._next&&(t._next._prev=t._prev),t===this._head?(this._head=t._next,null===t._next&&(this._tail=null)):t===this._tail&&(this._tail=t._prev,this._tail._next=null),t._owner=null),this}},{key:"detachAll",value:function(){var t=this._head;if(!t)return this;for(this._head=this._tail=null;t;)t._owner=null,t=t._next;return this}}]),t}();o.MiniSignalBinding=s,e.default=o,t.exports=e.default},function(t,e,r){"use strict";var n=r(14).EventEmitter;function i(){n.call(this),this.setMaxListeners(20)}i.prototype=Object.create(n.prototype),i.prototype.constructor=i,i.prototype.off=function(t,e){return e?this.removeListener(t,e):t?this.removeAllListeners(t):this.removeAllListeners()},t.exports=i},function(t,e,r){"use strict";t.exports={mbs:0,secs:0,update:function(t,e,r,n){var i,s=t.getAllResponseHeaders();if(s){var a=s.match(/content-length: (\d+)/i);a&&a.length&&(i=a[1])}if(i){var o=(i=parseInt(i,10))/1024/1024,u=(Date.now()-e)/1e3;this.secs+=u,this.mbs+=o,n&&this.log(r,o,u)}},log:function(t,e,r){if(t)t.substr(t.lastIndexOf("/")+1),e.toFixed(2),r.toFixed(2),(e/r).toFixed(2);this.mbs.toFixed(2),this.secs.toFixed(2),this.getMbps().toFixed(2)},getMbps:function(){return this.mbs/this.secs}}},function(t,e){var r=a("DXT1"),n=a("DXT3"),i=a("DXT5"),s=a("DX10");function a(t){return t.charCodeAt(0)+(t.charCodeAt(1)<<8)+(t.charCodeAt(2)<<16)+(t.charCodeAt(3)<<24)}t.exports=function(t){var e,a,o=new Int32Array(t,0,31);if(542327876!==o[0])throw new Error("Invalid magic number in DDS header");if(4&!o[20])throw new Error("Unsupported format, must contain a FourCC code");var u=o[21];switch(u){case r:e=8,a="dxt1";break;case n:e=16,a="dxt3";break;case i:e=16,a="dxt5";break;case 116:a="rgba32f";break;case s:var h=new Uint32Array(t.slice(128,148));a=h[0];var c=h[1];h[2],h[3],h[4];if(3!==c||2!==a)throw new Error("Unsupported DX10 texture format "+a);a="rgba32f";break;default:throw new Error("Unsupported FourCC code: "+(_=u,String.fromCharCode(255&_,_>>8&255,_>>16&255,_>>24&255)))}var _;var f=o[2],l=1;131072&f&&(l=Math.max(1,o[7]));var d=!1;512&o[28]&&(d=!0);var p,E=o[4],m=o[3],T=o[1]+4,v=E,g=m,R=[];u===s&&(T+=20);if(d)for(var M=0;M<6;M++){if("rgba32f"!==a)throw new Error("Only RGBA32f cubemaps are supported");E=v,m=g;for(var A=Math.log(E)/Math.log(2)+1,x=0;x<A;x++)p=E*m*16,R.push({offset:T,length:p,shape:[E,m]}),x<l&&(T+=p),E=Math.floor(E/2),m=Math.floor(m/2)}else for(x=0;x<l;x++)p=Math.max(4,E)/4*Math.max(4,m)/4*e,R.push({offset:T,length:p,shape:[E,m]}),T+=p,E=Math.floor(E/2),m=Math.floor(m/2);return{shape:[v,g],images:R,format:a,flags:f,cubemap:d}}},function(t,e,r){var n=r(8);"string"==typeof n&&(n=[[t.i,n,""]]);var i={hmr:!0,transform:void 0,insertInto:void 0};r(10)(n,i);n.locals&&(t.exports=n.locals)},function(t,e,r){(t.exports=r(9)(!1)).push([t.i,".webgl {\n\tuser-select: none;\n}",""])},function(t,e,r){"use strict";t.exports=function(t){var e=[];return e.toString=function(){return this.map((function(e){var r=function(t,e){var r=t[1]||"",n=t[3];if(!n)return r;if(e&&"function"==typeof btoa){var i=(a=n,"/*# sourceMappingURL=data:application/json;charset=utf-8;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(a))))+" */"),s=n.sources.map((function(t){return"/*# sourceURL="+n.sourceRoot+t+" */"}));return[r].concat(s).concat([i]).join("\n")}var a;return[r].join("\n")}(e,t);return e[2]?"@media "+e[2]+"{"+r+"}":r})).join("")},e.i=function(t,r){"string"==typeof t&&(t=[[null,t,""]]);for(var n={},i=0;i<this.length;i++){var s=this[i][0];null!=s&&(n[s]=!0)}for(i=0;i<t.length;i++){var a=t[i];null!=a[0]&&n[a[0]]||(r&&!a[2]?a[2]=r:r&&(a[2]="("+a[2]+") and ("+r+")"),e.push(a))}},e}},function(t,e,r){var n,i,s={},a=(n=function(){return window&&document&&document.all&&!window.atob},function(){return void 0===i&&(i=n.apply(this,arguments)),i}),o=function(t,e){return e?e.querySelector(t):document.querySelector(t)},u=function(t){var e={};return function(t,r){if("function"==typeof t)return t();if(void 0===e[t]){var n=o.call(this,t,r);if(window.HTMLIFrameElement&&n instanceof window.HTMLIFrameElement)try{n=n.contentDocument.head}catch(t){n=null}e[t]=n}return e[t]}}(),h=null,c=0,_=[],f=r(11);function l(t,e){for(var r=0;r<t.length;r++){var n=t[r],i=s[n.id];if(i){i.refs++;for(var a=0;a<i.parts.length;a++)i.parts[a](n.parts[a]);for(;a<n.parts.length;a++)i.parts.push(v(n.parts[a],e))}else{var o=[];for(a=0;a<n.parts.length;a++)o.push(v(n.parts[a],e));s[n.id]={id:n.id,refs:1,parts:o}}}}function d(t,e){for(var r=[],n={},i=0;i<t.length;i++){var s=t[i],a=e.base?s[0]+e.base:s[0],o={css:s[1],media:s[2],sourceMap:s[3]};n[a]?n[a].parts.push(o):r.push(n[a]={id:a,parts:[o]})}return r}function p(t,e){var r=u(t.insertInto);if(!r)throw new Error("Couldn't find a style target. This probably means that the value for the 'insertInto' parameter is invalid.");var n=_[_.length-1];if("top"===t.insertAt)n?n.nextSibling?r.insertBefore(e,n.nextSibling):r.appendChild(e):r.insertBefore(e,r.firstChild),_.push(e);else if("bottom"===t.insertAt)r.appendChild(e);else{if("object"!=typeof t.insertAt||!t.insertAt.before)throw new Error("[Style Loader]\n\n Invalid value for parameter 'insertAt' ('options.insertAt') found.\n Must be 'top', 'bottom', or Object.\n (https://github.com/webpack-contrib/style-loader#insertat)\n");var i=u(t.insertAt.before,r);r.insertBefore(e,i)}}function E(t){if(null===t.parentNode)return!1;t.parentNode.removeChild(t);var e=_.indexOf(t);e>=0&&_.splice(e,1)}function m(t){var e=document.createElement("style");if(void 0===t.attrs.type&&(t.attrs.type="text/css"),void 0===t.attrs.nonce){var n=function(){0;return r.nc}();n&&(t.attrs.nonce=n)}return T(e,t.attrs),p(t,e),e}function T(t,e){Object.keys(e).forEach((function(r){t.setAttribute(r,e[r])}))}function v(t,e){var r,n,i,s;if(e.transform&&t.css){if(!(s="function"==typeof e.transform?e.transform(t.css):e.transform.default(t.css)))return function(){};t.css=s}if(e.singleton){var a=c++;r=h||(h=m(e)),n=M.bind(null,r,a,!1),i=M.bind(null,r,a,!0)}else t.sourceMap&&"function"==typeof URL&&"function"==typeof URL.createObjectURL&&"function"==typeof URL.revokeObjectURL&&"function"==typeof Blob&&"function"==typeof btoa?(r=function(t){var e=document.createElement("link");return void 0===t.attrs.type&&(t.attrs.type="text/css"),t.attrs.rel="stylesheet",T(e,t.attrs),p(t,e),e}(e),n=x.bind(null,r,e),i=function(){E(r),r.href&&URL.revokeObjectURL(r.href)}):(r=m(e),n=A.bind(null,r),i=function(){E(r)});return n(t),function(e){if(e){if(e.css===t.css&&e.media===t.media&&e.sourceMap===t.sourceMap)return;n(t=e)}else i()}}t.exports=function(t,e){if("undefined"!=typeof DEBUG&&DEBUG&&"object"!=typeof document)throw new Error("The style-loader cannot be used in a non-browser environment");(e=e||{}).attrs="object"==typeof e.attrs?e.attrs:{},e.singleton||"boolean"==typeof e.singleton||(e.singleton=a()),e.insertInto||(e.insertInto="head"),e.insertAt||(e.insertAt="bottom");var r=d(t,e);return l(r,e),function(t){for(var n=[],i=0;i<r.length;i++){var a=r[i];(o=s[a.id]).refs--,n.push(o)}t&&l(d(t,e),e);for(i=0;i<n.length;i++){var o;if(0===(o=n[i]).refs){for(var u=0;u<o.parts.length;u++)o.parts[u]();delete s[o.id]}}}};var g,R=(g=[],function(t,e){return g[t]=e,g.filter(Boolean).join("\n")});function M(t,e,r,n){var i=r?"":n.css;if(t.styleSheet)t.styleSheet.cssText=R(e,i);else{var s=document.createTextNode(i),a=t.childNodes;a[e]&&t.removeChild(a[e]),a.length?t.insertBefore(s,a[e]):t.appendChild(s)}}function A(t,e){var r=e.css,n=e.media;if(n&&t.setAttribute("media",n),t.styleSheet)t.styleSheet.cssText=r;else{for(;t.firstChild;)t.removeChild(t.firstChild);t.appendChild(document.createTextNode(r))}}function x(t,e,r){var n=r.css,i=r.sourceMap,s=void 0===e.convertToAbsoluteUrls&&i;(e.convertToAbsoluteUrls||s)&&(n=f(n)),i&&(n+="\n/*# sourceMappingURL=data:application/json;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(i))))+" */");var a=new Blob([n],{type:"text/css"}),o=t.href;t.href=URL.createObjectURL(a),o&&URL.revokeObjectURL(o)}},function(t,e){t.exports=function(t){var e="undefined"!=typeof window&&window.location;if(!e)throw new Error("fixUrls requires window.location");if(!t||"string"!=typeof t)return t;var r=e.protocol+"//"+e.host,n=r+e.pathname.replace(/\/[^\/]*$/,"/");return t.replace(/url\s*\(((?:[^)(]|\((?:[^)(]+|\([^)(]*\))*\))*)\)/gi,(function(t,e){var i,s=e.trim().replace(/^"(.*)"$/,(function(t,e){return e})).replace(/^'(.*)'$/,(function(t,e){return e}));return/^(#|data:|http:\/\/|https:\/\/|file:\/\/\/|\s*$)/i.test(s)?t:(i=0===s.indexOf("//")?s:0===s.indexOf("/")?r+s:n+s.replace(/^\.\//,""),"url("+JSON.stringify(i)+")")}))}},function(t,e){t.exports=function(t){"string"==typeof t&&(t=[t]);for(var e=[].slice.call(arguments,1),r=[],n=0;n<t.length-1;n++)r.push(t[n],e[n]||"");return r.push(t[n]),r.join("")}},function(t,e,r){"use strict";var n=r(4),i=r(15),s=0;t.exports=function t(e){var r,a={},o=[],u=[],h=0,c=0,_={},f=function(n){return Array.isArray(n)?(n.forEach(f),r):((s=!!n.assets&&Array.isArray(n.assets)?t(d(n,e)):i(d(n,e))).once("destroy",T),u.push(s),_[s.id]=s,r);var s},l=function(t){return arguments.length?a[t]?a[t]:_[t]:o},d=function(t,e){"string"==typeof t&&(t={url:t});return void 0===t.isTouchLocked&&(t.isTouchLocked=e.isTouchLocked),void 0===t.blob&&(t.blob=e.blob),void 0===t.basePath&&(t.basePath=e.basePath),t.id=t.id||t.url||String(++s),t.type=t.type||function(t){return t&&t.split("?")[0].split(".").pop().toLowerCase()}(t.url),t.crossOrigin=t.crossOrigin||e.crossOrigin,t.webAudioContext=t.webAudioContext||e.webAudioContext,t.log=e.log,t},p=function(t){var e=h+t;r.emit("progress",e/c)},E=function(t,e,n){Array.isArray(t)&&(t={id:e,file:t,type:n}),h++,r.emit("progress",h/c),a[t.id]=t.file,o.push(t),r.emit("childcomplete",t),v()},m=function(t){c--,r.listeners("error").length&&r.emit("error",t),v()},T=function(t){_[t]=null,delete _[t],a[t]=null,delete a[t],o.some((function(e,r){if(e.id===t)return o.splice(r,1),!0}))},v=function(){h>=c&&r.emit("complete",o,a,e.id,"group")};return r=Object.create(n.prototype,{_events:{value:{}},id:{get:function(){return e.id}},add:{value:f},start:{value:function(){return c=u.length,u.forEach((function(t){t.on("progress",p).once("complete",E).once("error",m).start()})),u=[],r}},get:{value:l},find:{value:function(t){if(l(t))return l(t);var e=null;return Object.keys(_).some((function(r){return!!(e=_[r].find&&_[r].find(t))})),e}},getLoader:{value:function(t){return _[t]}},loaded:{get:function(){return h>=c}},file:{get:function(){return o}},destroy:{value:function(){for(;u.length;)u.pop().destroy();return r.off("error"),r.off("progress"),r.off("complete"),o=[],a={},e.webAudioContext=null,c=0,h=0,Object.keys(_).forEach((function(t){_[t].destroy()})),_={},r.emit("destroy",r.id),r}}}),e=d(e||{},{basePath:"",blob:!1,touchLocked:!1,crossOrigin:null,webAudioContext:null,log:!1}),Array.isArray(e.assets)&&f(e.assets),r}},function(t,e,r){"use strict";var n,i="object"==typeof Reflect?Reflect:null,s=i&&"function"==typeof i.apply?i.apply:function(t,e,r){return Function.prototype.apply.call(t,e,r)};n=i&&"function"==typeof i.ownKeys?i.ownKeys:Object.getOwnPropertySymbols?function(t){return Object.getOwnPropertyNames(t).concat(Object.getOwnPropertySymbols(t))}:function(t){return Object.getOwnPropertyNames(t)};var a=Number.isNaN||function(t){return t!=t};function o(){o.init.call(this)}t.exports=o,o.EventEmitter=o,o.prototype._events=void 0,o.prototype._eventsCount=0,o.prototype._maxListeners=void 0;var u=10;function h(t){if("function"!=typeof t)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof t)}function c(t){return void 0===t._maxListeners?o.defaultMaxListeners:t._maxListeners}function _(t,e,r,n){var i,s,a;if(h(r),void 0===(s=t._events)?(s=t._events=Object.create(null),t._eventsCount=0):(void 0!==s.newListener&&(t.emit("newListener",e,r.listener?r.listener:r),s=t._events),a=s[e]),void 0===a)a=s[e]=r,++t._eventsCount;else if("function"==typeof a?a=s[e]=n?[r,a]:[a,r]:n?a.unshift(r):a.push(r),(i=c(t))>0&&a.length>i&&!a.warned){a.warned=!0;var o=new Error("Possible EventEmitter memory leak detected. "+a.length+" "+String(e)+" listeners added. Use emitter.setMaxListeners() to increase limit");o.name="MaxListenersExceededWarning",o.emitter=t,o.type=e,o.count=a.length,console&&console.warn}return t}function f(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,0===arguments.length?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function l(t,e,r){var n={fired:!1,wrapFn:void 0,target:t,type:e,listener:r},i=f.bind(n);return i.listener=r,n.wrapFn=i,i}function d(t,e,r){var n=t._events;if(void 0===n)return[];var i=n[e];return void 0===i?[]:"function"==typeof i?r?[i.listener||i]:[i]:r?function(t){for(var e=new Array(t.length),r=0;r<e.length;++r)e[r]=t[r].listener||t[r];return e}(i):E(i,i.length)}function p(t){var e=this._events;if(void 0!==e){var r=e[t];if("function"==typeof r)return 1;if(void 0!==r)return r.length}return 0}function E(t,e){for(var r=new Array(e),n=0;n<e;++n)r[n]=t[n];return r}Object.defineProperty(o,"defaultMaxListeners",{enumerable:!0,get:function(){return u},set:function(t){if("number"!=typeof t||t<0||a(t))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+t+".");u=t}}),o.init=function(){void 0!==this._events&&this._events!==Object.getPrototypeOf(this)._events||(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},o.prototype.setMaxListeners=function(t){if("number"!=typeof t||t<0||a(t))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+t+".");return this._maxListeners=t,this},o.prototype.getMaxListeners=function(){return c(this)},o.prototype.emit=function(t){for(var e=[],r=1;r<arguments.length;r++)e.push(arguments[r]);var n="error"===t,i=this._events;if(void 0!==i)n=n&&void 0===i.error;else if(!n)return!1;if(n){var a;if(e.length>0&&(a=e[0]),a instanceof Error)throw a;var o=new Error("Unhandled error."+(a?" ("+a.message+")":""));throw o.context=a,o}var u=i[t];if(void 0===u)return!1;if("function"==typeof u)s(u,this,e);else{var h=u.length,c=E(u,h);for(r=0;r<h;++r)s(c[r],this,e)}return!0},o.prototype.addListener=function(t,e){return _(this,t,e,!1)},o.prototype.on=o.prototype.addListener,o.prototype.prependListener=function(t,e){return _(this,t,e,!0)},o.prototype.once=function(t,e){return h(e),this.on(t,l(this,t,e)),this},o.prototype.prependOnceListener=function(t,e){return h(e),this.prependListener(t,l(this,t,e)),this},o.prototype.removeListener=function(t,e){var r,n,i,s,a;if(h(e),void 0===(n=this._events))return this;if(void 0===(r=n[t]))return this;if(r===e||r.listener===e)0==--this._eventsCount?this._events=Object.create(null):(delete n[t],n.removeListener&&this.emit("removeListener",t,r.listener||e));else if("function"!=typeof r){for(i=-1,s=r.length-1;s>=0;s--)if(r[s]===e||r[s].listener===e){a=r[s].listener,i=s;break}if(i<0)return this;0===i?r.shift():function(t,e){for(;e+1<t.length;e++)t[e]=t[e+1];t.pop()}(r,i),1===r.length&&(n[t]=r[0]),void 0!==n.removeListener&&this.emit("removeListener",t,a||e)}return this},o.prototype.off=o.prototype.removeListener,o.prototype.removeAllListeners=function(t){var e,r,n;if(void 0===(r=this._events))return this;if(void 0===r.removeListener)return 0===arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==r[t]&&(0==--this._eventsCount?this._events=Object.create(null):delete r[t]),this;if(0===arguments.length){var i,s=Object.keys(r);for(n=0;n<s.length;++n)"removeListener"!==(i=s[n])&&this.removeAllListeners(i);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if("function"==typeof(e=r[t]))this.removeListener(t,e);else if(void 0!==e)for(n=e.length-1;n>=0;n--)this.removeListener(t,e[n]);return this},o.prototype.listeners=function(t){return d(this,t,!0)},o.prototype.rawListeners=function(t){return d(this,t,!1)},o.listenerCount=function(t,e){return"function"==typeof t.listenerCount?t.listenerCount(e):p.call(t,e)},o.prototype.listenerCount=p,o.prototype.eventNames=function(){return this._eventsCount>0?n(this._events):[]}},function(t,e,r){"use strict";var n=r(4),i=r(16),s=r(5);t.exports=function(t){var e,r,a,o,u,h,c=t.id,_=t.basePath||"",f=t.url,l=t.type,d=t.crossOrigin,p=t.isTouchLocked,E=t.blob&&i,m=t.webAudioContext,T=t.log,v=function(t){t&&(h={id:c,file:t,type:l},e.emit("progress",1),e.emit("complete",h,c,l),P())},g=function(t,e){r=e||M,(a=new XMLHttpRequest).open("GET",_+f,!0),a.responseType=t,a.addEventListener("progress",R),a.addEventListener("load",r),a.addEventListener("error",U),a.send()},R=function(t){t.lengthComputable&&e.emit("progress",t.loaded/t.total)},M=function(){A()&&v(a.response)},A=function(){return a&&a.status<400?(s.update(a,o,f,T),!0):(U(a&&a.statusText),!1)},x=function(){g("json",(function(){if(A()){var t=a.response;"string"==typeof t&&(t=JSON.parse(t)),v(t)}}))},b=function(){E?S():y()},y=function(){a=new Image,d&&(a.crossOrigin="anonymous"),a.addEventListener("error",U,!1),a.addEventListener("load",I,!1),a.src=_+f},I=function(t){window.clearTimeout(u),t||!a.error&&a.readyState?v(a):U()},S=function(){g("blob",(function(){A()&&((a=new Image).addEventListener("error",U,!1),a.addEventListener("load",N,!1),a.src=window.URL.createObjectURL(a.response))}))},N=function(){window.URL.revokeObjectURL(a.src),v(a)},L=function(){m?F():C("audio")},w=function(){E?g("blob"):C("video")},F=function(){g("arraybuffer",(function(){A()&&m.decodeAudioData(a.response,(function(t){a=null,v(t)}),(function(t){U(t)}))}))},C=function(t){a=document.createElement(t),p||(window.clearTimeout(u),u=window.setTimeout(I,2e3),a.addEventListener("canplaythrough",I,!1)),a.addEventListener("error",U,!1),a.preload="auto",a.src=_+f,a.load(),p&&v(a)},U=function(t){window.clearTimeout(u);var r=t;if(a&&a.tagName&&a.error){r="MediaError: "+["","ABORTED","NETWORK","DECODE","SRC_NOT_SUPPORTED"][a.error.code]+" "+a.src}else a&&a.statusText?r=a.statusText:t&&t.message?r=t.message:t&&t.type&&(r=t.type);e.emit("error",'Error loading "'+_+f+'" '+r),O()},P=function(){e.off("error"),e.off("progress"),e.off("complete"),a&&(a.removeEventListener("progress",R),a.removeEventListener("load",r),a.removeEventListener("error",U),a.removeEventListener("load",I),a.removeEventListener("canplaythrough",I),a.removeEventListener("load",N))},O=function(){P(),a&&a.abort&&a.readyState<4&&a.abort(),a=null,m=null,h=null,window.clearTimeout(u),e.emit("destroy",c)};return e=Object.create(n.prototype,{_events:{value:{}},id:{value:t.id},start:{value:function(){switch(o=Date.now(),l){case"json":x();break;case"jpg":case"png":case"gif":case"webp":case"svg":b();break;case"mp3":case"ogg":case"opus":case"wav":case"m4a":L();break;case"ogv":case"mp4":case"webm":case"hls":w();break;case"bin":case"binary":g("arraybuffer");break;case"txt":case"text":g("text");break;default:throw"AssetsLoader ERROR: Unknown type for file with URL: "+_+f+" ("+l+")"}}},loaded:{get:function(){return!!h}},file:{get:function(){return h}},destroy:{value:O}})}},function(t,e,r){"use strict";t.exports=function(){try{return!!new Blob}catch(t){return!1}}()},function(t,e){window.gui={add:()=>{}}},function(t,e,r){"use strict";r.r(e),r.d(e,"WebGL",(function(){return kf}));var n={};r.r(n),r.d(n,"EPSILON",(function(){return d})),r.d(n,"ARRAY_TYPE",(function(){return p})),r.d(n,"RANDOM",(function(){return E})),r.d(n,"setMatrixArrayType",(function(){return m})),r.d(n,"toRadian",(function(){return v})),r.d(n,"equals",(function(){return g}));var i={};r.r(i),r.d(i,"create",(function(){return R})),r.d(i,"clone",(function(){return M})),r.d(i,"copy",(function(){return A})),r.d(i,"identity",(function(){return x})),r.d(i,"fromValues",(function(){return b})),r.d(i,"set",(function(){return y})),r.d(i,"transpose",(function(){return I})),r.d(i,"invert",(function(){return S})),r.d(i,"adjoint",(function(){return N})),r.d(i,"determinant",(function(){return L})),r.d(i,"multiply",(function(){return w})),r.d(i,"rotate",(function(){return F})),r.d(i,"scale",(function(){return C})),r.d(i,"fromRotation",(function(){return U})),r.d(i,"fromScaling",(function(){return P})),r.d(i,"str",(function(){return O})),r.d(i,"frob",(function(){return D})),r.d(i,"LDU",(function(){return B})),r.d(i,"add",(function(){return X})),r.d(i,"subtract",(function(){return V})),r.d(i,"exactEquals",(function(){return G})),r.d(i,"equals",(function(){return k})),r.d(i,"multiplyScalar",(function(){return H})),r.d(i,"multiplyScalarAndAdd",(function(){return Y})),r.d(i,"mul",(function(){return W})),r.d(i,"sub",(function(){return z}));var s={};r.r(s),r.d(s,"create",(function(){return q})),r.d(s,"clone",(function(){return j})),r.d(s,"copy",(function(){return Z})),r.d(s,"identity",(function(){return K})),r.d(s,"fromValues",(function(){return Q})),r.d(s,"set",(function(){return $})),r.d(s,"invert",(function(){return J})),r.d(s,"determinant",(function(){return tt})),r.d(s,"multiply",(function(){return et})),r.d(s,"rotate",(function(){return rt})),r.d(s,"scale",(function(){return nt})),r.d(s,"translate",(function(){return it})),r.d(s,"fromRotation",(function(){return st})),r.d(s,"fromScaling",(function(){return at})),r.d(s,"fromTranslation",(function(){return ot})),r.d(s,"str",(function(){return ut})),r.d(s,"frob",(function(){return ht})),r.d(s,"add",(function(){return ct})),r.d(s,"subtract",(function(){return _t})),r.d(s,"multiplyScalar",(function(){return ft})),r.d(s,"multiplyScalarAndAdd",(function(){return lt})),r.d(s,"exactEquals",(function(){return dt})),r.d(s,"equals",(function(){return pt})),r.d(s,"mul",(function(){return Et})),r.d(s,"sub",(function(){return mt}));var a={};r.r(a),r.d(a,"create",(function(){return Tt})),r.d(a,"fromMat4",(function(){return vt})),r.d(a,"clone",(function(){return gt})),r.d(a,"copy",(function(){return Rt})),r.d(a,"fromValues",(function(){return Mt})),r.d(a,"set",(function(){return At})),r.d(a,"identity",(function(){return xt})),r.d(a,"transpose",(function(){return bt})),r.d(a,"invert",(function(){return yt})),r.d(a,"adjoint",(function(){return It})),r.d(a,"determinant",(function(){return St})),r.d(a,"multiply",(function(){return Nt})),r.d(a,"translate",(function(){return Lt})),r.d(a,"rotate",(function(){return wt})),r.d(a,"scale",(function(){return Ft})),r.d(a,"fromTranslation",(function(){return Ct})),r.d(a,"fromRotation",(function(){return Ut})),r.d(a,"fromScaling",(function(){return Pt})),r.d(a,"fromMat2d",(function(){return Ot})),r.d(a,"fromQuat",(function(){return Dt})),r.d(a,"normalFromMat4",(function(){return Bt})),r.d(a,"projection",(function(){return Xt})),r.d(a,"str",(function(){return Vt})),r.d(a,"frob",(function(){return Gt})),r.d(a,"add",(function(){return kt})),r.d(a,"subtract",(function(){return Ht})),r.d(a,"multiplyScalar",(function(){return Yt})),r.d(a,"multiplyScalarAndAdd",(function(){return Wt})),r.d(a,"exactEquals",(function(){return zt})),r.d(a,"equals",(function(){return qt})),r.d(a,"mul",(function(){return jt})),r.d(a,"sub",(function(){return Zt}));var o={};r.r(o),r.d(o,"create",(function(){return Kt})),r.d(o,"clone",(function(){return Qt})),r.d(o,"copy",(function(){return $t})),r.d(o,"fromValues",(function(){return Jt})),r.d(o,"set",(function(){return te})),r.d(o,"identity",(function(){return ee})),r.d(o,"transpose",(function(){return re})),r.d(o,"invert",(function(){return ne})),r.d(o,"adjoint",(function(){return ie})),r.d(o,"determinant",(function(){return se})),r.d(o,"multiply",(function(){return ae})),r.d(o,"translate",(function(){return oe})),r.d(o,"scale",(function(){return ue})),r.d(o,"rotate",(function(){return he})),r.d(o,"rotateX",(function(){return ce})),r.d(o,"rotateY",(function(){return _e})),r.d(o,"rotateZ",(function(){return fe})),r.d(o,"fromTranslation",(function(){return le})),r.d(o,"fromScaling",(function(){return de})),r.d(o,"fromRotation",(function(){return pe})),r.d(o,"fromXRotation",(function(){return Ee})),r.d(o,"fromYRotation",(function(){return me})),r.d(o,"fromZRotation",(function(){return Te})),r.d(o,"fromRotationTranslation",(function(){return ve})),r.d(o,"fromQuat2",(function(){return ge})),r.d(o,"getTranslation",(function(){return Re})),r.d(o,"getScaling",(function(){return Me})),r.d(o,"getRotation",(function(){return Ae})),r.d(o,"fromRotationTranslationScale",(function(){return xe})),r.d(o,"fromRotationTranslationScaleOrigin",(function(){return be})),r.d(o,"fromQuat",(function(){return ye})),r.d(o,"frustum",(function(){return Ie})),r.d(o,"perspective",(function(){return Se})),r.d(o,"perspectiveFromFieldOfView",(function(){return Ne})),r.d(o,"ortho",(function(){return Le})),r.d(o,"lookAt",(function(){return we})),r.d(o,"targetTo",(function(){return Fe})),r.d(o,"str",(function(){return Ce})),r.d(o,"frob",(function(){return Ue})),r.d(o,"add",(function(){return Pe})),r.d(o,"subtract",(function(){return Oe})),r.d(o,"multiplyScalar",(function(){return De})),r.d(o,"multiplyScalarAndAdd",(function(){return Be})),r.d(o,"exactEquals",(function(){return Xe})),r.d(o,"equals",(function(){return Ve})),r.d(o,"mul",(function(){return Ge})),r.d(o,"sub",(function(){return ke}));var u={};r.r(u),r.d(u,"create",(function(){return He})),r.d(u,"clone",(function(){return Ye})),r.d(u,"length",(function(){return We})),r.d(u,"fromValues",(function(){return ze})),r.d(u,"copy",(function(){return qe})),r.d(u,"set",(function(){return je})),r.d(u,"add",(function(){return Ze})),r.d(u,"subtract",(function(){return Ke})),r.d(u,"multiply",(function(){return Qe})),r.d(u,"divide",(function(){return $e})),r.d(u,"ceil",(function(){return Je})),r.d(u,"floor",(function(){return tr})),r.d(u,"min",(function(){return er})),r.d(u,"max",(function(){return rr})),r.d(u,"round",(function(){return nr})),r.d(u,"scale",(function(){return ir})),r.d(u,"scaleAndAdd",(function(){return sr})),r.d(u,"distance",(function(){return ar})),r.d(u,"squaredDistance",(function(){return or})),r.d(u,"squaredLength",(function(){return ur})),r.d(u,"negate",(function(){return hr})),r.d(u,"inverse",(function(){return cr})),r.d(u,"normalize",(function(){return _r})),r.d(u,"dot",(function(){return fr})),r.d(u,"cross",(function(){return lr})),r.d(u,"lerp",(function(){return dr})),r.d(u,"hermite",(function(){return pr})),r.d(u,"bezier",(function(){return Er})),r.d(u,"random",(function(){return mr})),r.d(u,"transformMat4",(function(){return Tr})),r.d(u,"transformMat3",(function(){return vr})),r.d(u,"transformQuat",(function(){return gr})),r.d(u,"rotateX",(function(){return Rr})),r.d(u,"rotateY",(function(){return Mr})),r.d(u,"rotateZ",(function(){return Ar})),r.d(u,"angle",(function(){return xr})),r.d(u,"zero",(function(){return br})),r.d(u,"str",(function(){return yr})),r.d(u,"exactEquals",(function(){return Ir})),r.d(u,"equals",(function(){return Sr})),r.d(u,"sub",(function(){return Lr})),r.d(u,"mul",(function(){return wr})),r.d(u,"div",(function(){return Fr})),r.d(u,"dist",(function(){return Cr})),r.d(u,"sqrDist",(function(){return Ur})),r.d(u,"len",(function(){return Pr})),r.d(u,"sqrLen",(function(){return Or})),r.d(u,"forEach",(function(){return Dr}));var h={};r.r(h),r.d(h,"create",(function(){return Br})),r.d(h,"clone",(function(){return Xr})),r.d(h,"fromValues",(function(){return Vr})),r.d(h,"copy",(function(){return Gr})),r.d(h,"set",(function(){return kr})),r.d(h,"add",(function(){return Hr})),r.d(h,"subtract",(function(){return Yr})),r.d(h,"multiply",(function(){return Wr})),r.d(h,"divide",(function(){return zr})),r.d(h,"ceil",(function(){return qr})),r.d(h,"floor",(function(){return jr})),r.d(h,"min",(function(){return Zr})),r.d(h,"max",(function(){return Kr})),r.d(h,"round",(function(){return Qr})),r.d(h,"scale",(function(){return $r})),r.d(h,"scaleAndAdd",(function(){return Jr})),r.d(h,"distance",(function(){return tn})),r.d(h,"squaredDistance",(function(){return en})),r.d(h,"length",(function(){return rn})),r.d(h,"squaredLength",(function(){return nn})),r.d(h,"negate",(function(){return sn})),r.d(h,"inverse",(function(){return an})),r.d(h,"normalize",(function(){return on})),r.d(h,"dot",(function(){return un})),r.d(h,"cross",(function(){return hn})),r.d(h,"lerp",(function(){return cn})),r.d(h,"random",(function(){return _n})),r.d(h,"transformMat4",(function(){return fn})),r.d(h,"transformQuat",(function(){return ln})),r.d(h,"zero",(function(){return dn})),r.d(h,"str",(function(){return pn})),r.d(h,"exactEquals",(function(){return En})),r.d(h,"equals",(function(){return mn})),r.d(h,"sub",(function(){return Tn})),r.d(h,"mul",(function(){return vn})),r.d(h,"div",(function(){return gn})),r.d(h,"dist",(function(){return Rn})),r.d(h,"sqrDist",(function(){return Mn})),r.d(h,"len",(function(){return An})),r.d(h,"sqrLen",(function(){return xn})),r.d(h,"forEach",(function(){return bn}));var c={};r.r(c),r.d(c,"create",(function(){return yn})),r.d(c,"identity",(function(){return In})),r.d(c,"setAxisAngle",(function(){return Sn})),r.d(c,"getAxisAngle",(function(){return Nn})),r.d(c,"getAngle",(function(){return Ln})),r.d(c,"multiply",(function(){return wn})),r.d(c,"rotateX",(function(){return Fn})),r.d(c,"rotateY",(function(){return Cn})),r.d(c,"rotateZ",(function(){return Un})),r.d(c,"calculateW",(function(){return Pn})),r.d(c,"exp",(function(){return On})),r.d(c,"ln",(function(){return Dn})),r.d(c,"pow",(function(){return Bn})),r.d(c,"slerp",(function(){return Xn})),r.d(c,"random",(function(){return Vn})),r.d(c,"invert",(function(){return Gn})),r.d(c,"conjugate",(function(){return kn})),r.d(c,"fromMat3",(function(){return Hn})),r.d(c,"fromEuler",(function(){return Yn})),r.d(c,"str",(function(){return Wn})),r.d(c,"clone",(function(){return $n})),r.d(c,"fromValues",(function(){return Jn})),r.d(c,"copy",(function(){return ti})),r.d(c,"set",(function(){return ei})),r.d(c,"add",(function(){return ri})),r.d(c,"mul",(function(){return ni})),r.d(c,"scale",(function(){return ii})),r.d(c,"dot",(function(){return si})),r.d(c,"lerp",(function(){return ai})),r.d(c,"length",(function(){return oi})),r.d(c,"len",(function(){return ui})),r.d(c,"squaredLength",(function(){return hi})),r.d(c,"sqrLen",(function(){return ci})),r.d(c,"normalize",(function(){return _i})),r.d(c,"exactEquals",(function(){return fi})),r.d(c,"equals",(function(){return li})),r.d(c,"rotationTo",(function(){return di})),r.d(c,"sqlerp",(function(){return pi})),r.d(c,"setAxes",(function(){return Ei}));var _={};r.r(_),r.d(_,"create",(function(){return mi})),r.d(_,"clone",(function(){return Ti})),r.d(_,"fromValues",(function(){return vi})),r.d(_,"fromRotationTranslationValues",(function(){return gi})),r.d(_,"fromRotationTranslation",(function(){return Ri})),r.d(_,"fromTranslation",(function(){return Mi})),r.d(_,"fromRotation",(function(){return Ai})),r.d(_,"fromMat4",(function(){return xi})),r.d(_,"copy",(function(){return bi})),r.d(_,"identity",(function(){return yi})),r.d(_,"set",(function(){return Ii})),r.d(_,"getReal",(function(){return Si})),r.d(_,"getDual",(function(){return Ni})),r.d(_,"setReal",(function(){return Li})),r.d(_,"setDual",(function(){return wi})),r.d(_,"getTranslation",(function(){return Fi})),r.d(_,"translate",(function(){return Ci})),r.d(_,"rotateX",(function(){return Ui})),r.d(_,"rotateY",(function(){return Pi})),r.d(_,"rotateZ",(function(){return Oi})),r.d(_,"rotateByQuatAppend",(function(){return Di})),r.d(_,"rotateByQuatPrepend",(function(){return Bi})),r.d(_,"rotateAroundAxis",(function(){return Xi})),r.d(_,"add",(function(){return Vi})),r.d(_,"multiply",(function(){return Gi})),r.d(_,"mul",(function(){return ki})),r.d(_,"scale",(function(){return Hi})),r.d(_,"dot",(function(){return Yi})),r.d(_,"lerp",(function(){return Wi})),r.d(_,"invert",(function(){return zi})),r.d(_,"conjugate",(function(){return qi})),r.d(_,"length",(function(){return ji})),r.d(_,"len",(function(){return Zi})),r.d(_,"squaredLength",(function(){return Ki})),r.d(_,"sqrLen",(function(){return Qi})),r.d(_,"normalize",(function(){return $i})),r.d(_,"str",(function(){return Ji})),r.d(_,"exactEquals",(function(){return ts})),r.d(_,"equals",(function(){return es}));var f={};r.r(f),r.d(f,"create",(function(){return rs})),r.d(f,"clone",(function(){return ns})),r.d(f,"fromValues",(function(){return is})),r.d(f,"copy",(function(){return ss})),r.d(f,"set",(function(){return as})),r.d(f,"add",(function(){return os})),r.d(f,"subtract",(function(){return us})),r.d(f,"multiply",(function(){return hs})),r.d(f,"divide",(function(){return cs})),r.d(f,"ceil",(function(){return _s})),r.d(f,"floor",(function(){return fs})),r.d(f,"min",(function(){return ls})),r.d(f,"max",(function(){return ds})),r.d(f,"round",(function(){return ps})),r.d(f,"scale",(function(){return Es})),r.d(f,"scaleAndAdd",(function(){return ms})),r.d(f,"distance",(function(){return Ts})),r.d(f,"squaredDistance",(function(){return vs})),r.d(f,"length",(function(){return gs})),r.d(f,"squaredLength",(function(){return Rs})),r.d(f,"negate",(function(){return Ms})),r.d(f,"inverse",(function(){return As})),r.d(f,"normalize",(function(){return xs})),r.d(f,"dot",(function(){return bs})),r.d(f,"cross",(function(){return ys})),r.d(f,"lerp",(function(){return Is})),r.d(f,"random",(function(){return Ss})),r.d(f,"transformMat2",(function(){return Ns})),r.d(f,"transformMat2d",(function(){return Ls})),r.d(f,"transformMat3",(function(){return ws})),r.d(f,"transformMat4",(function(){return Fs})),r.d(f,"rotate",(function(){return Cs})),r.d(f,"angle",(function(){return Us})),r.d(f,"zero",(function(){return Ps})),r.d(f,"str",(function(){return Os})),r.d(f,"exactEquals",(function(){return Ds})),r.d(f,"equals",(function(){return Bs})),r.d(f,"len",(function(){return Xs})),r.d(f,"sub",(function(){return Vs})),r.d(f,"mul",(function(){return Gs})),r.d(f,"div",(function(){return ks})),r.d(f,"dist",(function(){return Hs})),r.d(f,"sqrDist",(function(){return Ys})),r.d(f,"sqrLen",(function(){return Ws})),r.d(f,"forEach",(function(){return zs}));var l={};r.r(l),r.d(l,"glMatrix",(function(){return n})),r.d(l,"mat2",(function(){return i})),r.d(l,"mat2d",(function(){return s})),r.d(l,"mat3",(function(){return a})),r.d(l,"mat4",(function(){return o})),r.d(l,"quat",(function(){return c})),r.d(l,"quat2",(function(){return _})),r.d(l,"vec2",(function(){return f})),r.d(l,"vec3",(function(){return u})),r.d(l,"vec4",(function(){return h}));r(7);var d=1e-6,p="undefined"!=typeof Float32Array?Float32Array:Array,E=Math.random;function m(t){p=t}var T=Math.PI/180;function v(t){return t*T}function g(t,e){return Math.abs(t-e)<=d*Math.max(1,Math.abs(t),Math.abs(e))}function R(){var t=new p(4);return p!=Float32Array&&(t[1]=0,t[2]=0),t[0]=1,t[3]=1,t}function M(t){var e=new p(4);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e}function A(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t}function x(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t}function b(t,e,r,n){var i=new p(4);return i[0]=t,i[1]=e,i[2]=r,i[3]=n,i}function y(t,e,r,n,i){return t[0]=e,t[1]=r,t[2]=n,t[3]=i,t}function I(t,e){if(t===e){var r=e[1];t[1]=e[2],t[2]=r}else t[0]=e[0],t[1]=e[2],t[2]=e[1],t[3]=e[3];return t}function S(t,e){var r=e[0],n=e[1],i=e[2],s=e[3],a=r*s-i*n;return a?(a=1/a,t[0]=s*a,t[1]=-n*a,t[2]=-i*a,t[3]=r*a,t):null}function N(t,e){var r=e[0];return t[0]=e[3],t[1]=-e[1],t[2]=-e[2],t[3]=r,t}function L(t){return t[0]*t[3]-t[2]*t[1]}function w(t,e,r){var n=e[0],i=e[1],s=e[2],a=e[3],o=r[0],u=r[1],h=r[2],c=r[3];return t[0]=n*o+s*u,t[1]=i*o+a*u,t[2]=n*h+s*c,t[3]=i*h+a*c,t}function F(t,e,r){var n=e[0],i=e[1],s=e[2],a=e[3],o=Math.sin(r),u=Math.cos(r);return t[0]=n*u+s*o,t[1]=i*u+a*o,t[2]=n*-o+s*u,t[3]=i*-o+a*u,t}function C(t,e,r){var n=e[0],i=e[1],s=e[2],a=e[3],o=r[0],u=r[1];return t[0]=n*o,t[1]=i*o,t[2]=s*u,t[3]=a*u,t}function U(t,e){var r=Math.sin(e),n=Math.cos(e);return t[0]=n,t[1]=r,t[2]=-r,t[3]=n,t}function P(t,e){return t[0]=e[0],t[1]=0,t[2]=0,t[3]=e[1],t}function O(t){return"mat2("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+")"}function D(t){return Math.hypot(t[0],t[1],t[2],t[3])}function B(t,e,r,n){return t[2]=n[2]/n[0],r[0]=n[0],r[1]=n[1],r[3]=n[3]-t[2]*r[1],[t,e,r]}function X(t,e,r){return t[0]=e[0]+r[0],t[1]=e[1]+r[1],t[2]=e[2]+r[2],t[3]=e[3]+r[3],t}function V(t,e,r){return t[0]=e[0]-r[0],t[1]=e[1]-r[1],t[2]=e[2]-r[2],t[3]=e[3]-r[3],t}function G(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]}function k(t,e){var r=t[0],n=t[1],i=t[2],s=t[3],a=e[0],o=e[1],u=e[2],h=e[3];return Math.abs(r-a)<=d*Math.max(1,Math.abs(r),Math.abs(a))&&Math.abs(n-o)<=d*Math.max(1,Math.abs(n),Math.abs(o))&&Math.abs(i-u)<=d*Math.max(1,Math.abs(i),Math.abs(u))&&Math.abs(s-h)<=d*Math.max(1,Math.abs(s),Math.abs(h))}function H(t,e,r){return t[0]=e[0]*r,t[1]=e[1]*r,t[2]=e[2]*r,t[3]=e[3]*r,t}function Y(t,e,r,n){return t[0]=e[0]+r[0]*n,t[1]=e[1]+r[1]*n,t[2]=e[2]+r[2]*n,t[3]=e[3]+r[3]*n,t}Math.hypot||(Math.hypot=function(){for(var t=0,e=arguments.length;e--;)t+=arguments[e]*arguments[e];return Math.sqrt(t)});var W=w,z=V;function q(){var t=new p(6);return p!=Float32Array&&(t[1]=0,t[2]=0,t[4]=0,t[5]=0),t[0]=1,t[3]=1,t}function j(t){var e=new p(6);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e}function Z(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t}function K(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t[4]=0,t[5]=0,t}function Q(t,e,r,n,i,s){var a=new p(6);return a[0]=t,a[1]=e,a[2]=r,a[3]=n,a[4]=i,a[5]=s,a}function $(t,e,r,n,i,s,a){return t[0]=e,t[1]=r,t[2]=n,t[3]=i,t[4]=s,t[5]=a,t}function J(t,e){var r=e[0],n=e[1],i=e[2],s=e[3],a=e[4],o=e[5],u=r*s-n*i;return u?(u=1/u,t[0]=s*u,t[1]=-n*u,t[2]=-i*u,t[3]=r*u,t[4]=(i*o-s*a)*u,t[5]=(n*a-r*o)*u,t):null}function tt(t){return t[0]*t[3]-t[1]*t[2]}function et(t,e,r){var n=e[0],i=e[1],s=e[2],a=e[3],o=e[4],u=e[5],h=r[0],c=r[1],_=r[2],f=r[3],l=r[4],d=r[5];return t[0]=n*h+s*c,t[1]=i*h+a*c,t[2]=n*_+s*f,t[3]=i*_+a*f,t[4]=n*l+s*d+o,t[5]=i*l+a*d+u,t}function rt(t,e,r){var n=e[0],i=e[1],s=e[2],a=e[3],o=e[4],u=e[5],h=Math.sin(r),c=Math.cos(r);return t[0]=n*c+s*h,t[1]=i*c+a*h,t[2]=n*-h+s*c,t[3]=i*-h+a*c,t[4]=o,t[5]=u,t}function nt(t,e,r){var n=e[0],i=e[1],s=e[2],a=e[3],o=e[4],u=e[5],h=r[0],c=r[1];return t[0]=n*h,t[1]=i*h,t[2]=s*c,t[3]=a*c,t[4]=o,t[5]=u,t}function it(t,e,r){var n=e[0],i=e[1],s=e[2],a=e[3],o=e[4],u=e[5],h=r[0],c=r[1];return t[0]=n,t[1]=i,t[2]=s,t[3]=a,t[4]=n*h+s*c+o,t[5]=i*h+a*c+u,t}function st(t,e){var r=Math.sin(e),n=Math.cos(e);return t[0]=n,t[1]=r,t[2]=-r,t[3]=n,t[4]=0,t[5]=0,t}function at(t,e){return t[0]=e[0],t[1]=0,t[2]=0,t[3]=e[1],t[4]=0,t[5]=0,t}function ot(t,e){return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t[4]=e[0],t[5]=e[1],t}function ut(t){return"mat2d("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+")"}function ht(t){return Math.hypot(t[0],t[1],t[2],t[3],t[4],t[5],1)}function ct(t,e,r){return t[0]=e[0]+r[0],t[1]=e[1]+r[1],t[2]=e[2]+r[2],t[3]=e[3]+r[3],t[4]=e[4]+r[4],t[5]=e[5]+r[5],t}function _t(t,e,r){return t[0]=e[0]-r[0],t[1]=e[1]-r[1],t[2]=e[2]-r[2],t[3]=e[3]-r[3],t[4]=e[4]-r[4],t[5]=e[5]-r[5],t}function ft(t,e,r){return t[0]=e[0]*r,t[1]=e[1]*r,t[2]=e[2]*r,t[3]=e[3]*r,t[4]=e[4]*r,t[5]=e[5]*r,t}function lt(t,e,r,n){return t[0]=e[0]+r[0]*n,t[1]=e[1]+r[1]*n,t[2]=e[2]+r[2]*n,t[3]=e[3]+r[3]*n,t[4]=e[4]+r[4]*n,t[5]=e[5]+r[5]*n,t}function dt(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]&&t[4]===e[4]&&t[5]===e[5]}function pt(t,e){var r=t[0],n=t[1],i=t[2],s=t[3],a=t[4],o=t[5],u=e[0],h=e[1],c=e[2],_=e[3],f=e[4],l=e[5];return Math.abs(r-u)<=d*Math.max(1,Math.abs(r),Math.abs(u))&&Math.abs(n-h)<=d*Math.max(1,Math.abs(n),Math.abs(h))&&Math.abs(i-c)<=d*Math.max(1,Math.abs(i),Math.abs(c))&&Math.abs(s-_)<=d*Math.max(1,Math.abs(s),Math.abs(_))&&Math.abs(a-f)<=d*Math.max(1,Math.abs(a),Math.abs(f))&&Math.abs(o-l)<=d*Math.max(1,Math.abs(o),Math.abs(l))}var Et=et,mt=_t;function Tt(){var t=new p(9);return p!=Float32Array&&(t[1]=0,t[2]=0,t[3]=0,t[5]=0,t[6]=0,t[7]=0),t[0]=1,t[4]=1,t[8]=1,t}function vt(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[4],t[4]=e[5],t[5]=e[6],t[6]=e[8],t[7]=e[9],t[8]=e[10],t}function gt(t){var e=new p(9);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e}function Rt(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t}function Mt(t,e,r,n,i,s,a,o,u){var h=new p(9);return h[0]=t,h[1]=e,h[2]=r,h[3]=n,h[4]=i,h[5]=s,h[6]=a,h[7]=o,h[8]=u,h}function At(t,e,r,n,i,s,a,o,u,h){return t[0]=e,t[1]=r,t[2]=n,t[3]=i,t[4]=s,t[5]=a,t[6]=o,t[7]=u,t[8]=h,t}function xt(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=1,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t}function bt(t,e){if(t===e){var r=e[1],n=e[2],i=e[5];t[1]=e[3],t[2]=e[6],t[3]=r,t[5]=e[7],t[6]=n,t[7]=i}else t[0]=e[0],t[1]=e[3],t[2]=e[6],t[3]=e[1],t[4]=e[4],t[5]=e[7],t[6]=e[2],t[7]=e[5],t[8]=e[8];return t}function yt(t,e){var r=e[0],n=e[1],i=e[2],s=e[3],a=e[4],o=e[5],u=e[6],h=e[7],c=e[8],_=c*a-o*h,f=-c*s+o*u,l=h*s-a*u,d=r*_+n*f+i*l;return d?(d=1/d,t[0]=_*d,t[1]=(-c*n+i*h)*d,t[2]=(o*n-i*a)*d,t[3]=f*d,t[4]=(c*r-i*u)*d,t[5]=(-o*r+i*s)*d,t[6]=l*d,t[7]=(-h*r+n*u)*d,t[8]=(a*r-n*s)*d,t):null}function It(t,e){var r=e[0],n=e[1],i=e[2],s=e[3],a=e[4],o=e[5],u=e[6],h=e[7],c=e[8];return t[0]=a*c-o*h,t[1]=i*h-n*c,t[2]=n*o-i*a,t[3]=o*u-s*c,t[4]=r*c-i*u,t[5]=i*s-r*o,t[6]=s*h-a*u,t[7]=n*u-r*h,t[8]=r*a-n*s,t}function St(t){var e=t[0],r=t[1],n=t[2],i=t[3],s=t[4],a=t[5],o=t[6],u=t[7],h=t[8];return e*(h*s-a*u)+r*(-h*i+a*o)+n*(u*i-s*o)}function Nt(t,e,r){var n=e[0],i=e[1],s=e[2],a=e[3],o=e[4],u=e[5],h=e[6],c=e[7],_=e[8],f=r[0],l=r[1],d=r[2],p=r[3],E=r[4],m=r[5],T=r[6],v=r[7],g=r[8];return t[0]=f*n+l*a+d*h,t[1]=f*i+l*o+d*c,t[2]=f*s+l*u+d*_,t[3]=p*n+E*a+m*h,t[4]=p*i+E*o+m*c,t[5]=p*s+E*u+m*_,t[6]=T*n+v*a+g*h,t[7]=T*i+v*o+g*c,t[8]=T*s+v*u+g*_,t}function Lt(t,e,r){var n=e[0],i=e[1],s=e[2],a=e[3],o=e[4],u=e[5],h=e[6],c=e[7],_=e[8],f=r[0],l=r[1];return t[0]=n,t[1]=i,t[2]=s,t[3]=a,t[4]=o,t[5]=u,t[6]=f*n+l*a+h,t[7]=f*i+l*o+c,t[8]=f*s+l*u+_,t}function wt(t,e,r){var n=e[0],i=e[1],s=e[2],a=e[3],o=e[4],u=e[5],h=e[6],c=e[7],_=e[8],f=Math.sin(r),l=Math.cos(r);return t[0]=l*n+f*a,t[1]=l*i+f*o,t[2]=l*s+f*u,t[3]=l*a-f*n,t[4]=l*o-f*i,t[5]=l*u-f*s,t[6]=h,t[7]=c,t[8]=_,t}function Ft(t,e,r){var n=r[0],i=r[1];return t[0]=n*e[0],t[1]=n*e[1],t[2]=n*e[2],t[3]=i*e[3],t[4]=i*e[4],t[5]=i*e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t}function Ct(t,e){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=1,t[5]=0,t[6]=e[0],t[7]=e[1],t[8]=1,t}function Ut(t,e){var r=Math.sin(e),n=Math.cos(e);return t[0]=n,t[1]=r,t[2]=0,t[3]=-r,t[4]=n,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t}function Pt(t,e){return t[0]=e[0],t[1]=0,t[2]=0,t[3]=0,t[4]=e[1],t[5]=0,t[6]=0,t[7]=0,t[8]=1,t}function Ot(t,e){return t[0]=e[0],t[1]=e[1],t[2]=0,t[3]=e[2],t[4]=e[3],t[5]=0,t[6]=e[4],t[7]=e[5],t[8]=1,t}function Dt(t,e){var r=e[0],n=e[1],i=e[2],s=e[3],a=r+r,o=n+n,u=i+i,h=r*a,c=n*a,_=n*o,f=i*a,l=i*o,d=i*u,p=s*a,E=s*o,m=s*u;return t[0]=1-_-d,t[3]=c-m,t[6]=f+E,t[1]=c+m,t[4]=1-h-d,t[7]=l-p,t[2]=f-E,t[5]=l+p,t[8]=1-h-_,t}function Bt(t,e){var r=e[0],n=e[1],i=e[2],s=e[3],a=e[4],o=e[5],u=e[6],h=e[7],c=e[8],_=e[9],f=e[10],l=e[11],d=e[12],p=e[13],E=e[14],m=e[15],T=r*o-n*a,v=r*u-i*a,g=r*h-s*a,R=n*u-i*o,M=n*h-s*o,A=i*h-s*u,x=c*p-_*d,b=c*E-f*d,y=c*m-l*d,I=_*E-f*p,S=_*m-l*p,N=f*m-l*E,L=T*N-v*S+g*I+R*y-M*b+A*x;return L?(L=1/L,t[0]=(o*N-u*S+h*I)*L,t[1]=(u*y-a*N-h*b)*L,t[2]=(a*S-o*y+h*x)*L,t[3]=(i*S-n*N-s*I)*L,t[4]=(r*N-i*y+s*b)*L,t[5]=(n*y-r*S-s*x)*L,t[6]=(p*A-E*M+m*R)*L,t[7]=(E*g-d*A-m*v)*L,t[8]=(d*M-p*g+m*T)*L,t):null}function Xt(t,e,r){return t[0]=2/e,t[1]=0,t[2]=0,t[3]=0,t[4]=-2/r,t[5]=0,t[6]=-1,t[7]=1,t[8]=1,t}function Vt(t){return"mat3("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+", "+t[6]+", "+t[7]+", "+t[8]+")"}function Gt(t){return Math.hypot(t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7],t[8])}function kt(t,e,r){return t[0]=e[0]+r[0],t[1]=e[1]+r[1],t[2]=e[2]+r[2],t[3]=e[3]+r[3],t[4]=e[4]+r[4],t[5]=e[5]+r[5],t[6]=e[6]+r[6],t[7]=e[7]+r[7],t[8]=e[8]+r[8],t}function Ht(t,e,r){return t[0]=e[0]-r[0],t[1]=e[1]-r[1],t[2]=e[2]-r[2],t[3]=e[3]-r[3],t[4]=e[4]-r[4],t[5]=e[5]-r[5],t[6]=e[6]-r[6],t[7]=e[7]-r[7],t[8]=e[8]-r[8],t}function Yt(t,e,r){return t[0]=e[0]*r,t[1]=e[1]*r,t[2]=e[2]*r,t[3]=e[3]*r,t[4]=e[4]*r,t[5]=e[5]*r,t[6]=e[6]*r,t[7]=e[7]*r,t[8]=e[8]*r,t}function Wt(t,e,r,n){return t[0]=e[0]+r[0]*n,t[1]=e[1]+r[1]*n,t[2]=e[2]+r[2]*n,t[3]=e[3]+r[3]*n,t[4]=e[4]+r[4]*n,t[5]=e[5]+r[5]*n,t[6]=e[6]+r[6]*n,t[7]=e[7]+r[7]*n,t[8]=e[8]+r[8]*n,t}function zt(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]&&t[4]===e[4]&&t[5]===e[5]&&t[6]===e[6]&&t[7]===e[7]&&t[8]===e[8]}function qt(t,e){var r=t[0],n=t[1],i=t[2],s=t[3],a=t[4],o=t[5],u=t[6],h=t[7],c=t[8],_=e[0],f=e[1],l=e[2],p=e[3],E=e[4],m=e[5],T=e[6],v=e[7],g=e[8];return Math.abs(r-_)<=d*Math.max(1,Math.abs(r),Math.abs(_))&&Math.abs(n-f)<=d*Math.max(1,Math.abs(n),Math.abs(f))&&Math.abs(i-l)<=d*Math.max(1,Math.abs(i),Math.abs(l))&&Math.abs(s-p)<=d*Math.max(1,Math.abs(s),Math.abs(p))&&Math.abs(a-E)<=d*Math.max(1,Math.abs(a),Math.abs(E))&&Math.abs(o-m)<=d*Math.max(1,Math.abs(o),Math.abs(m))&&Math.abs(u-T)<=d*Math.max(1,Math.abs(u),Math.abs(T))&&Math.abs(h-v)<=d*Math.max(1,Math.abs(h),Math.abs(v))&&Math.abs(c-g)<=d*Math.max(1,Math.abs(c),Math.abs(g))}var jt=Nt,Zt=Ht;function Kt(){var t=new p(16);return p!=Float32Array&&(t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0),t[0]=1,t[5]=1,t[10]=1,t[15]=1,t}function Qt(t){var e=new p(16);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e}function $t(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t}function Jt(t,e,r,n,i,s,a,o,u,h,c,_,f,l,d,E){var m=new p(16);return m[0]=t,m[1]=e,m[2]=r,m[3]=n,m[4]=i,m[5]=s,m[6]=a,m[7]=o,m[8]=u,m[9]=h,m[10]=c,m[11]=_,m[12]=f,m[13]=l,m[14]=d,m[15]=E,m}function te(t,e,r,n,i,s,a,o,u,h,c,_,f,l,d,p,E){return t[0]=e,t[1]=r,t[2]=n,t[3]=i,t[4]=s,t[5]=a,t[6]=o,t[7]=u,t[8]=h,t[9]=c,t[10]=_,t[11]=f,t[12]=l,t[13]=d,t[14]=p,t[15]=E,t}function ee(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function re(t,e){if(t===e){var r=e[1],n=e[2],i=e[3],s=e[6],a=e[7],o=e[11];t[1]=e[4],t[2]=e[8],t[3]=e[12],t[4]=r,t[6]=e[9],t[7]=e[13],t[8]=n,t[9]=s,t[11]=e[14],t[12]=i,t[13]=a,t[14]=o}else t[0]=e[0],t[1]=e[4],t[2]=e[8],t[3]=e[12],t[4]=e[1],t[5]=e[5],t[6]=e[9],t[7]=e[13],t[8]=e[2],t[9]=e[6],t[10]=e[10],t[11]=e[14],t[12]=e[3],t[13]=e[7],t[14]=e[11],t[15]=e[15];return t}function ne(t,e){var r=e[0],n=e[1],i=e[2],s=e[3],a=e[4],o=e[5],u=e[6],h=e[7],c=e[8],_=e[9],f=e[10],l=e[11],d=e[12],p=e[13],E=e[14],m=e[15],T=r*o-n*a,v=r*u-i*a,g=r*h-s*a,R=n*u-i*o,M=n*h-s*o,A=i*h-s*u,x=c*p-_*d,b=c*E-f*d,y=c*m-l*d,I=_*E-f*p,S=_*m-l*p,N=f*m-l*E,L=T*N-v*S+g*I+R*y-M*b+A*x;return L?(L=1/L,t[0]=(o*N-u*S+h*I)*L,t[1]=(i*S-n*N-s*I)*L,t[2]=(p*A-E*M+m*R)*L,t[3]=(f*M-_*A-l*R)*L,t[4]=(u*y-a*N-h*b)*L,t[5]=(r*N-i*y+s*b)*L,t[6]=(E*g-d*A-m*v)*L,t[7]=(c*A-f*g+l*v)*L,t[8]=(a*S-o*y+h*x)*L,t[9]=(n*y-r*S-s*x)*L,t[10]=(d*M-p*g+m*T)*L,t[11]=(_*g-c*M-l*T)*L,t[12]=(o*b-a*I-u*x)*L,t[13]=(r*I-n*b+i*x)*L,t[14]=(p*v-d*R-E*T)*L,t[15]=(c*R-_*v+f*T)*L,t):null}function ie(t,e){var r=e[0],n=e[1],i=e[2],s=e[3],a=e[4],o=e[5],u=e[6],h=e[7],c=e[8],_=e[9],f=e[10],l=e[11],d=e[12],p=e[13],E=e[14],m=e[15];return t[0]=o*(f*m-l*E)-_*(u*m-h*E)+p*(u*l-h*f),t[1]=-(n*(f*m-l*E)-_*(i*m-s*E)+p*(i*l-s*f)),t[2]=n*(u*m-h*E)-o*(i*m-s*E)+p*(i*h-s*u),t[3]=-(n*(u*l-h*f)-o*(i*l-s*f)+_*(i*h-s*u)),t[4]=-(a*(f*m-l*E)-c*(u*m-h*E)+d*(u*l-h*f)),t[5]=r*(f*m-l*E)-c*(i*m-s*E)+d*(i*l-s*f),t[6]=-(r*(u*m-h*E)-a*(i*m-s*E)+d*(i*h-s*u)),t[7]=r*(u*l-h*f)-a*(i*l-s*f)+c*(i*h-s*u),t[8]=a*(_*m-l*p)-c*(o*m-h*p)+d*(o*l-h*_),t[9]=-(r*(_*m-l*p)-c*(n*m-s*p)+d*(n*l-s*_)),t[10]=r*(o*m-h*p)-a*(n*m-s*p)+d*(n*h-s*o),t[11]=-(r*(o*l-h*_)-a*(n*l-s*_)+c*(n*h-s*o)),t[12]=-(a*(_*E-f*p)-c*(o*E-u*p)+d*(o*f-u*_)),t[13]=r*(_*E-f*p)-c*(n*E-i*p)+d*(n*f-i*_),t[14]=-(r*(o*E-u*p)-a*(n*E-i*p)+d*(n*u-i*o)),t[15]=r*(o*f-u*_)-a*(n*f-i*_)+c*(n*u-i*o),t}function se(t){var e=t[0],r=t[1],n=t[2],i=t[3],s=t[4],a=t[5],o=t[6],u=t[7],h=t[8],c=t[9],_=t[10],f=t[11],l=t[12],d=t[13],p=t[14],E=t[15];return(e*a-r*s)*(_*E-f*p)-(e*o-n*s)*(c*E-f*d)+(e*u-i*s)*(c*p-_*d)+(r*o-n*a)*(h*E-f*l)-(r*u-i*a)*(h*p-_*l)+(n*u-i*o)*(h*d-c*l)}function ae(t,e,r){var n=e[0],i=e[1],s=e[2],a=e[3],o=e[4],u=e[5],h=e[6],c=e[7],_=e[8],f=e[9],l=e[10],d=e[11],p=e[12],E=e[13],m=e[14],T=e[15],v=r[0],g=r[1],R=r[2],M=r[3];return t[0]=v*n+g*o+R*_+M*p,t[1]=v*i+g*u+R*f+M*E,t[2]=v*s+g*h+R*l+M*m,t[3]=v*a+g*c+R*d+M*T,v=r[4],g=r[5],R=r[6],M=r[7],t[4]=v*n+g*o+R*_+M*p,t[5]=v*i+g*u+R*f+M*E,t[6]=v*s+g*h+R*l+M*m,t[7]=v*a+g*c+R*d+M*T,v=r[8],g=r[9],R=r[10],M=r[11],t[8]=v*n+g*o+R*_+M*p,t[9]=v*i+g*u+R*f+M*E,t[10]=v*s+g*h+R*l+M*m,t[11]=v*a+g*c+R*d+M*T,v=r[12],g=r[13],R=r[14],M=r[15],t[12]=v*n+g*o+R*_+M*p,t[13]=v*i+g*u+R*f+M*E,t[14]=v*s+g*h+R*l+M*m,t[15]=v*a+g*c+R*d+M*T,t}function oe(t,e,r){var n,i,s,a,o,u,h,c,_,f,l,d,p=r[0],E=r[1],m=r[2];return e===t?(t[12]=e[0]*p+e[4]*E+e[8]*m+e[12],t[13]=e[1]*p+e[5]*E+e[9]*m+e[13],t[14]=e[2]*p+e[6]*E+e[10]*m+e[14],t[15]=e[3]*p+e[7]*E+e[11]*m+e[15]):(n=e[0],i=e[1],s=e[2],a=e[3],o=e[4],u=e[5],h=e[6],c=e[7],_=e[8],f=e[9],l=e[10],d=e[11],t[0]=n,t[1]=i,t[2]=s,t[3]=a,t[4]=o,t[5]=u,t[6]=h,t[7]=c,t[8]=_,t[9]=f,t[10]=l,t[11]=d,t[12]=n*p+o*E+_*m+e[12],t[13]=i*p+u*E+f*m+e[13],t[14]=s*p+h*E+l*m+e[14],t[15]=a*p+c*E+d*m+e[15]),t}function ue(t,e,r){var n=r[0],i=r[1],s=r[2];return t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t[3]=e[3]*n,t[4]=e[4]*i,t[5]=e[5]*i,t[6]=e[6]*i,t[7]=e[7]*i,t[8]=e[8]*s,t[9]=e[9]*s,t[10]=e[10]*s,t[11]=e[11]*s,t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t}function he(t,e,r,n){var i,s,a,o,u,h,c,_,f,l,p,E,m,T,v,g,R,M,A,x,b,y,I,S,N=n[0],L=n[1],w=n[2],F=Math.hypot(N,L,w);return F<d?null:(N*=F=1/F,L*=F,w*=F,i=Math.sin(r),a=1-(s=Math.cos(r)),o=e[0],u=e[1],h=e[2],c=e[3],_=e[4],f=e[5],l=e[6],p=e[7],E=e[8],m=e[9],T=e[10],v=e[11],g=N*N*a+s,R=L*N*a+w*i,M=w*N*a-L*i,A=N*L*a-w*i,x=L*L*a+s,b=w*L*a+N*i,y=N*w*a+L*i,I=L*w*a-N*i,S=w*w*a+s,t[0]=o*g+_*R+E*M,t[1]=u*g+f*R+m*M,t[2]=h*g+l*R+T*M,t[3]=c*g+p*R+v*M,t[4]=o*A+_*x+E*b,t[5]=u*A+f*x+m*b,t[6]=h*A+l*x+T*b,t[7]=c*A+p*x+v*b,t[8]=o*y+_*I+E*S,t[9]=u*y+f*I+m*S,t[10]=h*y+l*I+T*S,t[11]=c*y+p*I+v*S,e!==t&&(t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t)}function ce(t,e,r){var n=Math.sin(r),i=Math.cos(r),s=e[4],a=e[5],o=e[6],u=e[7],h=e[8],c=e[9],_=e[10],f=e[11];return e!==t&&(t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[4]=s*i+h*n,t[5]=a*i+c*n,t[6]=o*i+_*n,t[7]=u*i+f*n,t[8]=h*i-s*n,t[9]=c*i-a*n,t[10]=_*i-o*n,t[11]=f*i-u*n,t}function _e(t,e,r){var n=Math.sin(r),i=Math.cos(r),s=e[0],a=e[1],o=e[2],u=e[3],h=e[8],c=e[9],_=e[10],f=e[11];return e!==t&&(t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[0]=s*i-h*n,t[1]=a*i-c*n,t[2]=o*i-_*n,t[3]=u*i-f*n,t[8]=s*n+h*i,t[9]=a*n+c*i,t[10]=o*n+_*i,t[11]=u*n+f*i,t}function fe(t,e,r){var n=Math.sin(r),i=Math.cos(r),s=e[0],a=e[1],o=e[2],u=e[3],h=e[4],c=e[5],_=e[6],f=e[7];return e!==t&&(t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[0]=s*i+h*n,t[1]=a*i+c*n,t[2]=o*i+_*n,t[3]=u*i+f*n,t[4]=h*i-s*n,t[5]=c*i-a*n,t[6]=_*i-o*n,t[7]=f*i-u*n,t}function le(t,e){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=e[0],t[13]=e[1],t[14]=e[2],t[15]=1,t}function de(t,e){return t[0]=e[0],t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=e[1],t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=e[2],t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function pe(t,e,r){var n,i,s,a=r[0],o=r[1],u=r[2],h=Math.hypot(a,o,u);return h<d?null:(a*=h=1/h,o*=h,u*=h,n=Math.sin(e),s=1-(i=Math.cos(e)),t[0]=a*a*s+i,t[1]=o*a*s+u*n,t[2]=u*a*s-o*n,t[3]=0,t[4]=a*o*s-u*n,t[5]=o*o*s+i,t[6]=u*o*s+a*n,t[7]=0,t[8]=a*u*s+o*n,t[9]=o*u*s-a*n,t[10]=u*u*s+i,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t)}function Ee(t,e){var r=Math.sin(e),n=Math.cos(e);return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=n,t[6]=r,t[7]=0,t[8]=0,t[9]=-r,t[10]=n,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function me(t,e){var r=Math.sin(e),n=Math.cos(e);return t[0]=n,t[1]=0,t[2]=-r,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=r,t[9]=0,t[10]=n,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function Te(t,e){var r=Math.sin(e),n=Math.cos(e);return t[0]=n,t[1]=r,t[2]=0,t[3]=0,t[4]=-r,t[5]=n,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function ve(t,e,r){var n=e[0],i=e[1],s=e[2],a=e[3],o=n+n,u=i+i,h=s+s,c=n*o,_=n*u,f=n*h,l=i*u,d=i*h,p=s*h,E=a*o,m=a*u,T=a*h;return t[0]=1-(l+p),t[1]=_+T,t[2]=f-m,t[3]=0,t[4]=_-T,t[5]=1-(c+p),t[6]=d+E,t[7]=0,t[8]=f+m,t[9]=d-E,t[10]=1-(c+l),t[11]=0,t[12]=r[0],t[13]=r[1],t[14]=r[2],t[15]=1,t}function ge(t,e){var r=new p(3),n=-e[0],i=-e[1],s=-e[2],a=e[3],o=e[4],u=e[5],h=e[6],c=e[7],_=n*n+i*i+s*s+a*a;return _>0?(r[0]=2*(o*a+c*n+u*s-h*i)/_,r[1]=2*(u*a+c*i+h*n-o*s)/_,r[2]=2*(h*a+c*s+o*i-u*n)/_):(r[0]=2*(o*a+c*n+u*s-h*i),r[1]=2*(u*a+c*i+h*n-o*s),r[2]=2*(h*a+c*s+o*i-u*n)),ve(t,e,r),t}function Re(t,e){return t[0]=e[12],t[1]=e[13],t[2]=e[14],t}function Me(t,e){var r=e[0],n=e[1],i=e[2],s=e[4],a=e[5],o=e[6],u=e[8],h=e[9],c=e[10];return t[0]=Math.hypot(r,n,i),t[1]=Math.hypot(s,a,o),t[2]=Math.hypot(u,h,c),t}function Ae(t,e){var r=new p(3);Me(r,e);var n=1/r[0],i=1/r[1],s=1/r[2],a=e[0]*n,o=e[1]*i,u=e[2]*s,h=e[4]*n,c=e[5]*i,_=e[6]*s,f=e[8]*n,l=e[9]*i,d=e[10]*s,E=a+c+d,m=0;return E>0?(m=2*Math.sqrt(E+1),t[3]=.25*m,t[0]=(_-l)/m,t[1]=(f-u)/m,t[2]=(o-h)/m):a>c&&a>d?(m=2*Math.sqrt(1+a-c-d),t[3]=(_-l)/m,t[0]=.25*m,t[1]=(o+h)/m,t[2]=(f+u)/m):c>d?(m=2*Math.sqrt(1+c-a-d),t[3]=(f-u)/m,t[0]=(o+h)/m,t[1]=.25*m,t[2]=(_+l)/m):(m=2*Math.sqrt(1+d-a-c),t[3]=(o-h)/m,t[0]=(f+u)/m,t[1]=(_+l)/m,t[2]=.25*m),t}function xe(t,e,r,n){var i=e[0],s=e[1],a=e[2],o=e[3],u=i+i,h=s+s,c=a+a,_=i*u,f=i*h,l=i*c,d=s*h,p=s*c,E=a*c,m=o*u,T=o*h,v=o*c,g=n[0],R=n[1],M=n[2];return t[0]=(1-(d+E))*g,t[1]=(f+v)*g,t[2]=(l-T)*g,t[3]=0,t[4]=(f-v)*R,t[5]=(1-(_+E))*R,t[6]=(p+m)*R,t[7]=0,t[8]=(l+T)*M,t[9]=(p-m)*M,t[10]=(1-(_+d))*M,t[11]=0,t[12]=r[0],t[13]=r[1],t[14]=r[2],t[15]=1,t}function be(t,e,r,n,i){var s=e[0],a=e[1],o=e[2],u=e[3],h=s+s,c=a+a,_=o+o,f=s*h,l=s*c,d=s*_,p=a*c,E=a*_,m=o*_,T=u*h,v=u*c,g=u*_,R=n[0],M=n[1],A=n[2],x=i[0],b=i[1],y=i[2],I=(1-(p+m))*R,S=(l+g)*R,N=(d-v)*R,L=(l-g)*M,w=(1-(f+m))*M,F=(E+T)*M,C=(d+v)*A,U=(E-T)*A,P=(1-(f+p))*A;return t[0]=I,t[1]=S,t[2]=N,t[3]=0,t[4]=L,t[5]=w,t[6]=F,t[7]=0,t[8]=C,t[9]=U,t[10]=P,t[11]=0,t[12]=r[0]+x-(I*x+L*b+C*y),t[13]=r[1]+b-(S*x+w*b+U*y),t[14]=r[2]+y-(N*x+F*b+P*y),t[15]=1,t}function ye(t,e){var r=e[0],n=e[1],i=e[2],s=e[3],a=r+r,o=n+n,u=i+i,h=r*a,c=n*a,_=n*o,f=i*a,l=i*o,d=i*u,p=s*a,E=s*o,m=s*u;return t[0]=1-_-d,t[1]=c+m,t[2]=f-E,t[3]=0,t[4]=c-m,t[5]=1-h-d,t[6]=l+p,t[7]=0,t[8]=f+E,t[9]=l-p,t[10]=1-h-_,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function Ie(t,e,r,n,i,s,a){var o=1/(r-e),u=1/(i-n),h=1/(s-a);return t[0]=2*s*o,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=2*s*u,t[6]=0,t[7]=0,t[8]=(r+e)*o,t[9]=(i+n)*u,t[10]=(a+s)*h,t[11]=-1,t[12]=0,t[13]=0,t[14]=a*s*2*h,t[15]=0,t}function Se(t,e,r,n,i){var s,a=1/Math.tan(e/2);return t[0]=a/r,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=a,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[11]=-1,t[12]=0,t[13]=0,t[15]=0,null!=i&&i!==1/0?(s=1/(n-i),t[10]=(i+n)*s,t[14]=2*i*n*s):(t[10]=-1,t[14]=-2*n),t}function Ne(t,e,r,n){var i=Math.tan(e.upDegrees*Math.PI/180),s=Math.tan(e.downDegrees*Math.PI/180),a=Math.tan(e.leftDegrees*Math.PI/180),o=Math.tan(e.rightDegrees*Math.PI/180),u=2/(a+o),h=2/(i+s);return t[0]=u,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=h,t[6]=0,t[7]=0,t[8]=-(a-o)*u*.5,t[9]=(i-s)*h*.5,t[10]=n/(r-n),t[11]=-1,t[12]=0,t[13]=0,t[14]=n*r/(r-n),t[15]=0,t}function Le(t,e,r,n,i,s,a){var o=1/(e-r),u=1/(n-i),h=1/(s-a);return t[0]=-2*o,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=-2*u,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=2*h,t[11]=0,t[12]=(e+r)*o,t[13]=(i+n)*u,t[14]=(a+s)*h,t[15]=1,t}function we(t,e,r,n){var i,s,a,o,u,h,c,_,f,l,p=e[0],E=e[1],m=e[2],T=n[0],v=n[1],g=n[2],R=r[0],M=r[1],A=r[2];return Math.abs(p-R)<d&&Math.abs(E-M)<d&&Math.abs(m-A)<d?ee(t):(c=p-R,_=E-M,f=m-A,i=v*(f*=l=1/Math.hypot(c,_,f))-g*(_*=l),s=g*(c*=l)-T*f,a=T*_-v*c,(l=Math.hypot(i,s,a))?(i*=l=1/l,s*=l,a*=l):(i=0,s=0,a=0),o=_*a-f*s,u=f*i-c*a,h=c*s-_*i,(l=Math.hypot(o,u,h))?(o*=l=1/l,u*=l,h*=l):(o=0,u=0,h=0),t[0]=i,t[1]=o,t[2]=c,t[3]=0,t[4]=s,t[5]=u,t[6]=_,t[7]=0,t[8]=a,t[9]=h,t[10]=f,t[11]=0,t[12]=-(i*p+s*E+a*m),t[13]=-(o*p+u*E+h*m),t[14]=-(c*p+_*E+f*m),t[15]=1,t)}function Fe(t,e,r,n){var i=e[0],s=e[1],a=e[2],o=n[0],u=n[1],h=n[2],c=i-r[0],_=s-r[1],f=a-r[2],l=c*c+_*_+f*f;l>0&&(c*=l=1/Math.sqrt(l),_*=l,f*=l);var d=u*f-h*_,p=h*c-o*f,E=o*_-u*c;return(l=d*d+p*p+E*E)>0&&(d*=l=1/Math.sqrt(l),p*=l,E*=l),t[0]=d,t[1]=p,t[2]=E,t[3]=0,t[4]=_*E-f*p,t[5]=f*d-c*E,t[6]=c*p-_*d,t[7]=0,t[8]=c,t[9]=_,t[10]=f,t[11]=0,t[12]=i,t[13]=s,t[14]=a,t[15]=1,t}function Ce(t){return"mat4("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+", "+t[6]+", "+t[7]+", "+t[8]+", "+t[9]+", "+t[10]+", "+t[11]+", "+t[12]+", "+t[13]+", "+t[14]+", "+t[15]+")"}function Ue(t){return Math.hypot(t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7],t[8],t[9],t[10],t[11],t[12],t[13],t[14],t[15])}function Pe(t,e,r){return t[0]=e[0]+r[0],t[1]=e[1]+r[1],t[2]=e[2]+r[2],t[3]=e[3]+r[3],t[4]=e[4]+r[4],t[5]=e[5]+r[5],t[6]=e[6]+r[6],t[7]=e[7]+r[7],t[8]=e[8]+r[8],t[9]=e[9]+r[9],t[10]=e[10]+r[10],t[11]=e[11]+r[11],t[12]=e[12]+r[12],t[13]=e[13]+r[13],t[14]=e[14]+r[14],t[15]=e[15]+r[15],t}function Oe(t,e,r){return t[0]=e[0]-r[0],t[1]=e[1]-r[1],t[2]=e[2]-r[2],t[3]=e[3]-r[3],t[4]=e[4]-r[4],t[5]=e[5]-r[5],t[6]=e[6]-r[6],t[7]=e[7]-r[7],t[8]=e[8]-r[8],t[9]=e[9]-r[9],t[10]=e[10]-r[10],t[11]=e[11]-r[11],t[12]=e[12]-r[12],t[13]=e[13]-r[13],t[14]=e[14]-r[14],t[15]=e[15]-r[15],t}function De(t,e,r){return t[0]=e[0]*r,t[1]=e[1]*r,t[2]=e[2]*r,t[3]=e[3]*r,t[4]=e[4]*r,t[5]=e[5]*r,t[6]=e[6]*r,t[7]=e[7]*r,t[8]=e[8]*r,t[9]=e[9]*r,t[10]=e[10]*r,t[11]=e[11]*r,t[12]=e[12]*r,t[13]=e[13]*r,t[14]=e[14]*r,t[15]=e[15]*r,t}function Be(t,e,r,n){return t[0]=e[0]+r[0]*n,t[1]=e[1]+r[1]*n,t[2]=e[2]+r[2]*n,t[3]=e[3]+r[3]*n,t[4]=e[4]+r[4]*n,t[5]=e[5]+r[5]*n,t[6]=e[6]+r[6]*n,t[7]=e[7]+r[7]*n,t[8]=e[8]+r[8]*n,t[9]=e[9]+r[9]*n,t[10]=e[10]+r[10]*n,t[11]=e[11]+r[11]*n,t[12]=e[12]+r[12]*n,t[13]=e[13]+r[13]*n,t[14]=e[14]+r[14]*n,t[15]=e[15]+r[15]*n,t}function Xe(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]&&t[4]===e[4]&&t[5]===e[5]&&t[6]===e[6]&&t[7]===e[7]&&t[8]===e[8]&&t[9]===e[9]&&t[10]===e[10]&&t[11]===e[11]&&t[12]===e[12]&&t[13]===e[13]&&t[14]===e[14]&&t[15]===e[15]}function Ve(t,e){var r=t[0],n=t[1],i=t[2],s=t[3],a=t[4],o=t[5],u=t[6],h=t[7],c=t[8],_=t[9],f=t[10],l=t[11],p=t[12],E=t[13],m=t[14],T=t[15],v=e[0],g=e[1],R=e[2],M=e[3],A=e[4],x=e[5],b=e[6],y=e[7],I=e[8],S=e[9],N=e[10],L=e[11],w=e[12],F=e[13],C=e[14],U=e[15];return Math.abs(r-v)<=d*Math.max(1,Math.abs(r),Math.abs(v))&&Math.abs(n-g)<=d*Math.max(1,Math.abs(n),Math.abs(g))&&Math.abs(i-R)<=d*Math.max(1,Math.abs(i),Math.abs(R))&&Math.abs(s-M)<=d*Math.max(1,Math.abs(s),Math.abs(M))&&Math.abs(a-A)<=d*Math.max(1,Math.abs(a),Math.abs(A))&&Math.abs(o-x)<=d*Math.max(1,Math.abs(o),Math.abs(x))&&Math.abs(u-b)<=d*Math.max(1,Math.abs(u),Math.abs(b))&&Math.abs(h-y)<=d*Math.max(1,Math.abs(h),Math.abs(y))&&Math.abs(c-I)<=d*Math.max(1,Math.abs(c),Math.abs(I))&&Math.abs(_-S)<=d*Math.max(1,Math.abs(_),Math.abs(S))&&Math.abs(f-N)<=d*Math.max(1,Math.abs(f),Math.abs(N))&&Math.abs(l-L)<=d*Math.max(1,Math.abs(l),Math.abs(L))&&Math.abs(p-w)<=d*Math.max(1,Math.abs(p),Math.abs(w))&&Math.abs(E-F)<=d*Math.max(1,Math.abs(E),Math.abs(F))&&Math.abs(m-C)<=d*Math.max(1,Math.abs(m),Math.abs(C))&&Math.abs(T-U)<=d*Math.max(1,Math.abs(T),Math.abs(U))}var Ge=ae,ke=Oe;function He(){var t=new p(3);return p!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0),t}function Ye(t){var e=new p(3);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e}function We(t){var e=t[0],r=t[1],n=t[2];return Math.hypot(e,r,n)}function ze(t,e,r){var n=new p(3);return n[0]=t,n[1]=e,n[2]=r,n}function qe(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t}function je(t,e,r,n){return t[0]=e,t[1]=r,t[2]=n,t}function Ze(t,e,r){return t[0]=e[0]+r[0],t[1]=e[1]+r[1],t[2]=e[2]+r[2],t}function Ke(t,e,r){return t[0]=e[0]-r[0],t[1]=e[1]-r[1],t[2]=e[2]-r[2],t}function Qe(t,e,r){return t[0]=e[0]*r[0],t[1]=e[1]*r[1],t[2]=e[2]*r[2],t}function $e(t,e,r){return t[0]=e[0]/r[0],t[1]=e[1]/r[1],t[2]=e[2]/r[2],t}function Je(t,e){return t[0]=Math.ceil(e[0]),t[1]=Math.ceil(e[1]),t[2]=Math.ceil(e[2]),t}function tr(t,e){return t[0]=Math.floor(e[0]),t[1]=Math.floor(e[1]),t[2]=Math.floor(e[2]),t}function er(t,e,r){return t[0]=Math.min(e[0],r[0]),t[1]=Math.min(e[1],r[1]),t[2]=Math.min(e[2],r[2]),t}function rr(t,e,r){return t[0]=Math.max(e[0],r[0]),t[1]=Math.max(e[1],r[1]),t[2]=Math.max(e[2],r[2]),t}function nr(t,e){return t[0]=Math.round(e[0]),t[1]=Math.round(e[1]),t[2]=Math.round(e[2]),t}function ir(t,e,r){return t[0]=e[0]*r,t[1]=e[1]*r,t[2]=e[2]*r,t}function sr(t,e,r,n){return t[0]=e[0]+r[0]*n,t[1]=e[1]+r[1]*n,t[2]=e[2]+r[2]*n,t}function ar(t,e){var r=e[0]-t[0],n=e[1]-t[1],i=e[2]-t[2];return Math.hypot(r,n,i)}function or(t,e){var r=e[0]-t[0],n=e[1]-t[1],i=e[2]-t[2];return r*r+n*n+i*i}function ur(t){var e=t[0],r=t[1],n=t[2];return e*e+r*r+n*n}function hr(t,e){return t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t}function cr(t,e){return t[0]=1/e[0],t[1]=1/e[1],t[2]=1/e[2],t}function _r(t,e){var r=e[0],n=e[1],i=e[2],s=r*r+n*n+i*i;return s>0&&(s=1/Math.sqrt(s)),t[0]=e[0]*s,t[1]=e[1]*s,t[2]=e[2]*s,t}function fr(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]}function lr(t,e,r){var n=e[0],i=e[1],s=e[2],a=r[0],o=r[1],u=r[2];return t[0]=i*u-s*o,t[1]=s*a-n*u,t[2]=n*o-i*a,t}function dr(t,e,r,n){var i=e[0],s=e[1],a=e[2];return t[0]=i+n*(r[0]-i),t[1]=s+n*(r[1]-s),t[2]=a+n*(r[2]-a),t}function pr(t,e,r,n,i,s){var a=s*s,o=a*(2*s-3)+1,u=a*(s-2)+s,h=a*(s-1),c=a*(3-2*s);return t[0]=e[0]*o+r[0]*u+n[0]*h+i[0]*c,t[1]=e[1]*o+r[1]*u+n[1]*h+i[1]*c,t[2]=e[2]*o+r[2]*u+n[2]*h+i[2]*c,t}function Er(t,e,r,n,i,s){var a=1-s,o=a*a,u=s*s,h=o*a,c=3*s*o,_=3*u*a,f=u*s;return t[0]=e[0]*h+r[0]*c+n[0]*_+i[0]*f,t[1]=e[1]*h+r[1]*c+n[1]*_+i[1]*f,t[2]=e[2]*h+r[2]*c+n[2]*_+i[2]*f,t}function mr(t,e){e=e||1;var r=2*E()*Math.PI,n=2*E()-1,i=Math.sqrt(1-n*n)*e;return t[0]=Math.cos(r)*i,t[1]=Math.sin(r)*i,t[2]=n*e,t}function Tr(t,e,r){var n=e[0],i=e[1],s=e[2],a=r[3]*n+r[7]*i+r[11]*s+r[15];return a=a||1,t[0]=(r[0]*n+r[4]*i+r[8]*s+r[12])/a,t[1]=(r[1]*n+r[5]*i+r[9]*s+r[13])/a,t[2]=(r[2]*n+r[6]*i+r[10]*s+r[14])/a,t}function vr(t,e,r){var n=e[0],i=e[1],s=e[2];return t[0]=n*r[0]+i*r[3]+s*r[6],t[1]=n*r[1]+i*r[4]+s*r[7],t[2]=n*r[2]+i*r[5]+s*r[8],t}function gr(t,e,r){var n=r[0],i=r[1],s=r[2],a=r[3],o=e[0],u=e[1],h=e[2],c=i*h-s*u,_=s*o-n*h,f=n*u-i*o,l=i*f-s*_,d=s*c-n*f,p=n*_-i*c,E=2*a;return c*=E,_*=E,f*=E,l*=2,d*=2,p*=2,t[0]=o+c+l,t[1]=u+_+d,t[2]=h+f+p,t}function Rr(t,e,r,n){var i=[],s=[];return i[0]=e[0]-r[0],i[1]=e[1]-r[1],i[2]=e[2]-r[2],s[0]=i[0],s[1]=i[1]*Math.cos(n)-i[2]*Math.sin(n),s[2]=i[1]*Math.sin(n)+i[2]*Math.cos(n),t[0]=s[0]+r[0],t[1]=s[1]+r[1],t[2]=s[2]+r[2],t}function Mr(t,e,r,n){var i=[],s=[];return i[0]=e[0]-r[0],i[1]=e[1]-r[1],i[2]=e[2]-r[2],s[0]=i[2]*Math.sin(n)+i[0]*Math.cos(n),s[1]=i[1],s[2]=i[2]*Math.cos(n)-i[0]*Math.sin(n),t[0]=s[0]+r[0],t[1]=s[1]+r[1],t[2]=s[2]+r[2],t}function Ar(t,e,r,n){var i=[],s=[];return i[0]=e[0]-r[0],i[1]=e[1]-r[1],i[2]=e[2]-r[2],s[0]=i[0]*Math.cos(n)-i[1]*Math.sin(n),s[1]=i[0]*Math.sin(n)+i[1]*Math.cos(n),s[2]=i[2],t[0]=s[0]+r[0],t[1]=s[1]+r[1],t[2]=s[2]+r[2],t}function xr(t,e){var r=t[0],n=t[1],i=t[2],s=e[0],a=e[1],o=e[2],u=Math.sqrt(r*r+n*n+i*i)*Math.sqrt(s*s+a*a+o*o),h=u&&fr(t,e)/u;return Math.acos(Math.min(Math.max(h,-1),1))}function br(t){return t[0]=0,t[1]=0,t[2]=0,t}function yr(t){return"vec3("+t[0]+", "+t[1]+", "+t[2]+")"}function Ir(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]}function Sr(t,e){var r=t[0],n=t[1],i=t[2],s=e[0],a=e[1],o=e[2];return Math.abs(r-s)<=d*Math.max(1,Math.abs(r),Math.abs(s))&&Math.abs(n-a)<=d*Math.max(1,Math.abs(n),Math.abs(a))&&Math.abs(i-o)<=d*Math.max(1,Math.abs(i),Math.abs(o))}var Nr,Lr=Ke,wr=Qe,Fr=$e,Cr=ar,Ur=or,Pr=We,Or=ur,Dr=(Nr=He(),function(t,e,r,n,i,s){var a,o;for(e||(e=3),r||(r=0),o=n?Math.min(n*e+r,t.length):t.length,a=r;a<o;a+=e)Nr[0]=t[a],Nr[1]=t[a+1],Nr[2]=t[a+2],i(Nr,Nr,s),t[a]=Nr[0],t[a+1]=Nr[1],t[a+2]=Nr[2];return t});function Br(){var t=new p(4);return p!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0,t[3]=0),t}function Xr(t){var e=new p(4);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e}function Vr(t,e,r,n){var i=new p(4);return i[0]=t,i[1]=e,i[2]=r,i[3]=n,i}function Gr(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t}function kr(t,e,r,n,i){return t[0]=e,t[1]=r,t[2]=n,t[3]=i,t}function Hr(t,e,r){return t[0]=e[0]+r[0],t[1]=e[1]+r[1],t[2]=e[2]+r[2],t[3]=e[3]+r[3],t}function Yr(t,e,r){return t[0]=e[0]-r[0],t[1]=e[1]-r[1],t[2]=e[2]-r[2],t[3]=e[3]-r[3],t}function Wr(t,e,r){return t[0]=e[0]*r[0],t[1]=e[1]*r[1],t[2]=e[2]*r[2],t[3]=e[3]*r[3],t}function zr(t,e,r){return t[0]=e[0]/r[0],t[1]=e[1]/r[1],t[2]=e[2]/r[2],t[3]=e[3]/r[3],t}function qr(t,e){return t[0]=Math.ceil(e[0]),t[1]=Math.ceil(e[1]),t[2]=Math.ceil(e[2]),t[3]=Math.ceil(e[3]),t}function jr(t,e){return t[0]=Math.floor(e[0]),t[1]=Math.floor(e[1]),t[2]=Math.floor(e[2]),t[3]=Math.floor(e[3]),t}function Zr(t,e,r){return t[0]=Math.min(e[0],r[0]),t[1]=Math.min(e[1],r[1]),t[2]=Math.min(e[2],r[2]),t[3]=Math.min(e[3],r[3]),t}function Kr(t,e,r){return t[0]=Math.max(e[0],r[0]),t[1]=Math.max(e[1],r[1]),t[2]=Math.max(e[2],r[2]),t[3]=Math.max(e[3],r[3]),t}function Qr(t,e){return t[0]=Math.round(e[0]),t[1]=Math.round(e[1]),t[2]=Math.round(e[2]),t[3]=Math.round(e[3]),t}function $r(t,e,r){return t[0]=e[0]*r,t[1]=e[1]*r,t[2]=e[2]*r,t[3]=e[3]*r,t}function Jr(t,e,r,n){return t[0]=e[0]+r[0]*n,t[1]=e[1]+r[1]*n,t[2]=e[2]+r[2]*n,t[3]=e[3]+r[3]*n,t}function tn(t,e){var r=e[0]-t[0],n=e[1]-t[1],i=e[2]-t[2],s=e[3]-t[3];return Math.hypot(r,n,i,s)}function en(t,e){var r=e[0]-t[0],n=e[1]-t[1],i=e[2]-t[2],s=e[3]-t[3];return r*r+n*n+i*i+s*s}function rn(t){var e=t[0],r=t[1],n=t[2],i=t[3];return Math.hypot(e,r,n,i)}function nn(t){var e=t[0],r=t[1],n=t[2],i=t[3];return e*e+r*r+n*n+i*i}function sn(t,e){return t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t[3]=-e[3],t}function an(t,e){return t[0]=1/e[0],t[1]=1/e[1],t[2]=1/e[2],t[3]=1/e[3],t}function on(t,e){var r=e[0],n=e[1],i=e[2],s=e[3],a=r*r+n*n+i*i+s*s;return a>0&&(a=1/Math.sqrt(a)),t[0]=r*a,t[1]=n*a,t[2]=i*a,t[3]=s*a,t}function un(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]+t[3]*e[3]}function hn(t,e,r,n){var i=r[0]*n[1]-r[1]*n[0],s=r[0]*n[2]-r[2]*n[0],a=r[0]*n[3]-r[3]*n[0],o=r[1]*n[2]-r[2]*n[1],u=r[1]*n[3]-r[3]*n[1],h=r[2]*n[3]-r[3]*n[2],c=e[0],_=e[1],f=e[2],l=e[3];return t[0]=_*h-f*u+l*o,t[1]=-c*h+f*a-l*s,t[2]=c*u-_*a+l*i,t[3]=-c*o+_*s-f*i,t}function cn(t,e,r,n){var i=e[0],s=e[1],a=e[2],o=e[3];return t[0]=i+n*(r[0]-i),t[1]=s+n*(r[1]-s),t[2]=a+n*(r[2]-a),t[3]=o+n*(r[3]-o),t}function _n(t,e){var r,n,i,s,a,o;e=e||1;do{a=(r=2*E()-1)*r+(n=2*E()-1)*n}while(a>=1);do{o=(i=2*E()-1)*i+(s=2*E()-1)*s}while(o>=1);var u=Math.sqrt((1-a)/o);return t[0]=e*r,t[1]=e*n,t[2]=e*i*u,t[3]=e*s*u,t}function fn(t,e,r){var n=e[0],i=e[1],s=e[2],a=e[3];return t[0]=r[0]*n+r[4]*i+r[8]*s+r[12]*a,t[1]=r[1]*n+r[5]*i+r[9]*s+r[13]*a,t[2]=r[2]*n+r[6]*i+r[10]*s+r[14]*a,t[3]=r[3]*n+r[7]*i+r[11]*s+r[15]*a,t}function ln(t,e,r){var n=e[0],i=e[1],s=e[2],a=r[0],o=r[1],u=r[2],h=r[3],c=h*n+o*s-u*i,_=h*i+u*n-a*s,f=h*s+a*i-o*n,l=-a*n-o*i-u*s;return t[0]=c*h+l*-a+_*-u-f*-o,t[1]=_*h+l*-o+f*-a-c*-u,t[2]=f*h+l*-u+c*-o-_*-a,t[3]=e[3],t}function dn(t){return t[0]=0,t[1]=0,t[2]=0,t[3]=0,t}function pn(t){return"vec4("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+")"}function En(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]}function mn(t,e){var r=t[0],n=t[1],i=t[2],s=t[3],a=e[0],o=e[1],u=e[2],h=e[3];return Math.abs(r-a)<=d*Math.max(1,Math.abs(r),Math.abs(a))&&Math.abs(n-o)<=d*Math.max(1,Math.abs(n),Math.abs(o))&&Math.abs(i-u)<=d*Math.max(1,Math.abs(i),Math.abs(u))&&Math.abs(s-h)<=d*Math.max(1,Math.abs(s),Math.abs(h))}var Tn=Yr,vn=Wr,gn=zr,Rn=tn,Mn=en,An=rn,xn=nn,bn=function(){var t=Br();return function(e,r,n,i,s,a){var o,u;for(r||(r=4),n||(n=0),u=i?Math.min(i*r+n,e.length):e.length,o=n;o<u;o+=r)t[0]=e[o],t[1]=e[o+1],t[2]=e[o+2],t[3]=e[o+3],s(t,t,a),e[o]=t[0],e[o+1]=t[1],e[o+2]=t[2],e[o+3]=t[3];return e}}();function yn(){var t=new p(4);return p!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0),t[3]=1,t}function In(t){return t[0]=0,t[1]=0,t[2]=0,t[3]=1,t}function Sn(t,e,r){r*=.5;var n=Math.sin(r);return t[0]=n*e[0],t[1]=n*e[1],t[2]=n*e[2],t[3]=Math.cos(r),t}function Nn(t,e){var r=2*Math.acos(e[3]),n=Math.sin(r/2);return n>d?(t[0]=e[0]/n,t[1]=e[1]/n,t[2]=e[2]/n):(t[0]=1,t[1]=0,t[2]=0),r}function Ln(t,e){var r=si(t,e);return Math.acos(2*r*r-1)}function wn(t,e,r){var n=e[0],i=e[1],s=e[2],a=e[3],o=r[0],u=r[1],h=r[2],c=r[3];return t[0]=n*c+a*o+i*h-s*u,t[1]=i*c+a*u+s*o-n*h,t[2]=s*c+a*h+n*u-i*o,t[3]=a*c-n*o-i*u-s*h,t}function Fn(t,e,r){r*=.5;var n=e[0],i=e[1],s=e[2],a=e[3],o=Math.sin(r),u=Math.cos(r);return t[0]=n*u+a*o,t[1]=i*u+s*o,t[2]=s*u-i*o,t[3]=a*u-n*o,t}function Cn(t,e,r){r*=.5;var n=e[0],i=e[1],s=e[2],a=e[3],o=Math.sin(r),u=Math.cos(r);return t[0]=n*u-s*o,t[1]=i*u+a*o,t[2]=s*u+n*o,t[3]=a*u-i*o,t}function Un(t,e,r){r*=.5;var n=e[0],i=e[1],s=e[2],a=e[3],o=Math.sin(r),u=Math.cos(r);return t[0]=n*u+i*o,t[1]=i*u-n*o,t[2]=s*u+a*o,t[3]=a*u-s*o,t}function Pn(t,e){var r=e[0],n=e[1],i=e[2];return t[0]=r,t[1]=n,t[2]=i,t[3]=Math.sqrt(Math.abs(1-r*r-n*n-i*i)),t}function On(t,e){var r=e[0],n=e[1],i=e[2],s=e[3],a=Math.sqrt(r*r+n*n+i*i),o=Math.exp(s),u=a>0?o*Math.sin(a)/a:0;return t[0]=r*u,t[1]=n*u,t[2]=i*u,t[3]=o*Math.cos(a),t}function Dn(t,e){var r=e[0],n=e[1],i=e[2],s=e[3],a=Math.sqrt(r*r+n*n+i*i),o=a>0?Math.atan2(a,s)/a:0;return t[0]=r*o,t[1]=n*o,t[2]=i*o,t[3]=.5*Math.log(r*r+n*n+i*i+s*s),t}function Bn(t,e,r){return Dn(t,e),ii(t,t,r),On(t,t),t}function Xn(t,e,r,n){var i,s,a,o,u,h=e[0],c=e[1],_=e[2],f=e[3],l=r[0],p=r[1],E=r[2],m=r[3];return(s=h*l+c*p+_*E+f*m)<0&&(s=-s,l=-l,p=-p,E=-E,m=-m),1-s>d?(i=Math.acos(s),a=Math.sin(i),o=Math.sin((1-n)*i)/a,u=Math.sin(n*i)/a):(o=1-n,u=n),t[0]=o*h+u*l,t[1]=o*c+u*p,t[2]=o*_+u*E,t[3]=o*f+u*m,t}function Vn(t){var e=E(),r=E(),n=E(),i=Math.sqrt(1-e),s=Math.sqrt(e);return t[0]=i*Math.sin(2*Math.PI*r),t[1]=i*Math.cos(2*Math.PI*r),t[2]=s*Math.sin(2*Math.PI*n),t[3]=s*Math.cos(2*Math.PI*n),t}function Gn(t,e){var r=e[0],n=e[1],i=e[2],s=e[3],a=r*r+n*n+i*i+s*s,o=a?1/a:0;return t[0]=-r*o,t[1]=-n*o,t[2]=-i*o,t[3]=s*o,t}function kn(t,e){return t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t[3]=e[3],t}function Hn(t,e){var r,n=e[0]+e[4]+e[8];if(n>0)r=Math.sqrt(n+1),t[3]=.5*r,r=.5/r,t[0]=(e[5]-e[7])*r,t[1]=(e[6]-e[2])*r,t[2]=(e[1]-e[3])*r;else{var i=0;e[4]>e[0]&&(i=1),e[8]>e[3*i+i]&&(i=2);var s=(i+1)%3,a=(i+2)%3;r=Math.sqrt(e[3*i+i]-e[3*s+s]-e[3*a+a]+1),t[i]=.5*r,r=.5/r,t[3]=(e[3*s+a]-e[3*a+s])*r,t[s]=(e[3*s+i]+e[3*i+s])*r,t[a]=(e[3*a+i]+e[3*i+a])*r}return t}function Yn(t,e,r,n){var i=.5*Math.PI/180;e*=i,r*=i,n*=i;var s=Math.sin(e),a=Math.cos(e),o=Math.sin(r),u=Math.cos(r),h=Math.sin(n),c=Math.cos(n);return t[0]=s*u*c-a*o*h,t[1]=a*o*c+s*u*h,t[2]=a*u*h-s*o*c,t[3]=a*u*c+s*o*h,t}function Wn(t){return"quat("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+")"}var zn,qn,jn,Zn,Kn,Qn,$n=Xr,Jn=Vr,ti=Gr,ei=kr,ri=Hr,ni=wn,ii=$r,si=un,ai=cn,oi=rn,ui=oi,hi=nn,ci=hi,_i=on,fi=En,li=mn,di=(zn=He(),qn=ze(1,0,0),jn=ze(0,1,0),function(t,e,r){var n=fr(e,r);return n<-.999999?(lr(zn,qn,e),Pr(zn)<1e-6&&lr(zn,jn,e),_r(zn,zn),Sn(t,zn,Math.PI),t):n>.999999?(t[0]=0,t[1]=0,t[2]=0,t[3]=1,t):(lr(zn,e,r),t[0]=zn[0],t[1]=zn[1],t[2]=zn[2],t[3]=1+n,_i(t,t))}),pi=(Zn=yn(),Kn=yn(),function(t,e,r,n,i,s){return Xn(Zn,e,i,s),Xn(Kn,r,n,s),Xn(t,Zn,Kn,2*s*(1-s)),t}),Ei=(Qn=Tt(),function(t,e,r,n){return Qn[0]=r[0],Qn[3]=r[1],Qn[6]=r[2],Qn[1]=n[0],Qn[4]=n[1],Qn[7]=n[2],Qn[2]=-e[0],Qn[5]=-e[1],Qn[8]=-e[2],_i(t,Hn(t,Qn))});function mi(){var t=new p(8);return p!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0,t[4]=0,t[5]=0,t[6]=0,t[7]=0),t[3]=1,t}function Ti(t){var e=new p(8);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e}function vi(t,e,r,n,i,s,a,o){var u=new p(8);return u[0]=t,u[1]=e,u[2]=r,u[3]=n,u[4]=i,u[5]=s,u[6]=a,u[7]=o,u}function gi(t,e,r,n,i,s,a){var o=new p(8);o[0]=t,o[1]=e,o[2]=r,o[3]=n;var u=.5*i,h=.5*s,c=.5*a;return o[4]=u*n+h*r-c*e,o[5]=h*n+c*t-u*r,o[6]=c*n+u*e-h*t,o[7]=-u*t-h*e-c*r,o}function Ri(t,e,r){var n=.5*r[0],i=.5*r[1],s=.5*r[2],a=e[0],o=e[1],u=e[2],h=e[3];return t[0]=a,t[1]=o,t[2]=u,t[3]=h,t[4]=n*h+i*u-s*o,t[5]=i*h+s*a-n*u,t[6]=s*h+n*o-i*a,t[7]=-n*a-i*o-s*u,t}function Mi(t,e){return t[0]=0,t[1]=0,t[2]=0,t[3]=1,t[4]=.5*e[0],t[5]=.5*e[1],t[6]=.5*e[2],t[7]=0,t}function Ai(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=0,t[5]=0,t[6]=0,t[7]=0,t}function xi(t,e){var r=yn();Ae(r,e);var n=new p(3);return Re(n,e),Ri(t,r,n),t}function bi(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t}function yi(t){return t[0]=0,t[1]=0,t[2]=0,t[3]=1,t[4]=0,t[5]=0,t[6]=0,t[7]=0,t}function Ii(t,e,r,n,i,s,a,o,u){return t[0]=e,t[1]=r,t[2]=n,t[3]=i,t[4]=s,t[5]=a,t[6]=o,t[7]=u,t}var Si=ti;function Ni(t,e){return t[0]=e[4],t[1]=e[5],t[2]=e[6],t[3]=e[7],t}var Li=ti;function wi(t,e){return t[4]=e[0],t[5]=e[1],t[6]=e[2],t[7]=e[3],t}function Fi(t,e){var r=e[4],n=e[5],i=e[6],s=e[7],a=-e[0],o=-e[1],u=-e[2],h=e[3];return t[0]=2*(r*h+s*a+n*u-i*o),t[1]=2*(n*h+s*o+i*a-r*u),t[2]=2*(i*h+s*u+r*o-n*a),t}function Ci(t,e,r){var n=e[0],i=e[1],s=e[2],a=e[3],o=.5*r[0],u=.5*r[1],h=.5*r[2],c=e[4],_=e[5],f=e[6],l=e[7];return t[0]=n,t[1]=i,t[2]=s,t[3]=a,t[4]=a*o+i*h-s*u+c,t[5]=a*u+s*o-n*h+_,t[6]=a*h+n*u-i*o+f,t[7]=-n*o-i*u-s*h+l,t}function Ui(t,e,r){var n=-e[0],i=-e[1],s=-e[2],a=e[3],o=e[4],u=e[5],h=e[6],c=e[7],_=o*a+c*n+u*s-h*i,f=u*a+c*i+h*n-o*s,l=h*a+c*s+o*i-u*n,d=c*a-o*n-u*i-h*s;return Fn(t,e,r),n=t[0],i=t[1],s=t[2],a=t[3],t[4]=_*a+d*n+f*s-l*i,t[5]=f*a+d*i+l*n-_*s,t[6]=l*a+d*s+_*i-f*n,t[7]=d*a-_*n-f*i-l*s,t}function Pi(t,e,r){var n=-e[0],i=-e[1],s=-e[2],a=e[3],o=e[4],u=e[5],h=e[6],c=e[7],_=o*a+c*n+u*s-h*i,f=u*a+c*i+h*n-o*s,l=h*a+c*s+o*i-u*n,d=c*a-o*n-u*i-h*s;return Cn(t,e,r),n=t[0],i=t[1],s=t[2],a=t[3],t[4]=_*a+d*n+f*s-l*i,t[5]=f*a+d*i+l*n-_*s,t[6]=l*a+d*s+_*i-f*n,t[7]=d*a-_*n-f*i-l*s,t}function Oi(t,e,r){var n=-e[0],i=-e[1],s=-e[2],a=e[3],o=e[4],u=e[5],h=e[6],c=e[7],_=o*a+c*n+u*s-h*i,f=u*a+c*i+h*n-o*s,l=h*a+c*s+o*i-u*n,d=c*a-o*n-u*i-h*s;return Un(t,e,r),n=t[0],i=t[1],s=t[2],a=t[3],t[4]=_*a+d*n+f*s-l*i,t[5]=f*a+d*i+l*n-_*s,t[6]=l*a+d*s+_*i-f*n,t[7]=d*a-_*n-f*i-l*s,t}function Di(t,e,r){var n=r[0],i=r[1],s=r[2],a=r[3],o=e[0],u=e[1],h=e[2],c=e[3];return t[0]=o*a+c*n+u*s-h*i,t[1]=u*a+c*i+h*n-o*s,t[2]=h*a+c*s+o*i-u*n,t[3]=c*a-o*n-u*i-h*s,o=e[4],u=e[5],h=e[6],c=e[7],t[4]=o*a+c*n+u*s-h*i,t[5]=u*a+c*i+h*n-o*s,t[6]=h*a+c*s+o*i-u*n,t[7]=c*a-o*n-u*i-h*s,t}function Bi(t,e,r){var n=e[0],i=e[1],s=e[2],a=e[3],o=r[0],u=r[1],h=r[2],c=r[3];return t[0]=n*c+a*o+i*h-s*u,t[1]=i*c+a*u+s*o-n*h,t[2]=s*c+a*h+n*u-i*o,t[3]=a*c-n*o-i*u-s*h,o=r[4],u=r[5],h=r[6],c=r[7],t[4]=n*c+a*o+i*h-s*u,t[5]=i*c+a*u+s*o-n*h,t[6]=s*c+a*h+n*u-i*o,t[7]=a*c-n*o-i*u-s*h,t}function Xi(t,e,r,n){if(Math.abs(n)<d)return bi(t,e);var i=Math.hypot(r[0],r[1],r[2]);n*=.5;var s=Math.sin(n),a=s*r[0]/i,o=s*r[1]/i,u=s*r[2]/i,h=Math.cos(n),c=e[0],_=e[1],f=e[2],l=e[3];t[0]=c*h+l*a+_*u-f*o,t[1]=_*h+l*o+f*a-c*u,t[2]=f*h+l*u+c*o-_*a,t[3]=l*h-c*a-_*o-f*u;var p=e[4],E=e[5],m=e[6],T=e[7];return t[4]=p*h+T*a+E*u-m*o,t[5]=E*h+T*o+m*a-p*u,t[6]=m*h+T*u+p*o-E*a,t[7]=T*h-p*a-E*o-m*u,t}function Vi(t,e,r){return t[0]=e[0]+r[0],t[1]=e[1]+r[1],t[2]=e[2]+r[2],t[3]=e[3]+r[3],t[4]=e[4]+r[4],t[5]=e[5]+r[5],t[6]=e[6]+r[6],t[7]=e[7]+r[7],t}function Gi(t,e,r){var n=e[0],i=e[1],s=e[2],a=e[3],o=r[4],u=r[5],h=r[6],c=r[7],_=e[4],f=e[5],l=e[6],d=e[7],p=r[0],E=r[1],m=r[2],T=r[3];return t[0]=n*T+a*p+i*m-s*E,t[1]=i*T+a*E+s*p-n*m,t[2]=s*T+a*m+n*E-i*p,t[3]=a*T-n*p-i*E-s*m,t[4]=n*c+a*o+i*h-s*u+_*T+d*p+f*m-l*E,t[5]=i*c+a*u+s*o-n*h+f*T+d*E+l*p-_*m,t[6]=s*c+a*h+n*u-i*o+l*T+d*m+_*E-f*p,t[7]=a*c-n*o-i*u-s*h+d*T-_*p-f*E-l*m,t}var ki=Gi;function Hi(t,e,r){return t[0]=e[0]*r,t[1]=e[1]*r,t[2]=e[2]*r,t[3]=e[3]*r,t[4]=e[4]*r,t[5]=e[5]*r,t[6]=e[6]*r,t[7]=e[7]*r,t}var Yi=si;function Wi(t,e,r,n){var i=1-n;return Yi(e,r)<0&&(n=-n),t[0]=e[0]*i+r[0]*n,t[1]=e[1]*i+r[1]*n,t[2]=e[2]*i+r[2]*n,t[3]=e[3]*i+r[3]*n,t[4]=e[4]*i+r[4]*n,t[5]=e[5]*i+r[5]*n,t[6]=e[6]*i+r[6]*n,t[7]=e[7]*i+r[7]*n,t}function zi(t,e){var r=Ki(e);return t[0]=-e[0]/r,t[1]=-e[1]/r,t[2]=-e[2]/r,t[3]=e[3]/r,t[4]=-e[4]/r,t[5]=-e[5]/r,t[6]=-e[6]/r,t[7]=e[7]/r,t}function qi(t,e){return t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t[3]=e[3],t[4]=-e[4],t[5]=-e[5],t[6]=-e[6],t[7]=e[7],t}var ji=oi,Zi=ji,Ki=hi,Qi=Ki;function $i(t,e){var r=Ki(e);if(r>0){r=Math.sqrt(r);var n=e[0]/r,i=e[1]/r,s=e[2]/r,a=e[3]/r,o=e[4],u=e[5],h=e[6],c=e[7],_=n*o+i*u+s*h+a*c;t[0]=n,t[1]=i,t[2]=s,t[3]=a,t[4]=(o-n*_)/r,t[5]=(u-i*_)/r,t[6]=(h-s*_)/r,t[7]=(c-a*_)/r}return t}function Ji(t){return"quat2("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+", "+t[6]+", "+t[7]+")"}function ts(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]&&t[4]===e[4]&&t[5]===e[5]&&t[6]===e[6]&&t[7]===e[7]}function es(t,e){var r=t[0],n=t[1],i=t[2],s=t[3],a=t[4],o=t[5],u=t[6],h=t[7],c=e[0],_=e[1],f=e[2],l=e[3],p=e[4],E=e[5],m=e[6],T=e[7];return Math.abs(r-c)<=d*Math.max(1,Math.abs(r),Math.abs(c))&&Math.abs(n-_)<=d*Math.max(1,Math.abs(n),Math.abs(_))&&Math.abs(i-f)<=d*Math.max(1,Math.abs(i),Math.abs(f))&&Math.abs(s-l)<=d*Math.max(1,Math.abs(s),Math.abs(l))&&Math.abs(a-p)<=d*Math.max(1,Math.abs(a),Math.abs(p))&&Math.abs(o-E)<=d*Math.max(1,Math.abs(o),Math.abs(E))&&Math.abs(u-m)<=d*Math.max(1,Math.abs(u),Math.abs(m))&&Math.abs(h-T)<=d*Math.max(1,Math.abs(h),Math.abs(T))}function rs(){var t=new p(2);return p!=Float32Array&&(t[0]=0,t[1]=0),t}function ns(t){var e=new p(2);return e[0]=t[0],e[1]=t[1],e}function is(t,e){var r=new p(2);return r[0]=t,r[1]=e,r}function ss(t,e){return t[0]=e[0],t[1]=e[1],t}function as(t,e,r){return t[0]=e,t[1]=r,t}function os(t,e,r){return t[0]=e[0]+r[0],t[1]=e[1]+r[1],t}function us(t,e,r){return t[0]=e[0]-r[0],t[1]=e[1]-r[1],t}function hs(t,e,r){return t[0]=e[0]*r[0],t[1]=e[1]*r[1],t}function cs(t,e,r){return t[0]=e[0]/r[0],t[1]=e[1]/r[1],t}function _s(t,e){return t[0]=Math.ceil(e[0]),t[1]=Math.ceil(e[1]),t}function fs(t,e){return t[0]=Math.floor(e[0]),t[1]=Math.floor(e[1]),t}function ls(t,e,r){return t[0]=Math.min(e[0],r[0]),t[1]=Math.min(e[1],r[1]),t}function ds(t,e,r){return t[0]=Math.max(e[0],r[0]),t[1]=Math.max(e[1],r[1]),t}function ps(t,e){return t[0]=Math.round(e[0]),t[1]=Math.round(e[1]),t}function Es(t,e,r){return t[0]=e[0]*r,t[1]=e[1]*r,t}function ms(t,e,r,n){return t[0]=e[0]+r[0]*n,t[1]=e[1]+r[1]*n,t}function Ts(t,e){var r=e[0]-t[0],n=e[1]-t[1];return Math.hypot(r,n)}function vs(t,e){var r=e[0]-t[0],n=e[1]-t[1];return r*r+n*n}function gs(t){var e=t[0],r=t[1];return Math.hypot(e,r)}function Rs(t){var e=t[0],r=t[1];return e*e+r*r}function Ms(t,e){return t[0]=-e[0],t[1]=-e[1],t}function As(t,e){return t[0]=1/e[0],t[1]=1/e[1],t}function xs(t,e){var r=e[0],n=e[1],i=r*r+n*n;return i>0&&(i=1/Math.sqrt(i)),t[0]=e[0]*i,t[1]=e[1]*i,t}function bs(t,e){return t[0]*e[0]+t[1]*e[1]}function ys(t,e,r){var n=e[0]*r[1]-e[1]*r[0];return t[0]=t[1]=0,t[2]=n,t}function Is(t,e,r,n){var i=e[0],s=e[1];return t[0]=i+n*(r[0]-i),t[1]=s+n*(r[1]-s),t}function Ss(t,e){e=e||1;var r=2*E()*Math.PI;return t[0]=Math.cos(r)*e,t[1]=Math.sin(r)*e,t}function Ns(t,e,r){var n=e[0],i=e[1];return t[0]=r[0]*n+r[2]*i,t[1]=r[1]*n+r[3]*i,t}function Ls(t,e,r){var n=e[0],i=e[1];return t[0]=r[0]*n+r[2]*i+r[4],t[1]=r[1]*n+r[3]*i+r[5],t}function ws(t,e,r){var n=e[0],i=e[1];return t[0]=r[0]*n+r[3]*i+r[6],t[1]=r[1]*n+r[4]*i+r[7],t}function Fs(t,e,r){var n=e[0],i=e[1];return t[0]=r[0]*n+r[4]*i+r[12],t[1]=r[1]*n+r[5]*i+r[13],t}function Cs(t,e,r,n){var i=e[0]-r[0],s=e[1]-r[1],a=Math.sin(n),o=Math.cos(n);return t[0]=i*o-s*a+r[0],t[1]=i*a+s*o+r[1],t}function Us(t,e){var r=t[0],n=t[1],i=e[0],s=e[1],a=Math.sqrt(r*r+n*n)*Math.sqrt(i*i+s*s),o=a&&(r*i+n*s)/a;return Math.acos(Math.min(Math.max(o,-1),1))}function Ps(t){return t[0]=0,t[1]=0,t}function Os(t){return"vec2("+t[0]+", "+t[1]+")"}function Ds(t,e){return t[0]===e[0]&&t[1]===e[1]}function Bs(t,e){var r=t[0],n=t[1],i=e[0],s=e[1];return Math.abs(r-i)<=d*Math.max(1,Math.abs(r),Math.abs(i))&&Math.abs(n-s)<=d*Math.max(1,Math.abs(n),Math.abs(s))}var Xs=gs,Vs=us,Gs=hs,ks=cs,Hs=Ts,Ys=vs,Ws=Rs,zs=function(){var t=rs();return function(e,r,n,i,s,a){var o,u;for(r||(r=2),n||(n=0),u=i?Math.min(i*r+n,e.length):e.length,o=n;o<u;o+=r)t[0]=e[o],t[1]=e[o+1],s(t,t,a),e[o]=t[0],e[o+1]=t[1];return e}}(),qs=["EXT_shader_texture_lod","EXT_sRGB","EXT_frag_depth","OES_texture_float","OES_texture_half_float","OES_texture_float_linear","OES_texture_half_float_linear","OES_standard_derivatives","WEBGL_depth_texture","EXT_texture_filter_anisotropic","OES_vertex_array_object","ANGLE_instanced_arrays","WEBGL_draw_buffers"],js=r(1),Zs=r.n(js);var Ks=function(){for(const t in Zs.a)aa[t]||(aa[t]=Zs.a[t])};function Qs(t,e){const r=t.getExtension(e);if(!r)return!1;const n=e.split("_")[0],i=new RegExp(n+"$");for(const e in r){if("function"==typeof r[e]){const n=e.replace(i,"");e.substring&&(t[n]=r[e].bind(r))}}return!0}var $s=function(t,e,r){return void 0===e.cacheAttribLoc&&(e.cacheAttribLoc={}),void 0===e.cacheAttribLoc[r]&&(e.cacheAttribLoc[r]=t.getAttribLocation(e,r)),e.cacheAttribLoc[r]};let Js,ta=!1;var ea=function(){return ta||(Js=aa.webgl2||aa.getExtension("OES_texture_float")?aa.gl.FLOAT:aa.gl.UNSIGNED_BYTE),Js};let ra,na=!1;var ia=function(){return na||(ra=function(){if(aa.webgl2)return aa.gl.HALF_FLOAT;{const t=aa.getExtension("OES_texture_half_float");return t?t.HALF_FLOAT_OES:aa.gl.UNSIGNED_BYTE}}()),ra};let sa;var aa=new class{constructor(){this._viewport=[0,0,0,0],this._enabledVertexAttribute=[],this.identityMatrix=o.create(),this._normalMatrix=a.create(),this._inverseModelViewMatrix=a.create(),this._modelMatrix=o.create(),this._matrix=o.create(),this._matrixStacks=[],this._lastMesh=null,this._useWebGL2=!1,this._hasArrayInstance=!1,this._extArrayInstance=!1,this._hasCheckedExt=!1,o.identity(this.identityMatrix,this.identityMatrix),this.isMobile=!1,/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)&&(this.isMobile=!0)}init(t,e={}){if(null==t)return;let r;void 0!==this.canvas&&null!==this.canvas&&this.destroy(),this.canvas=t,this.setSize(window.innerWidth,window.innerHeight),e.useWebgl2=e.useWebgl2||!1,e.useWebgl2?(r=this.canvas.getContext("experimental-webgl2",e)||this.canvas.getContext("webgl2",e),r?this._useWebGL2=!0:(r=this.canvas.getContext("webgl",e)||this.canvas.getContext("experimental-webgl",e),this._useWebGL2=!1)):(r=this.canvas.getContext("webgl",e)||this.canvas.getContext("experimental-webgl",e),this._useWebGL2=!1),this.initWithGL(r)}initWithGL(t){this.canvas||(this.canvas=t.canvas),sa=this.gl=t,this.extensions={};for(let t=0;t<qs.length;t++)this.extensions[qs[t]]=sa.getExtension(qs[t]);Ks(),Qs(sa,"OES_vertex_array_object"),Qs(sa,"ANGLE_instanced_arrays"),Qs(sa,"WEBGL_draw_buffers"),this.enable(this.DEPTH_TEST),this.enable(this.CULL_FACE),this.enable(this.BLEND),this.enableAlphaBlending()}setViewport(t,e,r,n){let i=!1;t!==this._viewport[0]&&(i=!0),e!==this._viewport[1]&&(i=!0),r!==this._viewport[2]&&(i=!0),n!==this._viewport[3]&&(i=!0),i&&(sa.viewport(t,e,r,n),this._viewport=[t,e,r,n])}scissor(t,e,r,n){this.gl.scissor(t,e,r,n)}clear(t,e,r,n){this.gl.clearColor(t,e,r,n),this.gl.clear(sa.COLOR_BUFFER_BIT|sa.DEPTH_BUFFER_BIT)}cullFace(t){this.gl.cullFace(t)}setMatrices(t){this.camera=t,this.rotate(this.identityMatrix)}useShader(t){this.shader=t,this.shaderProgram=this.shader.shaderProgram}rotate(t){o.copy(this._modelMatrix,t),o.multiply(this._matrix,this.camera.matrix,this._modelMatrix),a.fromMat4(this._normalMatrix,this._matrix),a.invert(this._normalMatrix,this._normalMatrix),a.transpose(this._normalMatrix,this._normalMatrix),a.fromMat4(this._inverseModelViewMatrix,this._matrix),a.invert(this._inverseModelViewMatrix,this._inverseModelViewMatrix)}draw(t,e){const r=this.gl;if(t.length){for(let e=0;e<t.length;e++)this.draw(t[e]);return}t.bind(this.shaderProgram),void 0!==this.camera&&(this.shader.uniform("uProjectionMatrix","mat4",this.camera.projection),this.shader.uniform("uViewMatrix","mat4",this.camera.matrix)),this.shader.uniform("uModelMatrix","mat4",this._modelMatrix),this.shader.uniform("uNormalMatrix","mat3",this._normalMatrix),this.shader.uniform("uModelViewMatrixInverse","mat3",this._inverseModelViewMatrix);let n=t.drawType;void 0!==e&&(n=e),t.isInstanced?r.drawElementsInstanced(t.drawType,t.iBuffer.numItems,r.UNSIGNED_SHORT,0,t.numInstance):n===r.POINTS?r.drawArrays(n,0,t.vertexSize):r.drawElements(n,t.iBuffer.numItems,r.UNSIGNED_SHORT,0),t.unbind()}drawTransformFeedback(t){const e=this.gl,{meshSource:r,meshDestination:n,numPoints:i,transformFeedback:s}=t;r.bind(this.shaderProgram),n.generateBuffers(this.shaderProgram),e.bindTransformFeedback(e.TRANSFORM_FEEDBACK,s),n.attributes.forEach((t,r)=>{e.bindBufferBase(e.TRANSFORM_FEEDBACK_BUFFER,r,t.buffer)}),e.enable(e.RASTERIZER_DISCARD),e.beginTransformFeedback(e.POINTS),e.drawArrays(e.POINTS,0,i),e.endTransformFeedback(),e.disable(e.RASTERIZER_DISCARD),e.useProgram(null),e.bindBuffer(e.ARRAY_BUFFER,null),n.attributes.forEach((t,r)=>{e.bindBufferBase(e.TRANSFORM_FEEDBACK_BUFFER,r,null)}),e.bindTransformFeedback(e.TRANSFORM_FEEDBACK,null),r.unbind()}setSize(t,e){const r=this.gl;this._width=t,this._height=e,this.canvas.width=this._width,this.canvas.height=this._height,this._aspectRatio=this._width/this._height,r&&this.viewport(0,0,this._width,this._height)}showExtensions(){for(const t in this.extensions)this.extensions[t]}checkExtension(t){return!!this.extensions[t]}getExtension(t){return this.extensions[t]}enableAlphaBlending(){const t=this.gl;t.blendFunc(t.SRC_ALPHA,t.ONE_MINUS_SRC_ALPHA)}enableAdditiveBlending(){const t=this.gl;t.blendFunc(t.ONE,t.ONE)}pushMatrix(){const t=o.clone(this._modelMatrix);this._matrixStacks.push(t)}popMatrix(){if(0==this._matrixStacks.length)return null;const t=this._matrixStacks.pop();this.rotate(t)}enable(t){this.gl.enable(t)}disable(t){this.gl.disable(t)}viewport(t,e,r,n){this.setViewport(t,e,r,n)}get FLOAT(){return ea()}get HALF_FLOAT(){return ia()}get width(){return this._width}get height(){return this._height}get aspectRatio(){return this._aspectRatio}get webgl2(){return this._useWebGL2}destroy(){if(this.canvas.parentNode)try{this.canvas.parentNode.removeChild(this.canvas)}catch(t){}this.canvas=null}};var oa=class{constructor(t,e){this._mesh=t,this._shader=e}draw(){this._shader.bind(),aa.draw(this.mesh)}get mesh(){return this._mesh}get shader(){return this._shader}destroy(){this.mesh.destroy();const t=aa.gl;t.useProgram(null),t.deleteProgram(this._shader.shaderProgram)}};const ua=function(t,e){let r;return void 0!==t.buffer?r=t.buffer:(r=e.createBuffer(),t.buffer=r),r};var ha=class{constructor(t=4,e=!0){this.gl=aa.gl,this.drawType=t,this._attributes=[],this._numInstance=-1,this._enabledVertexAttribute=[],this._indices=[],this._faces=[],this._bufferChanged=[],this._hasIndexBufferChanged=!1,this._hasVAO=!1,this._isInstanced=!1,this._extVAO=!!aa.gl.createVertexArray,this._useVAO=!!this._extVAO&&e}bufferVertex(t,e=35044){return this.bufferData(t,"aVertexPosition",3,e),this.normals.length<this.vertices.length&&this.bufferNormal(t,e),this}bufferTexCoord(t,e=35044){return this.bufferData(t,"aTextureCoord",2,e),this}bufferNormal(t,e=35044){return this.bufferData(t,"aNormal",3,e),this}bufferIndex(t,e=!1){const r=this.gl;return this._drawType=e?r.DYNAMIC_DRAW:r.STATIC_DRAW,this._indices=new Uint16Array(t),this._numItems=this._indices.length,this}bufferFlattenData(t,e,r,n=35044,i=!1){const s=function(t,e){const r=[];for(let n=0;n<t.length;n+=e){const i=[];for(let r=0;r<e;r++)i.push(t[n+r]);r.push(i)}return r}(t,r);return this.bufferData(s,e,r,35044,!1),this}bufferData(t,e,r,n=35044,i=!1){let s=0;const a=n,o=[];for(r||(r=t[0].length),this._isInstanced=i||this._isInstanced,s=0;s<t.length;s++)for(let e=0;e<t[s].length;e++)o.push(t[s][e]);const u=new Float32Array(o),h=this.getAttribute(e);return h?(h.itemSize=r,h.dataArray=u,h.source=t):this._attributes.push({name:e,source:t,itemSize:r,drawType:a,dataArray:u,isInstanced:i}),this._bufferChanged.push(e),this}bufferInstance(t,e){if(!aa.gl.vertexAttribDivisor)return;const r=t[0].length;this._numInstance=t.length,this.bufferData(t,e,r,35044,!0)}bind(t){const e=this.gl;this.generateBuffers(t),this.hasVAO?e.bindVertexArray(this.vao):(this.attributes.forEach(t=>{e.bindBuffer(e.ARRAY_BUFFER,t.buffer);const r=t.attrPosition;e.vertexAttribPointer(r,t.itemSize,e.FLOAT,!1,0,0),t.isInstanced&&e.vertexAttribDivisor(r,1)}),e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,this.iBuffer))}generateBuffers(t){const e=this.gl;0!=this._bufferChanged.length&&(this._useVAO?(this._vao||(this._vao=e.createVertexArray()),e.bindVertexArray(this._vao),this._attributes.forEach(r=>{if(-1!==this._bufferChanged.indexOf(r.name)){const n=ua(r,this.gl);e.bindBuffer(e.ARRAY_BUFFER,n),e.bufferData(e.ARRAY_BUFFER,r.dataArray,r.drawType);const i=$s(e,t,r.name);e.enableVertexAttribArray(i),e.vertexAttribPointer(i,r.itemSize,e.FLOAT,!1,0,0),r.attrPosition=i,r.isInstanced&&e.vertexAttribDivisor(i,1)}}),this._updateIndexBuffer(),e.bindVertexArray(null),this._hasVAO=!0):(this._attributes.forEach(r=>{if(-1!==this._bufferChanged.indexOf(r.name)){const n=ua(r,this.gl);e.bindBuffer(e.ARRAY_BUFFER,n),e.bufferData(e.ARRAY_BUFFER,r.dataArray,r.drawType);const i=$s(e,t,r.name);e.enableVertexAttribArray(i),e.vertexAttribPointer(i,r.itemSize,e.FLOAT,!1,0,0),r.attrPosition=i,r.isInstanced&&e.vertexAttribDivisor(i,1)}}),this._updateIndexBuffer()),this._hasIndexBufferChanged=!1,this._bufferChanged=[])}unbind(){const t=this.gl;this._useVAO&&t.bindVertexArray(null),this._attributes.forEach(e=>{e.isInstanced&&t.vertexAttribDivisor(e.attrPosition,0)})}_updateIndexBuffer(){const t=this.gl;this._hasIndexBufferChanged||(this.iBuffer||(this.iBuffer=t.createBuffer()),t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,this.iBuffer),t.bufferData(t.ELEMENT_ARRAY_BUFFER,this._indices,this._drawType),this.iBuffer.itemSize=1,this.iBuffer.numItems=this._numItems)}computeNormals(t=!1){this.generateFaces(),t?this._computeFaceNormals():this._computeVertexNormals()}_computeFaceNormals(){let t,e;const r=[];for(let n=0;n<this._indices.length;n+=3){t=n/3,e=this._faces[t];const i=e.normal;r[e.indices[0]]=i,r[e.indices[1]]=i,r[e.indices[2]]=i}this.bufferNormal(r)}_computeVertexNormals(){let t;const e=u.create(),r=[],{vertices:n}=this;for(let i=0;i<n.length;i++){u.set(e,0,0,0);for(let r=0;r<this._faces.length;r++)t=this._faces[r],t.indices.indexOf(i)>=0&&(e[0]+=t.normal[0],e[1]+=t.normal[1],e[2]+=t.normal[2]);u.normalize(e,e),r.push([e[0],e[1],e[2]])}this.bufferNormal(r)}generateFaces(){let t,e,r,n,i,s;u.create(),u.create(),u.create();const{vertices:a}=this;for(let o=0;o<this._indices.length;o+=3){t=this._indices[o],e=this._indices[o+1],r=this._indices[o+2],n=a[t],i=a[e],s=a[r];const u={indices:[t,e,r],vertices:[n,i,s]};this._faces.push(u)}}getAttribute(t){return this._attributes.find(e=>e.name===t)}getSource(t){const e=this.getAttribute(t);return e?e.source:[]}destroy(){const t=this.gl;this._attributes.forEach(e=>{const r=ua(e,this.gl);t.bindBuffer(t.ARRAY_BUFFER,r),t.bufferData(t.ARRAY_BUFFER,1,t.STATIC_DRAW),t.deleteBuffer(r),e.buffer=null}),t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,this.iBuffer),t.bufferData(t.ELEMENT_ARRAY_BUFFER,1,t.STATIC_DRAW),t.deleteBuffer(this.iBuffer),this.hasVAO&&t.deleteVertexArray(this._vao),this.iBuffer=null,this._vao=null}get vertices(){return this.getSource("aVertexPosition")}get normals(){return this.getSource("aNormal")}get coords(){return this.getSource("aTextureCoord")}get indices(){return this._indices}get vertexSize(){return this.vertices.length}get faces(){return this._faces}get attributes(){return this._attributes}get hasVAO(){return this._hasVAO}get vao(){return this._vao}get numInstance(){return this._numInstance}get isInstanced(){return this._isInstanced}},ca="// basic.vert\n\n#define SHADER_NAME BASIC_VERTEX\n\nprecision highp float;\n#define GLSLIFY 1\nattribute vec3 aVertexPosition;\nattribute vec2 aTextureCoord;\nattribute vec3 aNormal;\n\nuniform mat4 uModelMatrix;\nuniform mat4 uViewMatrix;\nuniform mat4 uProjectionMatrix;\n\nvarying vec2 vTextureCoord;\nvarying vec3 vNormal;\n\nvoid main(void) {\n    gl_Position = uProjectionMatrix * uViewMatrix * uModelMatrix * vec4(aVertexPosition, 1.0);\n    vTextureCoord = aTextureCoord;\n    vNormal = aNormal;\n}";r(12);const _a=(t,e)=>{if(t.length!==e.length)return!1;for(let r=0;r<t.length;r++)if(t[r]!==e[r])return!1;return!0},fa=t=>t.slice?t.slice(0):new Float32Array(t);const la={float:"uniform1f",vec2:"uniform2fv",vec3:"uniform3fv",vec4:"uniform4fv",int:"uniform1i",mat3:"uniformMatrix3fv",mat4:"uniformMatrix4fv"};class da{constructor(t=ca,e="// basic.frag\n\n#define SHADER_NAME BASIC_FRAGMENT\n\nprecision lowp float;\n#define GLSLIFY 1\nvarying vec2 vTextureCoord;\nuniform float time;\n// uniform sampler2D texture;\n\nvoid main(void) {\n    gl_FragColor = vec4(vTextureCoord, sin(time) * .5 + .5, 1.0);\n}",r){this.gl=aa.gl,this.parameters=[],this.uniformTextures=[],this._varyings=r,t||(t=ca),e||(e=ca);const n=this._createShaderProgram(t,!0),i=this._createShaderProgram(e,!1);this._attachShaderProgram(n,i)}bind(){aa.shader!==this&&(this.gl.useProgram(this.shaderProgram),aa.useShader(this),this.uniformTextures=[])}uniform(t,e,r){if("object"==typeof t)return void this.uniformObject(t);const n=la[e]||e;let i,s=!1,a=-1;for(let e=0;e<this.parameters.length;e++)if(i=this.parameters[e],i.name===t){s=!0,a=e;break}let o=!1;if(s?(this.shaderProgram[t]=i.uniformLoc,o=i.isNumber):(o="uniform1i"===n||"uniform1f"===n,this.shaderProgram[t]=this.gl.getUniformLocation(this.shaderProgram,t),o?this.parameters.push({name:t,type:n,value:r,uniformLoc:this.shaderProgram[t],isNumber:o}):this.parameters.push({name:t,type:n,value:fa(r),uniformLoc:this.shaderProgram[t],isNumber:o}),a=this.parameters.length-1),this.parameters[a].uniformLoc)if(-1===n.indexOf("Matrix"))if(o){(this.parameters[a].value!==r||!s)&&(this.gl[n](this.shaderProgram[t],r),this.parameters[a].value=r)}else _a(this.parameters[a].value,r)&&s||(this.gl[n](this.shaderProgram[t],r),this.parameters[a].value=fa(r));else _a(this.parameters[a].value,r)&&s||(this.gl[n](this.shaderProgram[t],!1,r),this.parameters[a].value=fa(r))}uniformObject(t){for(const e in t){let r=t[e];const n=da.getUniformType(r);if(r.concat&&r[0].concat){let t=[];for(let e=0;e<r.length;e++)t=t.concat(r[e]);r=t}this.uniform(e,n,r)}}_createShaderProgram(t,e){const r=this.gl,n=e?aa.VERTEX_SHADER:aa.FRAGMENT_SHADER,i=r.createShader(n);return r.shaderSource(i,t),r.compileShader(i),r.getShaderParameter(i,r.COMPILE_STATUS)?i:null}_attachShaderProgram(t,e){const r=this.gl;this.shaderProgram=r.createProgram(),r.attachShader(this.shaderProgram,t),r.attachShader(this.shaderProgram,e),r.deleteShader(t),r.deleteShader(e),this._varyings&&r.transformFeedbackVaryings(this.shaderProgram,this._varyings,r.SEPARATE_ATTRIBS),r.linkProgram(this.shaderProgram)}destroy(){const t=aa.gl;t.useProgram(null),t.deleteProgram(this.shaderProgram)}}da.getUniformType=function(t){const e=function(t){return 9===t.length?"uniformMatrix3fv":16===t.length?"uniformMatrix4fv":"vec"+t.length};return!!t.concat?t[0].concat?e(t[0]):e(t):"float"};var pa=da;var Ea=class extends oa{constructor(){const t=[],e=[],r=9999;t.push([-r,0,0]),t.push([r,0,0]),t.push([0,-r,0]),t.push([0,r,0]),t.push([0,0,-r]),t.push([0,0,r]),e.push([1,0,0]),e.push([1,0,0]),e.push([0,1,0]),e.push([0,1,0]),e.push([0,0,1]),e.push([0,0,1]);const n=new ha(aa.LINES);n.bufferVertex(t),n.bufferIndex([0,1,2,3,4,5]),n.bufferData(e,"aColor",3),super(n,new pa("// axis.vert\n\n#define SHADER_NAME BASIC_VERTEX\n\nprecision highp float;\n#define GLSLIFY 1\nattribute vec3 aVertexPosition;\nattribute vec3 aColor;\nattribute vec3 aNormal;\n\nuniform mat4 uModelMatrix;\nuniform mat4 uViewMatrix;\nuniform mat4 uProjectionMatrix;\n\nvarying vec3 vColor;\nvarying vec3 vNormal;\n\nvoid main(void) {\n    gl_Position = uProjectionMatrix * uViewMatrix * uModelMatrix * vec4(aVertexPosition, 1.0);\n    vColor = aColor;\n    vNormal = aNormal;\n}","// axis.frag\n\n#define SHADER_NAME SIMPLE_TEXTURE\n\nprecision lowp float;\n#define GLSLIFY 1\nvarying vec3 vColor;\nvarying vec3 vNormal;\n\nvoid main(void) {\n\t// vec3 color = vNormal;\n\tvec3 color = vColor + vNormal * 0.0001;\n    gl_FragColor = vec4(color, 1.0);\n}"))}};const ma={};let Ta;ma.plane=function(t,e,r,n="xy",i=4){const s=[],a=[],o=[],u=[],h=t/r,c=e/r,_=1/r,f=.5*-t,l=.5*-e;let d=0;for(let t=0;t<r;t++)for(let e=0;e<r;e++){const i=h*t+f,p=c*e+l,E=t/r,m=e/r;"xz"===n?(s.push([i,0,p+c]),s.push([i+h,0,p+c]),s.push([i+h,0,p]),s.push([i,0,p]),a.push([E,1-(m+_)]),a.push([E+_,1-(m+_)]),a.push([E+_,1-m]),a.push([E,1-m]),u.push([0,1,0]),u.push([0,1,0]),u.push([0,1,0]),u.push([0,1,0])):"yz"===n?(s.push([0,p,i]),s.push([0,p,i+h]),s.push([0,p+c,i+h]),s.push([0,p+c,i]),a.push([E,m]),a.push([E+_,m]),a.push([E+_,m+_]),a.push([E,m+_]),u.push([1,0,0]),u.push([1,0,0]),u.push([1,0,0]),u.push([1,0,0])):(s.push([i,p,0]),s.push([i+h,p,0]),s.push([i+h,p+c,0]),s.push([i,p+c,0]),a.push([E,m]),a.push([E+_,m]),a.push([E+_,m+_]),a.push([E,m+_]),u.push([0,0,1]),u.push([0,0,1]),u.push([0,0,1]),u.push([0,0,1])),o.push(4*d+0),o.push(4*d+1),o.push(4*d+2),o.push(4*d+0),o.push(4*d+2),o.push(4*d+3),d++}const p=new ha(i);return p.bufferVertex(s),p.bufferTexCoord(a),p.bufferIndex(o),p.bufferNormal(u),p},ma.sphere=function(t,e,r=!1,n=4){const i=[],s=[],a=[],o=[],u=1/e;let h=0;function c(r,n,i=!1){const s=r/e*Math.PI-.5*Math.PI,a=n/e*Math.PI*2,o=i?1:t,u=[];u[1]=Math.sin(s)*o;const h=Math.cos(s)*o;u[0]=Math.cos(a)*h,u[2]=Math.sin(a)*h;return u[0]=Math.floor(1e4*u[0])/1e4,u[1]=Math.floor(1e4*u[1])/1e4,u[2]=Math.floor(1e4*u[2])/1e4,u}for(let t=0;t<e;t++)for(let r=0;r<e;r++){i.push(c(t,r)),i.push(c(t+1,r)),i.push(c(t+1,r+1)),i.push(c(t,r+1)),o.push(c(t,r,!0)),o.push(c(t+1,r,!0)),o.push(c(t+1,r+1,!0)),o.push(c(t,r+1,!0));const n=r/e,_=t/e;s.push([1-n,_]),s.push([1-n,_+u]),s.push([1-n-u,_+u]),s.push([1-n-u,_]),a.push(4*h+0),a.push(4*h+1),a.push(4*h+2),a.push(4*h+0),a.push(4*h+2),a.push(4*h+3),h++}r&&a.reverse();const _=new ha(n);return _.bufferVertex(i),_.bufferTexCoord(s),_.bufferIndex(a),_.bufferNormal(o),_},ma.cube=function(t,e,r,n=4){const i=t/2,s=(e=e||t)/2,a=(r=r||t)/2,o=[],u=[],h=[],c=[];let _=0;o.push([-i,s,-a]),o.push([i,s,-a]),o.push([i,-s,-a]),o.push([-i,-s,-a]),c.push([0,0,-1]),c.push([0,0,-1]),c.push([0,0,-1]),c.push([0,0,-1]),u.push([0,0]),u.push([1,0]),u.push([1,1]),u.push([0,1]),h.push(4*_+0),h.push(4*_+1),h.push(4*_+2),h.push(4*_+0),h.push(4*_+2),h.push(4*_+3),_++,o.push([i,s,-a]),o.push([i,s,a]),o.push([i,-s,a]),o.push([i,-s,-a]),c.push([1,0,0]),c.push([1,0,0]),c.push([1,0,0]),c.push([1,0,0]),u.push([0,0]),u.push([1,0]),u.push([1,1]),u.push([0,1]),h.push(4*_+0),h.push(4*_+1),h.push(4*_+2),h.push(4*_+0),h.push(4*_+2),h.push(4*_+3),_++,o.push([i,s,a]),o.push([-i,s,a]),o.push([-i,-s,a]),o.push([i,-s,a]),c.push([0,0,1]),c.push([0,0,1]),c.push([0,0,1]),c.push([0,0,1]),u.push([0,0]),u.push([1,0]),u.push([1,1]),u.push([0,1]),h.push(4*_+0),h.push(4*_+1),h.push(4*_+2),h.push(4*_+0),h.push(4*_+2),h.push(4*_+3),_++,o.push([-i,s,a]),o.push([-i,s,-a]),o.push([-i,-s,-a]),o.push([-i,-s,a]),c.push([-1,0,0]),c.push([-1,0,0]),c.push([-1,0,0]),c.push([-1,0,0]),u.push([0,0]),u.push([1,0]),u.push([1,1]),u.push([0,1]),h.push(4*_+0),h.push(4*_+1),h.push(4*_+2),h.push(4*_+0),h.push(4*_+2),h.push(4*_+3),_++,o.push([i,s,-a]),o.push([-i,s,-a]),o.push([-i,s,a]),o.push([i,s,a]),c.push([0,1,0]),c.push([0,1,0]),c.push([0,1,0]),c.push([0,1,0]),u.push([0,0]),u.push([1,0]),u.push([1,1]),u.push([0,1]),h.push(4*_+0),h.push(4*_+1),h.push(4*_+2),h.push(4*_+0),h.push(4*_+2),h.push(4*_+3),_++,o.push([i,-s,a]),o.push([-i,-s,a]),o.push([-i,-s,-a]),o.push([i,-s,-a]),c.push([0,-1,0]),c.push([0,-1,0]),c.push([0,-1,0]),c.push([0,-1,0]),u.push([0,0]),u.push([1,0]),u.push([1,1]),u.push([0,1]),h.push(4*_+0),h.push(4*_+1),h.push(4*_+2),h.push(4*_+0),h.push(4*_+2),h.push(4*_+3),_++;const f=new ha(n);return f.bufferVertex(o),f.bufferTexCoord(u),f.bufferIndex(h),f.bufferNormal(c),f},ma.skybox=function(t,e=4){const r=[],n=[],i=[],s=[];let a=0;r.push([t,t,-t]),r.push([-t,t,-t]),r.push([-t,-t,-t]),r.push([t,-t,-t]),s.push([0,0,-1]),s.push([0,0,-1]),s.push([0,0,-1]),s.push([0,0,-1]),n.push([0,0]),n.push([1,0]),n.push([1,1]),n.push([0,1]),i.push(4*a+0),i.push(4*a+1),i.push(4*a+2),i.push(4*a+0),i.push(4*a+2),i.push(4*a+3),a++,r.push([t,-t,-t]),r.push([t,-t,t]),r.push([t,t,t]),r.push([t,t,-t]),s.push([1,0,0]),s.push([1,0,0]),s.push([1,0,0]),s.push([1,0,0]),n.push([0,0]),n.push([1,0]),n.push([1,1]),n.push([0,1]),i.push(4*a+0),i.push(4*a+1),i.push(4*a+2),i.push(4*a+0),i.push(4*a+2),i.push(4*a+3),a++,r.push([-t,t,t]),r.push([t,t,t]),r.push([t,-t,t]),r.push([-t,-t,t]),s.push([0,0,1]),s.push([0,0,1]),s.push([0,0,1]),s.push([0,0,1]),n.push([0,0]),n.push([1,0]),n.push([1,1]),n.push([0,1]),i.push(4*a+0),i.push(4*a+1),i.push(4*a+2),i.push(4*a+0),i.push(4*a+2),i.push(4*a+3),a++,r.push([-t,-t,t]),r.push([-t,-t,-t]),r.push([-t,t,-t]),r.push([-t,t,t]),s.push([-1,0,0]),s.push([-1,0,0]),s.push([-1,0,0]),s.push([-1,0,0]),n.push([0,0]),n.push([1,0]),n.push([1,1]),n.push([0,1]),i.push(4*a+0),i.push(4*a+1),i.push(4*a+2),i.push(4*a+0),i.push(4*a+2),i.push(4*a+3),a++,r.push([t,t,t]),r.push([-t,t,t]),r.push([-t,t,-t]),r.push([t,t,-t]),s.push([0,1,0]),s.push([0,1,0]),s.push([0,1,0]),s.push([0,1,0]),n.push([0,0]),n.push([1,0]),n.push([1,1]),n.push([0,1]),i.push(4*a+0),i.push(4*a+1),i.push(4*a+2),i.push(4*a+0),i.push(4*a+2),i.push(4*a+3),a++,r.push([t,-t,-t]),r.push([-t,-t,-t]),r.push([-t,-t,t]),r.push([t,-t,t]),s.push([0,-1,0]),s.push([0,-1,0]),s.push([0,-1,0]),s.push([0,-1,0]),n.push([0,0]),n.push([1,0]),n.push([1,1]),n.push([0,1]),i.push(4*a+0),i.push(4*a+1),i.push(4*a+2),i.push(4*a+0),i.push(4*a+2),i.push(4*a+3);const o=new ha(e);return o.bufferVertex(r),o.bufferTexCoord(n),o.bufferIndex(i),o.bufferNormal(s),o},ma.bigTriangle=function(){return Ta=new ha,Ta.bufferData([[-1,-1],[-1,4],[4,-1]],"aPosition",2),Ta.bufferIndex([2,1,0]),Ta};var va=ma,ga="// generalWithNormal.vert\n\n#define SHADER_NAME GENERAL_VERTEX\n\nprecision highp float;\n#define GLSLIFY 1\nattribute vec3 aVertexPosition;\nattribute vec2 aTextureCoord;\nattribute vec3 aNormal;\n\nuniform mat4 uModelMatrix;\nuniform mat4 uViewMatrix;\nuniform mat4 uProjectionMatrix;\nuniform mat3 uNormalMatrix;\n\nuniform vec3 position;\nuniform vec3 scale;\n\nvarying vec2 vTextureCoord;\nvarying vec3 vNormal;\n\nvoid main(void) {\n\tvec3 pos      = aVertexPosition * scale;\n\tpos           += position;\n\tgl_Position   = uProjectionMatrix * uViewMatrix * uModelMatrix * vec4(pos, 1.0);\n\t\n\tvTextureCoord = aTextureCoord;\n\tvNormal       = normalize(uNormalMatrix * aNormal);\n}",Ra="// simpleColor.frag\n\n#define SHADER_NAME SIMPLE_COLOR\n\nprecision mediump float;\n#define GLSLIFY 1\n\nuniform vec3 color;\nuniform float opacity;\n\nvoid main(void) {\n    gl_FragColor = vec4(color, opacity);\n}";var Ma=class extends oa{constructor(){super(va.sphere(1,24),new pa(ga,Ra))}draw(t=[0,0,0],e=[1,1,1],r=[1,1,1],n=1){this.shader.bind(),this.shader.uniform("position","uniform3fv",t),this.shader.uniform("scale","uniform3fv",e),this.shader.uniform("color","uniform3fv",r),this.shader.uniform("opacity","uniform1f",n),super.draw()}},Aa="// bigTriangle.vert\n\n#define SHADER_NAME BIG_TRIANGLE_VERTEX\n\nprecision mediump float;\n#define GLSLIFY 1\nattribute vec2 aPosition;\nvarying vec2 vTextureCoord;\n\nvoid main(void) {\n    gl_Position = vec4(aPosition, 0.0, 1.0);\n    vTextureCoord = aPosition * .5 + .5;\n}",xa="// copy.frag\n\n#define SHADER_NAME COPY_FRAGMENT\n\nprecision mediump float;\n#define GLSLIFY 1\n\nvarying vec2 vTextureCoord;\nuniform sampler2D texture;\n\nvoid main(void) {\n    gl_FragColor = texture2D(texture, vTextureCoord);\n}";var ba=class extends oa{constructor(){const t=va.bigTriangle(),e=new pa(Aa,xa);super(t,e),e.bind(),e.uniform("texture","uniform1i",0)}draw(t){this.shader.bind(),t.bind(0),super.draw()}};var ya=class extends oa{constructor(){const t=[],e=[];let r=0;let n,i;for(n=-100;n<100;n+=1)for(i=-100;i<100;i+=1)t.push([n,i,0]),e.push(r),r++,t.push([n,0,i]),e.push(r),r++;const s=new ha(aa.POINTS);s.bufferVertex(t),s.bufferIndex(e),super(s,new pa("// basic.vert\n\n#define SHADER_NAME DOTS_PLANE_VERTEX\n\nprecision highp float;\n#define GLSLIFY 1\nattribute vec3 aVertexPosition;\nattribute vec3 aNormal;\n\nuniform mat4 uModelMatrix;\nuniform mat4 uViewMatrix;\nuniform mat4 uProjectionMatrix;\nuniform vec2 viewport;\n\nvarying vec3 vNormal;\n\nconst float radius = 0.008;\n\nvoid main(void) {\n    gl_Position = uProjectionMatrix * uViewMatrix * uModelMatrix * vec4(aVertexPosition + aNormal * 0.000001, 1.0);\n    // gl_PointSize = 1.0;\n    vNormal = aNormal;\n\n\tfloat distOffset = viewport.y * uProjectionMatrix[1][1] * radius / gl_Position.w;\n    gl_PointSize = distOffset;\n}","// dotsPlane.frag\n\nprecision highp float;\n#define GLSLIFY 1\n\nuniform vec3 color;\nuniform float opacity;\n\nvoid main(void) {\n\tif(distance(gl_PointCoord, vec2(.5)) > .5) {\n\t\tdiscard;\n\t}\n    gl_FragColor = vec4(color, opacity);\n}")),this.color=[1,1,1],this.opacity=.65}draw(){this.shader.bind(),this.shader.uniform("color","uniform3fv",this.color),this.shader.uniform("opacity","uniform1f",this.opacity),this.shader.uniform("viewport","vec2",[aa.width,aa.height]),super.draw()}};var Ia=class extends oa{constructor(){const t=[];t.push([0,0,0]),t.push([0,0,0]);const e=new ha(aa.LINES);e.bufferVertex(t),e.bufferTexCoord([[0,0],[1,1]]),e.bufferIndex([0,1]),super(e,new pa(ca,Ra))}draw(t,e,r=[1,1,1],n=1){this._mesh.bufferVertex([t,e]),this._shader.bind(),this._shader.uniform("color","vec3",r),this._shader.uniform("opacity","float",n),super.draw()}};var Sa=class extends oa{constructor(t=50,e=24){super(va.sphere(t,e,!0),new pa("// sky.vert\n\nprecision highp float;\n#define GLSLIFY 1\nattribute vec3 aVertexPosition;\nattribute vec2 aTextureCoord;\nattribute vec3 aNormal;\n\nuniform mat4 uModelMatrix;\nuniform mat4 uViewMatrix;\nuniform mat4 uProjectionMatrix;\n\nvarying vec2 vTextureCoord;\nvarying vec3 vNormal;\n\nvoid main(void) {\n\tmat4 matView = uViewMatrix;\n\tmatView[3][0] = 0.0;\n\tmatView[3][1] = 0.0;\n\tmatView[3][2] = 0.0;\n\t\n    gl_Position = uProjectionMatrix * matView * uModelMatrix * vec4(aVertexPosition, 1.0);\n    vTextureCoord = aTextureCoord;\n    vNormal = aNormal;\n}",xa))}draw(t){this.shader.bind(),t.bind(0),super.draw()}},Na="// basic.frag\n\n#define SHADER_NAME SKYBOX_FRAGMENT\n\nprecision mediump float;\n#define GLSLIFY 1\nuniform samplerCube texture;\nvarying vec2 vTextureCoord;\nvarying vec3 vVertex;\n\nvoid main(void) {\n    gl_FragColor = textureCube(texture, vVertex);\n}",La="// basic.vert\n\n#define SHADER_NAME SKYBOX_VERTEX\n\nprecision highp float;\n#define GLSLIFY 1\nattribute vec3 aVertexPosition;\nattribute vec2 aTextureCoord;\nattribute vec3 aNormal;\n\nuniform mat4 uModelMatrix;\nuniform mat4 uViewMatrix;\nuniform mat4 uProjectionMatrix;\n\nvarying vec2 vTextureCoord;\nvarying vec3 vVertex;\nvarying vec3 vNormal;\n\nvoid main(void) {\n\tmat4 matView = uViewMatrix;\n\tmatView[3][0] = 0.0;\n\tmatView[3][1] = 0.0;\n\tmatView[3][2] = 0.0;\n\t\n\tgl_Position = uProjectionMatrix * matView * uModelMatrix * vec4(aVertexPosition, 1.0);\n\tvTextureCoord = aTextureCoord;\n\t\n\tvVertex = aVertexPosition;\n\tvNormal = aNormal;\n}";var wa=class extends oa{constructor(t=20){super(va.skybox(t),new pa(La,Na))}draw(t){this.shader.bind(),t.bind(0),super.draw()}};var Fa=class{constructor(t=!1){this._req=new XMLHttpRequest,this._req.addEventListener("load",t=>this._onLoaded(t)),this._req.addEventListener("progress",t=>this._onProgress(t)),t&&(this._req.responseType="arraybuffer")}load(t,e){this._callback=e,this._req.open("GET",t),this._req.send()}_onLoaded(){this._callback(this._req.response)}_onProgress(){}};var Ca=class{constructor(){this._matrix=o.create(),this._quat=c.create(),this._orientation=o.create(),this._projection=o.create(),this.position=vec3.create()}lookAt(t,e,r=[0,1,0]){this._eye=vec3.clone(t),this._center=vec3.clone(e),vec3.copy(this.position,t),o.identity(this._matrix),o.lookAt(this._matrix,t,e,r)}setFromOrientation(t,e,r,n){c.set(this._quat,t,e,r,n),o.fromQuat(this._orientation,this._quat),o.translate(this._matrix,this._orientation,this.positionOffset)}setProjection(t){this._projection=o.clone(t)}setView(t){this._matrix=o.clone(t)}setFromViewProj(t,e){this.setView(t),this.setProjection(e)}get matrix(){return this._matrix}get viewMatrix(){return this._matrix}get projection(){return this._projection}get projectionMatrix(){return this._projection}get eye(){return this._eye}get center(){return this._center}};const Ua=u.create(),Pa=u.create(),Oa=u.create(),Da=u.create(),Ba=u.create(),Xa=u.create(),Va=u.create(),Ga=u.create();var ka=class{constructor(t,e){this.origin=u.clone(t),this.direction=u.clone(e)}at(t){return u.copy(Da,this.direction),u.scale(Da,Da,t),u.add(Da,Da,this.origin),Da}lookAt(t){u.sub(this.direction,t,this.origin),u.normalize(this.origin,this.origin)}closestPointToPoint(t){const e=u.create();u.sub(t,this.origin);const r=u.dot(e,this.direction);return r<0?u.clone(this.origin):(u.copy(e,this.direction),u.scale(e,e,r),u.add(e,e,this.origin),e)}distanceToPoint(t){return Math.sqrt(this.distanceSqToPoint(t))}distanceSqToPoint(t){const e=u.create();u.sub(e,t,this.origin);const r=u.dot(e,this.direction);return r<0?u.squaredDistance(this.origin,t):(u.copy(e,this.direction),u.scale(e,e,r),u.add(e,e,this.origin),u.squaredDistance(e,t))}intersectsSphere(t,e){return this.distanceToPoint(t)<=e}intersectSphere(t,e){const r=u.create();u.sub(r,t,this.origin);const n=u.dot(r,this.direction),i=u.dot(r,r)-n*n,s=e*e;if(i>s)return null;const a=Math.sqrt(s-i),o=n-a,h=n+a;return o<0&&h<0?null:o<0?this.at(h):this.at(o)}distanceToPlane(t,e){u.dot(e,this.direction)}intersectTriangle(t,e,r,n=!0){u.copy(Ua,t),u.copy(Pa,e),u.copy(Oa,r),u.sub(Ba,Pa,Ua),u.sub(Xa,Oa,Ua),u.cross(Va,Ba,Xa);let i,s=u.dot(this.direction,Va);if(s>0){if(n)return null;i=1}else{if(!(s<0))return null;i=-1,s=-s}u.sub(Ga,this.origin,Ua),u.cross(Xa,Ga,Xa);const a=i*u.dot(this.direction,Xa);if(a<0)return null;u.cross(Ba,Ba,Ga);const o=i*u.dot(this.direction,Ba);if(o<0)return null;if(a+o>s)return null;const h=-i*u.dot(Ga,Va);return h<0?null:this.at(h/s)}};const Ha=o.create(),Ya=u.create();var Wa=class extends Ca{constructor(t,e,r,n){super(),t&&this.setPerspective(t,e,r,n)}setPerspective(t,e,r,n){this._fov=t,this._near=r,this._far=n,this._aspectRatio=e,o.perspective(this._projection,t,e,r,n)}setAspectRatio(t){this._aspectRatio=t,o.perspective(this.projection,this._fov,t,this._near,this._far)}generateRay(t,e){const r=this.projectionMatrix,n=this.viewMatrix;return o.multiply(Ha,r,n),o.invert(Ha,Ha),u.transformMat4(Ya,t,Ha),u.sub(Ya,Ya,this.position),u.normalize(Ya,Ya),e?(e.origin=this.position,e.direction=Ya):e=new ka(this.position,Ya),e}};const za=[[u.fromValues(0,0,0),u.fromValues(1,0,0),u.fromValues(0,-1,0)],[u.fromValues(0,0,0),u.fromValues(-1,0,0),u.fromValues(0,-1,0)],[u.fromValues(0,0,0),u.fromValues(0,1,0),u.fromValues(0,0,1)],[u.fromValues(0,0,0),u.fromValues(0,-1,0),u.fromValues(0,0,-1)],[u.fromValues(0,0,0),u.fromValues(0,0,1),u.fromValues(0,-1,0)],[u.fromValues(0,0,0),u.fromValues(0,0,-1),u.fromValues(0,-1,0)]];var qa=class extends Wa{constructor(){super(),this.setPerspective(Math.PI/2,1,.1,1e3)}face(t){const e=za[t];this.lookAt(e[0],e[1],e[2])}};var ja=class extends Ca{constructor(){super();const t=u.clone([0,0,5]),e=u.create(),r=u.clone([0,1,0]);this.lookAt(t,e,r),this.ortho(-1,1,1,-1)}setBoundary(t,e,r,n,i=.1,s=100){this.ortho(t,e,r,n,i,s)}ortho(t,e,r,n,i=.1,s=100){this.left=t,this.right=e,this.top=r,this.bottom=n,mat4.ortho(this._projection,t,e,n,r,i,s)}},Za=r(6),Ka=r.n(Za);let Qa;class $a{constructor(t,e={},r=!1){if(Qa=aa.gl,r)return void(this.texture=t);let n=t.length>6;t[0].mipmapCount&&(n=t[0].mipmapCount>1),this.texture=Qa.createTexture(),this.magFilter=e.magFilter||Qa.LINEAR,this.minFilter=e.minFilter||Qa.LINEAR_MIPMAP_LINEAR,this.wrapS=e.wrapS||Qa.CLAMP_TO_EDGE,this.wrapT=e.wrapT||Qa.CLAMP_TO_EDGE,n||this.minFilter!=Qa.LINEAR_MIPMAP_LINEAR||(this.minFilter=Qa.LINEAR),Qa.bindTexture(Qa.TEXTURE_CUBE_MAP,this.texture);const i=[Qa.TEXTURE_CUBE_MAP_POSITIVE_X,Qa.TEXTURE_CUBE_MAP_NEGATIVE_X,Qa.TEXTURE_CUBE_MAP_POSITIVE_Y,Qa.TEXTURE_CUBE_MAP_NEGATIVE_Y,Qa.TEXTURE_CUBE_MAP_POSITIVE_Z,Qa.TEXTURE_CUBE_MAP_NEGATIVE_Z];let s=1,a=0;if(s=t.length/6,this.numLevels=s,n)for(let e=0;e<6;e++)for(let r=0;r<s;r++)Qa.pixelStorei(Qa.UNPACK_FLIP_Y_WEBGL,!1),a=e*s+r,t[a].shape?Qa.texImage2D(i[e],r,Qa.RGBA,t[a].shape[0],t[a].shape[1],0,Qa.RGBA,Qa.FLOAT,t[a].data):Qa.texImage2D(i[e],r,Qa.RGBA,Qa.RGBA,Qa.UNSIGNED_BYTE,t[a]),Qa.texParameteri(Qa.TEXTURE_CUBE_MAP,Qa.TEXTURE_WRAP_S,this.wrapS),Qa.texParameteri(Qa.TEXTURE_CUBE_MAP,Qa.TEXTURE_WRAP_T,this.wrapT),Qa.texParameteri(Qa.TEXTURE_CUBE_MAP,Qa.TEXTURE_MAG_FILTER,this.magFilter),Qa.texParameteri(Qa.TEXTURE_CUBE_MAP,Qa.TEXTURE_MIN_FILTER,this.minFilter);else{let e=0;for(let r=0;r<6;r++)e=r*s,Qa.pixelStorei(Qa.UNPACK_FLIP_Y_WEBGL,!1),t[e].shape?Qa.texImage2D(i[r],0,Qa.RGBA,t[e].shape[0],t[e].shape[1],0,Qa.RGBA,Qa.FLOAT,t[e].data):Qa.texImage2D(i[r],0,Qa.RGBA,Qa.RGBA,Qa.UNSIGNED_BYTE,t[e]),Qa.texParameteri(Qa.TEXTURE_CUBE_MAP,Qa.TEXTURE_WRAP_S,this.wrapS),Qa.texParameteri(Qa.TEXTURE_CUBE_MAP,Qa.TEXTURE_WRAP_T,this.wrapT),Qa.texParameteri(Qa.TEXTURE_CUBE_MAP,Qa.TEXTURE_MAG_FILTER,this.magFilter),Qa.texParameteri(Qa.TEXTURE_CUBE_MAP,Qa.TEXTURE_MIN_FILTER,this.minFilter);Qa.generateMipmap(Qa.TEXTURE_CUBE_MAP)}Qa.bindTexture(Qa.TEXTURE_CUBE_MAP,null)}bind(t=0){aa.shader&&(Qa.activeTexture(Qa.TEXTURE0+t),Qa.bindTexture(Qa.TEXTURE_CUBE_MAP,this.texture),Qa.uniform1i(aa.shader.uniformTextures[t],t),this._bindIndex=t)}unbind(){Qa.bindTexture(Qa.TEXTURE_CUBE_MAP,null)}}$a.parseDDS=function(t){const e=Ka()(t),{flags:r}=e,n=new Int32Array(t,0,31);let i=1;131072&r&&(i=Math.max(1,n[7]));const s=e.images.map(e=>({data:new Float32Array(t.slice(e.offset,e.offset+e.length)),shape:e.shape,mipmapCount:i}));return new $a(s)};var Ja=$a;let to;var eo=class{constructor(t,e={}){to=aa.gl,this._size=t,this.magFilter=e.magFilter||to.LINEAR,this.minFilter=e.minFilter||to.LINEAR,this.wrapS=e.wrapS||to.CLAMP_TO_EDGE,this.wrapT=e.wrapT||to.CLAMP_TO_EDGE,this._init()}_init(){this.texture=to.createTexture(),this.glTexture=new Ja(this.texture,{},!0),to.bindTexture(to.TEXTURE_CUBE_MAP,this.texture),to.texParameteri(to.TEXTURE_CUBE_MAP,to.TEXTURE_MAG_FILTER,this.magFilter),to.texParameteri(to.TEXTURE_CUBE_MAP,to.TEXTURE_MIN_FILTER,this.minFilter),to.texParameteri(to.TEXTURE_CUBE_MAP,to.TEXTURE_WRAP_S,this.wrapS),to.texParameteri(to.TEXTURE_CUBE_MAP,to.TEXTURE_WRAP_T,this.wrapT);const t=[to.TEXTURE_CUBE_MAP_POSITIVE_X,to.TEXTURE_CUBE_MAP_NEGATIVE_X,to.TEXTURE_CUBE_MAP_POSITIVE_Y,to.TEXTURE_CUBE_MAP_NEGATIVE_Y,to.TEXTURE_CUBE_MAP_POSITIVE_Z,to.TEXTURE_CUBE_MAP_NEGATIVE_Z];for(let e=0;e<t.length;e++)to.pixelStorei(to.UNPACK_FLIP_Y_WEBGL,!1),to.texImage2D(t[e],0,to.RGBA,this.width,this.height,0,to.RGBA,to.FLOAT,null);this._frameBuffers=[];for(let e=0;e<t.length;e++){const r=to.createFramebuffer();to.bindFramebuffer(to.FRAMEBUFFER,r),to.framebufferTexture2D(to.FRAMEBUFFER,to.COLOR_ATTACHMENT0,t[e],this.texture,0);to.checkFramebufferStatus(to.FRAMEBUFFER);to.FRAMEBUFFER_COMPLETE,this._frameBuffers.push(r)}to.bindFramebuffer(to.FRAMEBUFFER,null),to.bindRenderbuffer(to.RENDERBUFFER,null),to.bindTexture(to.TEXTURE_CUBE_MAP,null)}bind(t){aa.viewport(0,0,this.width,this.height),to.bindFramebuffer(to.FRAMEBUFFER,this._frameBuffers[t])}unbind(){to.bindFramebuffer(to.FRAMEBUFFER,null),aa.viewport(0,0,aa.width,aa.height)}getTexture(){return this.glTexture}get width(){return this._size}get height(){return this._size}};var ro=class{constructor(){return this._uniforms={},this._uniformTextures=[],this._fbo,this._clearColor={r:0,g:0,b:0,a:0},this}setClearColor(t=0,e=0,r=0,n=0){return this._clearColor.r=t,this._clearColor.g=e,this._clearColor.b=r,this._clearColor.a=n,this}useProgram(t,e){return this._shader=t instanceof pa?t:new pa(t,e),this}setMesh(t){return this._mesh=t,this}createMesh(t){return this._mesh=new ha(t),this}bufferVertex(t){return this._mesh||(this._mesh=new ha),this._mesh.bufferVertex(t),this}bufferTexCoord(t){return this._mesh||(this._mesh=new ha),this._mesh.bufferTexCoord(t),this}bufferNormal(t){return this._mesh||(this._mesh=new ha),this._mesh.bufferNormal(t),this}bufferIndex(t){return this._mesh||(this._mesh=new ha),this._mesh.bufferIndex(t),this}bufferInstance(t,e){return this._mesh?(this._mesh.bufferInstance(t,e),this):this}bufferData(t,e){return this._mesh||(this._mesh=new ha),this._mesh.bufferData(t,e),this}uniform(t,e,r){return this._uniforms[t]={type:e,value:r},this}uniformTexture(t,e,r){return void 0!==r?this._uniformTextures[r]={name:t,texture:e}:this._uniformTextures.push({name:t,texture:e}),this}bindFrameBuffer(t){return this._fbo=t,this}draw(){if(this._shader&&this._mesh){if(this._fbo){const{r:t,g:e,b:r,a:n}=this._clearColor;this._fbo.bind(),aa.clear(t,e,r,n)}this._shader.bind();for(const t in this._uniforms){const e=this._uniforms[t];this._shader.uniform(t,e.type,e.value)}return this._uniformTextures.forEach((t,e)=>{void 0!==t&&(this._shader.uniform(t.name,"uniform1i",e),t.texture.bind(e))}),aa.draw(this._mesh),this._fbo&&this._fbo.unbind(),this}}get shader(){return this._shader}get framebuffer(){return this._fbo}};var no=new class{constructor(){this._delayTasks=[],this._nextTasks=[],this._deferTasks=[],this._highTasks=[],this._usurpTask=[],this._enterframeTasks=[],this._idTable=0,this._startTime=(new Date).getTime(),this._deltaTime=0,this._internalTime=0,this._isPaused=!1,this._loop()}addEF(t,e){e=e||[];const r=this._idTable;return this._enterframeTasks[r]={func:t,params:e},this._idTable++,r}removeEF(t){return void 0!==this._enterframeTasks[t]&&(this._enterframeTasks[t]=null),-1}delay(t,e,r){const n={func:t,params:e,delay:r,time:(new Date).getTime()};this._delayTasks.push(n)}defer(t,e){const r={func:t,params:e};this._deferTasks.push(r)}next(t,e){const r={func:t,params:e};this._nextTasks.push(r)}usurp(t,e){const r={func:t,params:e};this._usurpTask.push(r)}pause(){this._isPaused=!0}advance(){this._internalTime+=1/60}resume(){this._isPaused=!1}_process(){let t,e,r,n=0;for(n=0;n<this._enterframeTasks.length;n++)t=this._enterframeTasks[n],null!=t&&t.func(t.params);for(;this._highTasks.length>0;)t=this._highTasks.pop(),t.func(t.params);let i=(new Date).getTime(),s=this._deltaTime;for(this._deltaTime=(i-this._startTime)/1e3,n=0;n<this._delayTasks.length;n++)t=this._delayTasks[n],i-t.time>t.delay&&(t.func(t.params),this._delayTasks.splice(n,1));for(i=(new Date).getTime(),this._deltaTime=(i-this._startTime)/1e3,e=1e3/60;this._deferTasks.length>0;){if(t=this._deferTasks.shift(),r=(new Date).getTime(),!(r-i<e)){this._deferTasks.unshift(t);break}t.func(t.params)}for(i=(new Date).getTime(),this._deltaTime=(i-this._startTime)/1e3,e=1e3/60;this._usurpTask.length>0;)t=this._usurpTask.shift(),r=(new Date).getTime(),r-i<e&&t.func(t.params);this._highTasks=this._highTasks.concat(this._nextTasks),this._nextTasks=[],this._usurpTask=[],this._isPaused||(this._internalTime+=this._deltaTime-s)}_loop(){this._process(),window.requestAnimationFrame(()=>this._loop())}get intervalTime(){return this._internalTime}get deltaTime(){return this._deltaTime}};var io=class{constructor(t,e=.1){this.easing=e,this._value=t,this._targetValue=t,this._efIndex=no.addEF(()=>this._update())}_update(){this._checkLimit(),this._value+=(this._targetValue-this._value)*this.easing,Math.abs(this._targetValue-this._value)<1e-4&&(this._value=this._targetValue)}setTo(t){this._targetValue=this._value=t}add(t){this._targetValue+=t}limit(t,e){t>e?this.limit(e,t):(this._min=t,this._max=e,this._checkLimit())}_checkLimit(){void 0!==this._min&&this._targetValue<this._min&&(this._targetValue=this._min),void 0!==this._max&&this._targetValue>this._max&&(this._targetValue=this._max)}destroy(){no.removeEF(this._efIndex)}set value(t){this._targetValue=t}get value(){return this._value}get targetValue(){return this._targetValue}};let so=!0;try{let t=document.createEvent("CustomEvent");t=null}catch(t){so=!1}var ao=class{constructor(){this._eventListeners={}}addEventListener(t,e){return null!==this._eventListeners&&void 0!==this._eventListeners||(this._eventListeners={}),this._eventListeners[t]||(this._eventListeners[t]=[]),this._eventListeners[t].push(e),this}on(t,e){return this.addEventListener(t,e)}removeEventListener(t,e){null!==this._eventListeners&&void 0!==this._eventListeners||(this._eventListeners={});const r=this._eventListeners[t];if(void 0===r)return this;let n=r.length;for(let t=0;t<n;t++)r[t]===e&&(r.splice(t,1),t--,n--);return this}off(t,e){return this.removeEventListener(t,e)}dispatchEvent(t){null!==this._eventListeners&&void 0!==this._eventListeners||(this._eventListeners={});const e=t.type;try{null===t.target&&(t.target=this),t.currentTarget=this}catch(r){const n={type:e,detail:t.detail,dispatcher:this};return this.dispatchEvent(n)}const r=this._eventListeners[e];if(null!=r){const e=this._copyArray(r),n=e.length;for(let r=0;r<n;r++){e[r].call(this,t)}}return this}dispatchCustomEvent(t,e){let r;return so?(r=document.createEvent("CustomEvent"),r.dispatcher=this,r.initCustomEvent(t,!1,!1,e)):r={type:t,detail:e,dispatcher:this},this.dispatchEvent(r)}trigger(t,e){return this.dispatchCustomEvent(t,e)}_destroy(){if(null!==this._eventListeners){for(const t in this._eventListeners)if(this._eventListeners.hasOwnProperty(t)){const e=this._eventListeners[t],r=e.length;for(let t=0;t<r;t++)e[t]=null;delete this._eventListeners[t]}this._eventListeners=null}}_copyArray(t){const e=new Array(t.length),r=e.length;for(let n=0;n<r;n++)e[n]=t[n];return e}};function oo(t){return 0!==t&&!(t&t-1)}var uo=function(t,e,r,n){if(!t.minFilter){let e=aa.LINEAR;r&&r&&oo(r)&&oo(n)&&(e=aa.NEAREST_MIPMAP_LINEAR),t.minFilter=e}return t.mipmap=void 0===t.mipmap||t.mipmap,t.magFilter=t.magFilter||aa.LINEAR,t.wrapS=t.wrapS||aa.CLAMP_TO_EDGE,t.wrapT=t.wrapT||aa.CLAMP_TO_EDGE,t.internalFormat=t.internalFormat||aa.RGBA,t.format=t.format||aa.RGBA,t.premultiplyAlpha=void 0!==t.premultiplyAlpha&&t.premultiplyAlpha,t.level=t.level||0,t},ho=r(0),co=r.n(ho);let _o,fo,lo,po;class Eo{constructor(t,e={},r=0,n=0){_o=aa.gl,this._source=t,this._getDimension(t,r,n),this._sourceType=e.type||function(t){let e=aa.UNSIGNED_BYTE;t instanceof Array||t instanceof Uint8Array?e=aa.UNSIGNED_BYTE:t instanceof Float32Array?e=aa.FLOAT:t instanceof HTMLImageElement?e="image":t instanceof HTMLCanvasElement?e="canvas":t instanceof HTMLVideoElement&&(e="video");return e}(t),this._checkSource(),this._texelType=this._getTexelType(),this._isTextureReady=!0,this._params=uo(e,t,this._width,this._height),this._checkMipmap(),this._checkWrapping(),this._texture=_o.createTexture(),"video"===this._sourceType?(this._isTextureReady=!1,no.addEF(()=>this._loop())):this._uploadTexture()}_loop(){4===this._source.readyState&&(this._isTextureReady=!0,this._uploadTexture())}_uploadTexture(){_o.bindTexture(_o.TEXTURE_2D,this._texture),_o.pixelStorei(_o.UNPACK_FLIP_Y_WEBGL,!0),this._isSourceHtmlElement()?_o.texImage2D(_o.TEXTURE_2D,0,this._params.internalFormat,this._params.format,this._texelType,this._source):_o.texImage2D(_o.TEXTURE_2D,0,this._params.internalFormat,this._width,this._height,0,this._params.format,this._texelType,this._source),_o.texParameteri(_o.TEXTURE_2D,_o.TEXTURE_MAG_FILTER,this._params.magFilter),_o.texParameteri(_o.TEXTURE_2D,_o.TEXTURE_MIN_FILTER,this._params.minFilter),_o.texParameteri(_o.TEXTURE_2D,_o.TEXTURE_WRAP_S,this._params.wrapS),_o.texParameteri(_o.TEXTURE_2D,_o.TEXTURE_WRAP_T,this._params.wrapT),_o.pixelStorei(_o.UNPACK_PREMULTIPLY_ALPHA_WEBGL,this._premultiplyAlpha),this._generateMipmap&&_o.generateMipmap(_o.TEXTURE_2D),_o.bindTexture(_o.TEXTURE_2D,null)}bind(t){void 0===t&&(t=0),aa.shader&&(_o.activeTexture(_o.TEXTURE0+t),this._isTextureReady?_o.bindTexture(_o.TEXTURE_2D,this._texture):_o.bindTexture(_o.TEXTURE_2D,Eo.blackTexture().texture),this._bindIndex=t)}updateTexture(t){this._source=t,this._checkSource(),this._uploadTexture()}generateMipmap(){this._generateMipmap&&(_o.bindTexture(_o.TEXTURE_2D,this._texture),_o.generateMipmap(_o.TEXTURE_2D),_o.bindTexture(_o.TEXTURE_2D,null))}showParameters(){for(const t in this._params);}_getDimension(t,e,r){t?(this._width=t.width||t.videoWidth,this._height=t.height||t.videoWidth,this._width=this._width||e,this._height=this._height||r,this._width&&this._height||(this._width=this._height=Math.sqrt(t.length/4))):(this._width=e,this._height=r)}_checkSource(){this._source&&(this._sourceType===aa.UNSIGNED_BYTE?this._source instanceof Uint8Array||(this._source=new Uint8Array(this._source)):this._sourceType===aa.FLOAT&&(this._source instanceof Float32Array||(this._source=new Float32Array(this._source))))}_getTexelType(){return this._isSourceHtmlElement()?aa.UNSIGNED_BYTE:aa[co.a[this._sourceType]]}_checkMipmap(){this._generateMipmap=this._params.mipmap,mo(this._width)&&mo(this._height)||(this._generateMipmap=!1),-1===co.a[this._params.minFilter].indexOf("MIPMAP")&&(this._generateMipmap=!1)}_checkWrapping(){this._generateMipmap||(this._params.wrapS=aa.CLAMP_TO_EDGE,this._params.wrapT=aa.CLAMP_TO_EDGE)}_isSourceHtmlElement(){return"image"===this._sourceType||"video"===this._sourceType||"canvas"===this._sourceType}get minFilter(){return this._params.minFilter}set minFilter(t){this._params.minFilter=t,this._checkMipmap(),_o.bindTexture(_o.TEXTURE_2D,this._texture),_o.texParameteri(_o.TEXTURE_2D,_o.TEXTURE_MIN_FILTER,this._params.minFilter),_o.bindTexture(_o.TEXTURE_2D,null),this.generateMipmap()}get magFilter(){return this._params.minFilter}set magFilter(t){this._params.magFilter=t,_o.bindTexture(_o.TEXTURE_2D,this._texture),_o.texParameteri(_o.TEXTURE_2D,_o.TEXTURE_MAG_FILTER,this._params.magFilter),_o.bindTexture(_o.TEXTURE_2D,null)}get wrapS(){return this._params.wrapS}set wrapS(t){this._params.wrapS=t,this._checkWrapping(),_o.bindTexture(_o.TEXTURE_2D,this._texture),_o.texParameteri(_o.TEXTURE_2D,_o.TEXTURE_WRAP_S,this._params.wrapS),_o.bindTexture(_o.TEXTURE_2D,null)}get wrapT(){return this._params.wrapT}set wrapT(t){this._params.wrapT=t,this._checkWrapping(),_o.bindTexture(_o.TEXTURE_2D,this._texture),_o.texParameteri(_o.TEXTURE_2D,_o.TEXTURE_WRAP_T,this._params.wrapT),_o.bindTexture(_o.TEXTURE_2D,null)}get texelType(){return this._texelType}get width(){return this._width}get height(){return this._height}get texture(){return this._texture}get isTextureReady(){return this._isTextureReady}}function mo(t){return 0!==t&&!(t&t-1)}Eo.whiteTexture=function(){if(void 0===fo){const t=document.createElement("canvas");t.width=t.height=2;const e=t.getContext("2d");e.fillStyle="#fff",e.fillRect(0,0,2,2),fo=new Eo(t)}return fo},Eo.greyTexture=function(){if(void 0===lo){const t=document.createElement("canvas");t.width=t.height=2;const e=t.getContext("2d");e.fillStyle="rgb(127, 127, 127)",e.fillRect(0,0,2,2),lo=new Eo(t)}return lo},Eo.blackTexture=function(){if(void 0===po){const t=document.createElement("canvas");t.width=t.height=2;const e=t.getContext("2d");e.fillStyle="rgb(0, 0, 0)",e.fillRect(0,0,2,2),po=new Eo(t)}return po};var To=Eo;let vo,go,Ro=!1;var Mo=class{constructor(t,e,r={},n=1){this.gl=aa.gl,vo=aa.checkExtension("WEBGL_depth_texture")||aa.webgl2,this.width=t,this.height=e,this._numTargets=n,this._multipleTargets=n>1,this._parameters=r,Ro||aa.webgl2||(go=aa.getExtension("WEBGL_draw_buffers")),this._multipleTargets&&this._checkMaxNumRenderTarget(),this._init()}_init(){const t=this.gl;if(this._initTextures(),this.frameBuffer=t.createFramebuffer(),t.bindFramebuffer(t.FRAMEBUFFER,this.frameBuffer),aa.webgl2){const e=[];for(let r=0;r<this._numTargets;r++)t.framebufferTexture2D(t.DRAW_FRAMEBUFFER,t.COLOR_ATTACHMENT0+r,t.TEXTURE_2D,this._textures[r].texture,0),e.push(t["COLOR_ATTACHMENT"+r]);t.drawBuffers(e),t.framebufferTexture2D(t.DRAW_FRAMEBUFFER,t.DEPTH_ATTACHMENT,t.TEXTURE_2D,this.glDepthTexture.texture,0)}else{for(let e=0;e<this._numTargets;e++)t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0+e,t.TEXTURE_2D,this._textures[e].texture,0);if(this._multipleTargets){const t=[];for(let e=0;e<this._numTargets;e++)t.push(go[`COLOR_ATTACHMENT${e}_WEBGL`]);go.drawBuffersWEBGL(t)}vo&&t.framebufferTexture2D(t.FRAMEBUFFER,t.DEPTH_ATTACHMENT,t.TEXTURE_2D,this.glDepthTexture.texture,0)}t.checkFramebufferStatus(t.FRAMEBUFFER);t.FRAMEBUFFER_COMPLETE,t.bindTexture(t.TEXTURE_2D,null),t.bindRenderbuffer(t.RENDERBUFFER,null),t.bindFramebuffer(t.FRAMEBUFFER,null),this.clear()}_checkMaxNumRenderTarget(){const t=aa.gl.getParameter(go.MAX_DRAW_BUFFERS_WEBGL);this._numTargets>t&&(this._numTargets=t)}_initTextures(){const t=this.gl;this._textures=[];for(let t=0;t<this._numTargets;t++){const t=this._createTexture();this._textures.push(t)}aa.webgl2?this.glDepthTexture=this._createTexture(t.DEPTH_COMPONENT16,t.UNSIGNED_SHORT,t.DEPTH_COMPONENT,{minFilter:aa.NEAREST,magFilter:aa.NEAREST,mipmap:!1}):this.glDepthTexture=this._createTexture(t.DEPTH_COMPONENT,t.UNSIGNED_SHORT,t.DEPTH_COMPONENT,{minFilter:aa.LINEAR})}_createTexture(t,e,r,n={}){const i=this.gl,s=Object.assign({},this._parameters);r||(r=t),s.internalFormat=t||i.RGBA,s.format=r,s.type=s.type||e||aa.UNSIGNED_BYTE,e===i.UNSIGNED_SHORT&&(s.type=e);for(const t in n)s[t]=n[t];return new To(null,s,this.width,this.height)}bind(t=!0){const e=this.gl;t&&aa.viewport(0,0,this.width,this.height),e.bindFramebuffer(e.FRAMEBUFFER,this.frameBuffer)}unbind(t=!0){const e=this.gl;t&&aa.viewport(0,0,aa.width,aa.height),e.bindFramebuffer(e.FRAMEBUFFER,null),this._textures.forEach(t=>{t.generateMipmap()})}clear(t=0,e=0,r=0,n=0){this.bind(),aa.clear(t,e,r,n),this.unbind()}getTexture(t=0){return this._textures[t]}getDepthTexture(){return this.glDepthTexture}destroy(){const t=this.gl;t.deleteFramebuffer(this.framebuffer),this._textures.forEach(e=>{t.deleteTexture(e._texture)}),t.deleteTexture(this.glDepthTexture._texture)}get texture(){return this._textures[0]}get depthTexture(){return this.glDepthTexture}get minFilter(){return this._textures[0].minFilter}set minFilter(t){this._textures.forEach(e=>{e.minFilter=t})}get magFilter(){return this._textures[0].magFilter}set magFilter(t){this._textures.forEach(e=>{e.magFilter=t})}get wrapS(){return this._textures[0].wrapS}set wrapS(t){this._textures.forEach(e=>{e.wrapS=t})}get wrapT(){return this._textures[0].wrapT}set wrapT(t){this._textures.forEach(e=>{e.wrapT=t})}showParameters(){this._textures[0].showParameters()}get numTargets(){return this._numTargets}};var Ao=class{constructor(t,e,r,n={},i=1){this._fbos=[];for(let s=0;s<t;s++){const t=new Mo(e,r,n,i);this._fbos.push(t)}}swap(){const t=this._fbos.shift();this._fbos.push(t)}get read(){return this._fbos[this._fbos.length-1]}get write(){return this._fbos[0]}get all(){return this._fbos}};var xo=class extends Ao{constructor(t,e,r={},n=1){super(2,t,e,r,n)}};const bo={5120:Int8Array,5121:Uint8Array,5122:Int16Array,5123:Uint16Array,5125:Uint32Array,5126:Float32Array},yo={SCALAR:1,VEC2:2,VEC3:3,VEC4:4,MAT2:4,MAT3:9,MAT4:16},Io={NORMAL:"aNormal",POSITION:"aVertexPosition",TEXCOORD_0:"aTextureCoord",WEIGHTS_0:"aWeight",JOINTS_0:"aJoint",COLOR:"aColor"},So=(t,e)=>new Promise((r,n)=>{const{bufferViews:i,buffers:s}=t;i.forEach((t,r)=>{const n=e;t.data=n.slice(t.byteOffset||0,(t.byteOffset||0)+(t.byteLength||0))}),r(t)}),No=t=>new Promise((e,r)=>{const{meshes:n}=t;t.geometries=[],n.forEach((e,r)=>{const{primitives:n}=e,i={};n.forEach((e,r)=>{const n=Object.keys(e.attributes);let s={};if(n.forEach((r,n)=>{const a=e.attributes[r],o=t.accessors[a],u=Io[r];if(!u)return;"NORMAL"===r&&(s.HAS_NORMALS=1),r.indexOf("TEXCOORD")>-1&&(s.HAS_UV=1);const h=yo[o.type];let c=Lo(t,a);c instanceof Uint32Array&&(c=new Float32Array(c)),i[u]={value:c,size:h}}),null!=e.indices){const r=Lo(t,e.indices,!0);i.indices={value:r,size:1}}const a=new ha;for(const t in i){const e=i[t];"indices"!==t?a.bufferFlattenData(e.value,t,e.size):a.bufferIndex(e.value)}if(t.output.meshes.push(a),e.material){const r=t.output.materials[e.material];a.material=r,s=objectAssign(s,a.material.defines),a.defines=s;const n=Shaders.get(ShaderLibs.gltfVert,ShaderLibs.gltfFrag,s),{emissiveFacotr:i,normalTexture:o,occlusionTexture:u,pbrMetallicRoughness:h}=r,{baseColorTexture:c,metallicRoughnessTexture:_}=h,f={uEmissiveFactor:i||[0,0,0],uBaseColor:h.baseColorFactor||[1,1,1,1],uRoughness:h.roughnessFactor||1,uMetallic:h.metallicFactor||1,uScaleDiffBaseMR:[0,0,0,0],uScaleFGDSpec:[0,0,0,0],uScaleIBLAmbient:[1,1,1,1],uLightDirection:[1,1,1],uLightColor:[1,1,1],uGamma:1};c&&(f.uColorMap=c.glTexture),_&&(f.uMetallicRoughnessMap=_.glTexture),o&&(f.uNormalScale=o.scale||1,f.uNormalMap=o.glTexture),u&&(f.uAoMap=u.glTexture,f.uOcclusionStrength=u.strength||1),n.bind(),n.uniform(f),a.material.shader=n,a.material.uniforms=f}t.geometries.push(i)})}),e(t)}),Lo=(t,e,r=!1)=>{const n=t.accessors[e],i=t.bufferViews[n.bufferView].data,s=n.byteOffset||0,a=bo[n.componentType]||Float32Array;let o=yo[n.type];null==o&&r&&(o=1);let u=new a(i,s,o*n.count);const h=n.extensions&&n.extensions.WEB3D_quantized_attributes;if(h){const t=new Float32Array(o*n.count),e=h.decodeMatrix,r=new Array(o),i=new Array(o);for(let t=0;t<o;t++)r[t]=e[o*(o+1)+t],i[t]=e[t*(o+1)+t];for(let e=0;e<n.count;e++)for(let n=0;n<o;n++)t[e*o+n]=u[e*o+n]*i[n]+r[n];u=t}return u};var wo={parse:(t,e)=>new Promise((r,n)=>{t.output={meshes:[],scenes:[],textures:[]},So(t,e).then(No).then(t=>{r(t)}).catch(t=>{})})};var Fo=function(t){t instanceof ArrayBuffer&&(t=new Uint8Array(t));let e=0;const r=t.length;function n(){let n="";do{const r=t[e];if(10===r){++e;break}n+=String.fromCharCode(r)}while(++e<r);return n}let i=0,s=0,a=1,o=!1;for(let t=0;t<20;t++){const t=n();let e;if(e=t.match("#\\?RADIANCE"));else if(e=t.match("FORMAT=32-bit_rle_rgbe"))o=!0;else if(e=t.match("EXPOSURE=\\s*([0-9]*[.][0-9]*)"))a=Number(e[1]);else if(e=t.match("#.*"));else if(e=t.match("-Y ([0-9]+) \\+X ([0-9]+)")){s=Number(e[1]),i=Number(e[2]);break}}if(!o)throw new Error("File is not run length encoded!");const u=new Uint8Array(i*s*4);!function(t,e,r,n,i,s){const a=new Array(4);let o,u,h,c=null;const _=new Array(2),f=t.length;function l(e){let r=0;do{e[r++]=t[n]}while(++n<f&&r<e.length);return r}function d(e,r,i){let s=0;do{e[r+s++]=t[n]}while(++n<f&&s<i);return s}function p(t,e,r,n){const i=4*n,s=d(e,r,i);if(s<i)throw new Error(`Error reading raw pixels: got ${s} bytes, expected ${i}`)}for(;s>0;){if(l(a)<a.length)throw new Error("Error reading bytes: expected "+a.length);if(2!==a[0]||2!==a[1]||0!=(128&a[2]))return e[r++]=a[0],e[r++]=a[1],e[r++]=a[2],e[r++]=a[3],void p(0,e,r,i*s-1);if(((255&a[2])<<8|255&a[3])!==i)throw new Error(`Wrong scanline width ${(255&a[2])<<8|255&a[3]}, expected ${i}`);null===c&&(c=new Array(4*i)),o=0;for(let t=0;t<4;t++)for(u=(t+1)*i;o<u;){if(l(_)<_.length)throw new Error("Error reading 2-byte buffer");if((255&_[0])>128){if(h=(255&_[0])-128,0===h||h>u-o)throw new Error("Bad scanline data");for(;h-- >0;)c[o++]=_[1]}else{if(h=255&_[0],0===h||h>u-o)throw new Error("Bad scanline data");if(c[o++]=_[1],--h>0){if(d(c,o,h)<h)throw new Error("Error reading non-run data");o+=h}}}for(let t=0;t<i;t++)e[r+0]=c[t],e[r+1]=c[t+i],e[r+2]=c[t+2*i],e[r+3]=c[t+3*i],r+=4;s--}}(t,u,0,e,i,s);const h=new Float32Array(i*s*4);for(let t=0;t<u.length;t+=4){let e=u[t+0]/255,r=u[t+1]/255,n=u[t+2]/255;const i=u[t+3],s=Math.pow(2,i-128);e*=s,r*=s,n*=s;const a=t;h[a+0]=e,h[a+1]=r,h[a+2]=n,h[a+3]=1}return{shape:[i,s],exposure:a,gamma:1,data:h}};class Co extends Fa{constructor(){super(!0)}parse(t){return Fo(t)}_onLoaded(){const t=this.parse(this._req.response);this._callback&&this._callback(t)}}Co.parse=function(t){return Fo(t)};var Uo=Co;function Po(t){return 0!==t&&!(t&t-1)}let Oo,Do,Bo,Xo;class Vo{constructor(t,e=!1,r={}){if(Oo=aa.gl,e)this._texture=t;else{this._mSource=t,this._texture=Oo.createTexture(),this._isVideo="VIDEO"===t.tagName,this._premultiplyAlpha=!0,this._magFilter=r.magFilter||Oo.LINEAR,this._minFilter=r.minFilter||Oo.NEAREST_MIPMAP_LINEAR,this._wrapS=r.wrapS||Oo.MIRRORED_REPEAT,this._wrapT=r.wrapT||Oo.MIRRORED_REPEAT,(t.width||t.videoWidth)&&function(t){const e=t.width||t.videoWidth,r=t.height||t.videoHeight;return!(!e||!r)&&(Po(e)&&Po(r))}(t)||(this._wrapS=this._wrapT=Oo.CLAMP_TO_EDGE,this._minFilter===Oo.NEAREST_MIPMAP_LINEAR&&(this._minFilter=Oo.LINEAR)),Oo.bindTexture(Oo.TEXTURE_2D,this._texture),Oo.pixelStorei(Oo.UNPACK_FLIP_Y_WEBGL,!0),t.exposure?Oo.texImage2D(Oo.TEXTURE_2D,0,Oo.RGBA,t.shape[0],t.shape[1],0,Oo.RGBA,Oo.FLOAT,t.data):Oo.texImage2D(Oo.TEXTURE_2D,0,Oo.RGBA,Oo.RGBA,Oo.UNSIGNED_BYTE,t),Oo.texParameteri(Oo.TEXTURE_2D,Oo.TEXTURE_MAG_FILTER,this._magFilter),Oo.texParameteri(Oo.TEXTURE_2D,Oo.TEXTURE_MIN_FILTER,this._minFilter),Oo.texParameteri(Oo.TEXTURE_2D,Oo.TEXTURE_WRAP_S,this._wrapS),Oo.texParameteri(Oo.TEXTURE_2D,Oo.TEXTURE_WRAP_T,this._wrapT);const e=aa.getExtension("EXT_texture_filter_anisotropic");if(e){const t=Oo.getParameter(e.MAX_TEXTURE_MAX_ANISOTROPY_EXT);Oo.texParameterf(Oo.TEXTURE_2D,e.TEXTURE_MAX_ANISOTROPY_EXT,t)}this._canGenerateMipmap()&&Oo.generateMipmap(Oo.TEXTURE_2D),Oo.bindTexture(Oo.TEXTURE_2D,null)}}generateMipmap(){this._canGenerateMipmap()&&(Oo.bindTexture(Oo.TEXTURE_2D,this._texture),Oo.generateMipmap(Oo.TEXTURE_2D),Oo.bindTexture(Oo.TEXTURE_2D,null))}set minFilter(t){if(t!==Oo.LINEAR&&t!==Oo.NEAREST&&t!==Oo.NEAREST_MIPMAP_LINEAR&&t!==Oo.NEAREST_MIPMAP_LINEAR&&t!==Oo.LINEAR_MIPMAP_LINEAR&&t!==Oo.NEAREST_MIPMAP_NEAREST)return this;this._minFilter=t,Oo.bindTexture(Oo.TEXTURE_2D,this._texture),Oo.texParameteri(Oo.TEXTURE_2D,Oo.TEXTURE_MIN_FILTER,this._minFilter),Oo.bindTexture(Oo.TEXTURE_2D,null)}get minFilter(){return this._minFilter}set magFilter(t){if(t!==Oo.LINEAR&&t!==Oo.NEAREST)return this;this._magFilter=t,Oo.bindTexture(Oo.TEXTURE_2D,this._texture),Oo.texParameteri(Oo.TEXTURE_2D,Oo.TEXTURE_MAG_FILTER,this._magFilter),Oo.bindTexture(Oo.TEXTURE_2D,null)}get magFilter(){return this._magFilter}set wrapS(t){if(t!==Oo.CLAMP_TO_EDGE&&t!==Oo.REPEAT&&t!==Oo.MIRRORED_REPEAT)return this;this._wrapS=t,Oo.bindTexture(Oo.TEXTURE_2D,this._texture),Oo.texParameteri(Oo.TEXTURE_2D,Oo.TEXTURE_WRAP_S,this._wrapS),Oo.bindTexture(Oo.TEXTURE_2D,null)}get wrapS(){return this._wrapS}set wrapT(t){if(t!==Oo.CLAMP_TO_EDGE&&t!==Oo.REPEAT&&t!==Oo.MIRRORED_REPEAT)return this;this._wrapT=t,Oo.bindTexture(Oo.TEXTURE_2D,this._texture),Oo.texParameteri(Oo.TEXTURE_2D,Oo.TEXTURE_WRAP_T,this._wrapT),Oo.bindTexture(Oo.TEXTURE_2D,null)}get wrapT(){return this._wrapT}set premultiplyAlpha(t){this._premultiplyAlpha=t,Oo.bindTexture(Oo.TEXTURE_2D,this._texture),Oo.pixelStorei(Oo.UNPACK_PREMULTIPLY_ALPHA_WEBGL,this._premultiplyAlpha),Oo.bindTexture(Oo.TEXTURE_2D,null)}get premultiplyAlpha(){return this._premultiplyAlpha}updateTexture(t){t&&(this._mSource=t),Oo.bindTexture(Oo.TEXTURE_2D,this._texture),Oo.pixelStorei(Oo.UNPACK_FLIP_Y_WEBGL,!0),Oo.texImage2D(Oo.TEXTURE_2D,0,Oo.RGBA,Oo.RGBA,Oo.UNSIGNED_BYTE,this._mSource),Oo.texParameteri(Oo.TEXTURE_2D,Oo.TEXTURE_MAG_FILTER,this._magFilter),Oo.texParameteri(Oo.TEXTURE_2D,Oo.TEXTURE_MIN_FILTER,this._minFilter),this._canGenerateMipmap()&&Oo.generateMipmap(Oo.TEXTURE_2D),Oo.bindTexture(Oo.TEXTURE_2D,null)}bind(t){void 0===t&&(t=0),aa.shader&&(Oo.activeTexture(Oo.TEXTURE0+t),Oo.bindTexture(Oo.TEXTURE_2D,this._texture),this._bindIndex=t)}_canGenerateMipmap(){return this._minFilter===Oo.LINEAR_MIPMAP_NEAREST||this._minFilter===Oo.NEAREST_MIPMAP_LINEAR||this._minFilter===Oo.LINEAR_MIPMAP_LINEAR||this._minFilter===Oo.NEAREST_MIPMAP_NEAREST}get texture(){return this._texture}}Vo.whiteTexture=function(){if(void 0===Do){const t=document.createElement("canvas");t.width=t.height=4;const e=t.getContext("2d");e.fillStyle="#fff",e.fillRect(0,0,4,4),Do=new Vo(t)}return Do},Vo.greyTexture=function(){if(void 0===Bo){const t=document.createElement("canvas");t.width=t.height=4;const e=t.getContext("2d");e.fillStyle="rgb(127, 127, 127)",e.fillRect(0,0,4,4),Bo=new Vo(t)}return Bo},Vo.blackTexture=function(){if(void 0===Xo){const t=document.createElement("canvas");t.width=t.height=4;const e=t.getContext("2d");e.fillStyle="rgb(127, 127, 127)",e.fillRect(0,0,4,4),Xo=new Vo(t)}return Xo};var Go=Vo;let ko;function Ho(t){return 0!==t&&!(t&t-1)}var Yo=class{constructor(t,e,r={}){ko=aa.gl,this.width=t,this.height=e,this.magFilter=r.magFilter||ko.LINEAR,this.minFilter=r.minFilter||ko.LINEAR,this.wrapS=r.wrapS||ko.CLAMP_TO_EDGE,this.wrapT=r.wrapT||ko.CLAMP_TO_EDGE,this.useDepth=r.useDepth||!0,this.useStencil=r.useStencil||!1,this.texelType=r.type,this._numSample=r.numSample||8,Ho(this.width)&&Ho(this.height)||(this.wrapS=this.wrapT=ko.CLAMP_TO_EDGE,this.minFilter===ko.LINEAR_MIPMAP_NEAREST&&(this.minFilter=ko.LINEAR)),this._init()}_init(){let t=ko.UNSIGNED_BYTE;this.texelType&&(t=this.texelType),this.texelType=t,this.frameBuffer=ko.createFramebuffer(),this.frameBufferColor=ko.createFramebuffer(),this.renderBufferColor=ko.createRenderbuffer(),this.renderBufferDepth=ko.createRenderbuffer(),this.glTexture=this._createTexture(),this.glDepthTexture=this._createTexture(ko.DEPTH_COMPONENT16,ko.UNSIGNED_SHORT,ko.DEPTH_COMPONENT,!0),ko.bindRenderbuffer(ko.RENDERBUFFER,this.renderBufferColor),ko.renderbufferStorageMultisample(ko.RENDERBUFFER,this._numSample,ko.RGBA8,this.width,this.height),ko.bindRenderbuffer(ko.RENDERBUFFER,this.renderBufferDepth),ko.renderbufferStorageMultisample(ko.RENDERBUFFER,this._numSample,ko.DEPTH_COMPONENT16,this.width,this.height),ko.bindFramebuffer(ko.FRAMEBUFFER,this.frameBuffer),ko.framebufferRenderbuffer(ko.FRAMEBUFFER,ko.COLOR_ATTACHMENT0,ko.RENDERBUFFER,this.renderBufferColor),ko.framebufferRenderbuffer(ko.FRAMEBUFFER,ko.DEPTH_ATTACHMENT,ko.RENDERBUFFER,this.renderBufferDepth),ko.bindFramebuffer(ko.FRAMEBUFFER,null),ko.bindFramebuffer(ko.FRAMEBUFFER,this.frameBufferColor),ko.framebufferTexture2D(ko.FRAMEBUFFER,ko.COLOR_ATTACHMENT0,ko.TEXTURE_2D,this.glTexture.texture,0),ko.bindFramebuffer(ko.FRAMEBUFFER,null)}_createTexture(t,e,r,n=!1){void 0===t&&(t=ko.RGBA),void 0===e&&(e=this.texelType),r||(r=t);const i=ko.createTexture(),s=new Go(i,!0),a=n?aa.NEAREST:this.magFilter,o=n?aa.NEAREST:this.minFilter;return ko.bindTexture(ko.TEXTURE_2D,i),ko.texParameteri(ko.TEXTURE_2D,ko.TEXTURE_MAG_FILTER,a),ko.texParameteri(ko.TEXTURE_2D,ko.TEXTURE_MIN_FILTER,o),ko.texParameteri(ko.TEXTURE_2D,ko.TEXTURE_WRAP_S,this.wrapS),ko.texParameteri(ko.TEXTURE_2D,ko.TEXTURE_WRAP_T,this.wrapT),ko.texImage2D(ko.TEXTURE_2D,0,t,this.width,this.height,0,r,e,null),ko.bindTexture(ko.TEXTURE_2D,null),s}bind(t=!0){t&&aa.viewport(0,0,this.width,this.height),ko.bindFramebuffer(ko.FRAMEBUFFER,this.frameBuffer)}unbind(t=!0){t&&aa.viewport(0,0,aa.width,aa.height);const{width:e,height:r}=this;ko.bindFramebuffer(ko.FRAMEBUFFER,null),ko.bindFramebuffer(ko.READ_FRAMEBUFFER,this.frameBuffer),ko.bindFramebuffer(ko.DRAW_FRAMEBUFFER,this.frameBufferColor),ko.clearBufferfv(ko.COLOR,0,[0,0,0,0]),ko.blitFramebuffer(0,0,e,r,0,0,e,r,ko.COLOR_BUFFER_BIT,aa.NEAREST),ko.bindFramebuffer(ko.FRAMEBUFFER,null)}getTexture(t=0){return this.glTexture}getDepthTexture(){return this.glDepthTexture}};class Wo extends Fa{load(t,e,r=4){this._drawType=r,super.load(t,e)}_onLoaded(){this.parseObj(this._req.response)}parseObj(t){const e=t.split("\n"),r=[],n=[],i=[],s=[],a=[],o=[],u=[];let h,c=0;const _=/v( +[\d|\.|\+|\-|e|E]+)( +[\d|\.|\+|\-|e|E]+)( +[\d|\.|\+|\-|e|E]+)/,f=/vn( +[\d|\.|\+|\-|e|E]+)( +[\d|\.|\+|\-|e|E]+)( +[\d|\.|\+|\-|e|E]+)/,l=/vt( +[\d|\.|\+|\-|e|E]+)( +[\d|\.|\+|\-|e|E]+)/,d=/f( +-?\d+)( +-?\d+)( +-?\d+)( +-?\d+)?/,p=/f( +(-?\d+)\/(-?\d+))( +(-?\d+)\/(-?\d+))( +(-?\d+)\/(-?\d+))( +(-?\d+)\/(-?\d+))?/,E=/f( +(-?\d+)\/(-?\d+)\/(-?\d+))( +(-?\d+)\/(-?\d+)\/(-?\d+))( +(-?\d+)\/(-?\d+)\/(-?\d+))( +(-?\d+)\/(-?\d+)\/(-?\d+))?/,m=/f( +(-?\d+)\/\/(-?\d+))( +(-?\d+)\/\/(-?\d+))( +(-?\d+)\/\/(-?\d+))( +(-?\d+)\/\/(-?\d+))?/;function T(t){const e=parseInt(t);return 3*(e>=0?e-1:e+s.length/3)}function v(t){const e=parseInt(t);return 3*(e>=0?e-1:e+a.length/3)}function g(t){const e=parseInt(t);return 2*(e>=0?e-1:e+o.length/2)}function R(t,e,n){r.push([s[t],s[t+1],s[t+2]]),r.push([s[e],s[e+1],s[e+2]]),r.push([s[n],s[n+1],s[n+2]]),u.push(3*c+0),u.push(3*c+1),u.push(3*c+2),c++}function M(t,e,r){n.push([o[t],o[t+1]]),n.push([o[e],o[e+1]]),n.push([o[r],o[r+1]])}function A(t,e,r){i.push([a[t],a[t+1],a[t+2]]),i.push([a[e],a[e+1],a[e+2]]),i.push([a[r],a[r+1],a[r+2]])}function x(t,e,r,n,i,s,a,o,u,h,c,_){let f,l=T(t),d=T(e),p=T(r);void 0===n?R(l,d,p):(f=T(n),R(l,d,f),R(d,p,f)),void 0!==i&&(l=g(i),d=g(s),p=g(a),void 0===n?M(l,d,p):(f=g(o),M(l,d,f),M(d,p,f))),void 0!==u&&(l=v(u),d=v(h),p=v(c),void 0===n?A(l,d,p):(f=v(_),A(l,d,f),A(d,p,f)))}for(let t=0;t<e.length;t++){let r=e[t];r=r.trim(),0!==r.length&&"#"!==r.charAt(0)&&(null!==(h=_.exec(r))?s.push(parseFloat(h[1]),parseFloat(h[2]),parseFloat(h[3])):null!==(h=f.exec(r))?a.push(parseFloat(h[1]),parseFloat(h[2]),parseFloat(h[3])):null!==(h=l.exec(r))?o.push(parseFloat(h[1]),parseFloat(h[2])):null!==(h=d.exec(r))?x(h[1],h[2],h[3],h[4]):null!==(h=p.exec(r))?x(h[2],h[5],h[8],h[11],h[3],h[6],h[9],h[12]):null!==(h=E.exec(r))?x(h[2],h[6],h[10],h[14],h[3],h[7],h[11],h[15],h[4],h[8],h[12],h[16]):null!==(h=m.exec(r))&&x(h[2],h[5],h[8],h[11],void 0,void 0,void 0,void 0,h[3],h[6],h[9],h[12]))}return this._generateMeshes({positions:r,coords:n,normals:i,indices:u})}_generateMeshes(t){const e=t.normals.length>0,r=t.coords.length>0;let n;if(t.positions.length>65535){const i=[];let s=0;const a={};for(a.positions=t.positions.concat(),a.coords=t.coords.concat(),a.indices=t.indices.concat(),a.normals=t.normals.concat();t.indices.length>0;){const o=Math.min(65535,t.positions.length),u=t.indices.splice(0,o),h=[],c=[],_=[];let f,l=0;for(let t=0;t<u.length;t++)u[t]>l&&(l=u[t]),f=u[t],h.push(a.positions[f]),r&&c.push(a.coords[f]),e&&_.push(a.normals[f]),u[t]-=s;s=l+1,n=new ha(this._drawType),n.bufferVertex(h),r&&n.bufferTexCoord(c),n.bufferIndex(u),e&&n.bufferNormal(_),i.push(n)}return this._callback&&this._callback(i,a),i}return n=new ha(this._drawType),n.bufferVertex(t.positions),r&&n.bufferTexCoord(t.coords),n.bufferIndex(t.indices),e&&n.bufferNormal(t.normals),this._callback&&this._callback(n,t),n}}Wo.parse=function(t){return(new Wo).parseObj(t)};var zo=Wo;var qo=class{constructor(){this._needUpdate=!0,this._x=0,this._y=0,this._z=0,this._sx=1,this._sy=1,this._sz=1,this._rx=0,this._ry=0,this._rz=0,this._ax=0,this._ay=0,this._az=0,this._position=u.create(),this._scale=u.fromValues(1,1,1),this._rotation=u.create(),this._anchor=u.create(),this._anchorNegative=u.create(),this._matrix=o.create(),this._matrixParent=o.create(),this._matrixRotation=o.create(),this._matrixScale=o.create(),this._matrixTranslation=o.create(),this._matrixQuaternion=o.create(),this._quat=c.create(),this._children=[]}addChild(t){this._children.push(t)}removeChild(t){const e=this._children.indexOf(t);-1!=e&&this._children.splice(e,1)}_update(){this._needUpdate&&(u.set(this._scale,this._sx,this._sy,this._sz),u.set(this._rotation,this._rx,this._ry,this._rz),u.set(this._position,this._x,this._y,this._z),u.set(this._anchor,this._ax,this._ay,this._az),u.set(this._anchorNegative,-this._ax,-this._ay,-this._az),o.identity(this._matrixTranslation,this._matrixTranslation),o.identity(this._matrixScale,this._matrixScale),o.identity(this._matrixRotation,this._matrixRotation),o.translate(this._matrixRotation,this._matrixRotation,this._anchor),o.rotateX(this._matrixRotation,this._matrixRotation,this._rx),o.rotateY(this._matrixRotation,this._matrixRotation,this._ry),o.rotateZ(this._matrixRotation,this._matrixRotation,this._rz),o.translate(this._matrixRotation,this._matrixRotation,this._anchorNegative),o.fromQuat(this._matrixQuaternion,this._quat),o.mul(this._matrixRotation,this._matrixQuaternion,this._matrixRotation),o.scale(this._matrixScale,this._matrixScale,this._scale),o.translate(this._matrixTranslation,this._matrixTranslation,this._position),o.mul(this._matrix,this._matrixTranslation,this._matrixRotation),o.mul(this._matrix,this._matrix,this._matrixScale),o.mul(this._matrix,this._matrixParent,this._matrix),this.updateMatrix(),this._needUpdate=!1)}updateMatrix(t){t&&(this._needUpdate=!0,o.copy(this._matrixParent,t)),this._needUpdate&&this._children.forEach(t=>{t.updateMatrix(this._matrix)})}setRotationFromQuaternion(t){c.copy(this._quat,t),this._needUpdate=!0,no.next(()=>this._update())}get matrix(){return this._needUpdate&&this._update(),this._matrix}get x(){return this._x}set x(t){this._needUpdate=!0,this._x=t,no.next(()=>this._update())}get y(){return this._y}set y(t){this._needUpdate=!0,this._y=t,no.next(()=>this._update())}get z(){return this._z}set z(t){this._needUpdate=!0,this._z=t,no.next(()=>this._update())}get scaleX(){return this._sx}set scaleX(t){this._needUpdate=!0,this._sx=t,no.next(()=>this._update())}get scaleY(){return this._sy}set scaleY(t){this._needUpdate=!0,this._sy=t,no.next(()=>this._update())}get scaleZ(){return this._sz}set scaleZ(t){this._needUpdate=!0,this._sz=t,no.next(()=>this._update())}get rotationX(){return this._rx}set rotationX(t){this._needUpdate=!0,this._rx=t,no.next(()=>this._update())}get rotationY(){return this._ry}set rotationY(t){this._needUpdate=!0,this._ry=t,no.next(()=>this._update())}get rotationZ(){return this._rz}set rotationZ(t){this._needUpdate=!0,this._rz=t,no.next(()=>this._update())}get anchorX(){return this._ax}set anchorX(t){this._needUpdate=!0,this._ax=t,no.next(()=>this._update())}get anchorY(){return this._ay}set anchorY(t){this._needUpdate=!0,this._ay=t,no.next(()=>this._update())}get anchorZ(){return this._az}set anchorZ(t){this._needUpdate=!0,this._az=t,no.next(()=>this._update())}get children(){return this._children}};const jo=function(t,e){const r=e||{};return t.touches?(r.x=t.touches[0].pageX,r.y=t.touches[0].pageY):(r.x=t.clientX,r.y=t.clientY),r};var Zo=class{constructor(t,e=window,r=500){this._target=t,this._listenerTarget=e,this._mouse={},this._preMouse={},this.center=u.create(),this._up=u.fromValues(0,1,0),this.radius=new io(r),this.position=u.fromValues(0,0,this.radius.value),this.positionOffset=u.create(),this._rx=new io(0),this._rx.limit(-Math.PI/2,Math.PI/2),this._ry=new io(0),this._preRX=0,this._preRY=0,this._isLockZoom=!1,this._isLockRotation=!1,this._isInvert=!1,this.sensitivity=1,this._wheelBind=t=>this._onWheel(t),this._downBind=t=>this._onDown(t),this._moveBind=t=>this._onMove(t),this._upBind=()=>this._onUp(),this._efIndex=no.addEF(()=>this._loop())}connect(t){t&&(this._listenerTarget=t),this.disconnect(),this._listenerTarget.addEventListener("mousewheel",this._wheelBind),this._listenerTarget.addEventListener("DOMMouseScroll",this._wheelBind),this._listenerTarget.addEventListener("mousedown",this._downBind),this._listenerTarget.addEventListener("touchstart",this._downBind),this._listenerTarget.addEventListener("mousemove",this._moveBind),this._listenerTarget.addEventListener("touchmove",this._moveBind),window.addEventListener("touchend",this._upBind),window.addEventListener("mouseup",this._upBind)}disconnect(){this._listenerTarget.removeEventListener("mousewheel",this._wheelBind),this._listenerTarget.removeEventListener("DOMMouseScroll",this._wheelBind),this._listenerTarget.removeEventListener("mousedown",this._downBind),this._listenerTarget.removeEventListener("touchstart",this._downBind),this._listenerTarget.removeEventListener("mousemove",this._moveBind),this._listenerTarget.removeEventListener("touchmove",this._moveBind),window.removeEventListener("touchend",this._upBind),window.removeEventListener("mouseup",this._upBind)}lock(t=!0){this._isLockZoom=t,this._isLockRotation=t,this._isMouseDown=!1}lockZoom(t=!0){this._isLockZoom=t}lockRotation(t=!0){this._isLockRotation=t}inverseControl(t=!0){this._isInvert=t}_onDown(t){this._isLockRotation||(this._isMouseDown=!0,jo(t,this._mouse),jo(t,this._preMouse),this._preRX=this._rx.targetValue,this._preRY=this._ry.targetValue)}_onMove(t){if(!this._isLockRotation&&(jo(t,this._mouse),t.touches&&t.preventDefault(),this._isMouseDown)){let t=-(this._mouse.x-this._preMouse.x);this._isInvert&&(t*=-1),this._ry.value=this._preRY-.01*t*this.sensitivity;let e=-(this._mouse.y-this._preMouse.y);this._isInvert&&(e*=-1),this._rx.value=this._preRX-.01*e*this.sensitivity}}_onUp(){this._isLockRotation||(this._isMouseDown=!1)}_onWheel(t){if(this._isLockZoom)return;const e=t.wheelDelta,r=t.detail;let n=0;n=r?e?e/r/40*r>0?1:-1:-r/3:e/120,this.radius.add(2*-n)}_loop(){this._updatePosition(),this._target&&this._updateCamera()}_updatePosition(){this.position[1]=Math.sin(this._rx.value)*this.radius.value;const t=Math.cos(this._rx.value)*this.radius.value;this.position[0]=Math.cos(this._ry.value+.5*Math.PI)*t,this.position[2]=Math.sin(this._ry.value+.5*Math.PI)*t,u.add(this.position,this.position,this.positionOffset)}getPosition(t,e,r){const n=Math.sin(t)*r,i=Math.cos(t)*r;return[Math.cos(e+.5*Math.PI)*i,n,Math.sin(e+.5*Math.PI)*i]}_updateCamera(){this._target.lookAt(this.position,this.center,this._up)}destroy(){this.disconnect(),no.removeEF(this._efIndex)}get rx(){return this._rx}get ry(){return this._ry}};const Ko=function(t,e){const r=e||{};return t.touches?(r.x=t.touches[0].pageX,r.y=t.touches[0].pageY):(r.x=t.clientX,r.y=t.clientY),r};var Qo=class{constructor(t,e=window,r=.1){this._target=t,this._listenerTarget=e,this.matrix=o.create(),this.m=o.create(),this._vZaxis=u.clone([0,0,0]),this._zAxis=u.clone([0,0,1]),this.preMouse={x:0,y:0},this.mouse={x:0,y:0},this._isMouseDown=!1,this._rotation=c.create(),this.tempRotation=c.create(),this._rotateZMargin=0,this._offset=.004,this._slerp=-1,this._isLocked=!1,this._diffX=new io(0,r),this._diffY=new io(0,r),this._listenerTarget.addEventListener("mousedown",t=>this._onDown(t)),this._listenerTarget.addEventListener("touchstart",t=>this._onDown(t)),this._listenerTarget.addEventListener("mousemove",t=>this._onMove(t)),this._listenerTarget.addEventListener("touchmove",t=>this._onMove(t)),window.addEventListener("touchend",()=>this._onUp()),window.addEventListener("mouseup",()=>this._onUp()),no.addEF(()=>this._loop())}inverseControl(t=!0){this._isInvert=t}lock(t=!0){this._isLocked=t}setCameraPos(t,e=.1){if(this.easing=e,this._slerp>0)return;const r=c.clone(this._rotation);this._updateRotation(r),this._rotation=c.clone(r),this._currDiffX=this.diffX=0,this._currDiffY=this.diffY=0,this._isMouseDown=!1,this._isRotateZ=0,this._targetQuat=c.clone(t),this._slerp=1}resetQuat(){this._rotation=c.clone([0,0,1,0]),this.tempRotation=c.clone([0,0,0,0]),this._targetQuat=void 0,this._slerp=-1}_onDown(t){if(this._isLocked)return;const e=Ko(t),r=c.clone(this._rotation);this._updateRotation(r),this._rotation=r,this._isMouseDown=!0,this._isRotateZ=0,this.preMouse={x:e.x,y:e.y},e.y<this._rotateZMargin||e.y>window.innerHeight-this._rotateZMargin?this._isRotateZ=1:(e.x<this._rotateZMargin||e.x>window.innerWidth-this._rotateZMargin)&&(this._isRotateZ=2),this._diffX.setTo(0),this._diffY.setTo(0)}_onMove(t){this._isLocked||Ko(t,this.mouse)}_onUp(){this._isLocked||(this._isMouseDown=!1)}_updateRotation(t){let e,r;if(this._isMouseDown&&!this._isLocked&&(this._diffX.value=-(this.mouse.x-this.preMouse.x),this._diffY.value=this.mouse.y-this.preMouse.y,this._isInvert&&(this._diffX.value=-this._diffX.targetValue,this._diffY.value=-this._diffY.targetValue)),this._isRotateZ>0)1===this._isRotateZ?(e=-this._diffX.value*this._offset,e*=this.preMouse.y<this._rotateZMargin?-1:1,r=c.clone([0,0,Math.sin(e),Math.cos(e)]),c.multiply(r,t,r)):(e=-this._diffY.value*this._offset,e*=this.preMouse.x<this._rotateZMargin?1:-1,r=c.clone([0,0,Math.sin(e),Math.cos(e)]),c.multiply(r,t,r));else{const n=u.clone([this._diffX.value,this._diffY.value,0]),i=u.create();u.cross(i,n,this._zAxis),u.normalize(i,i),e=u.length(n)*this._offset,r=c.clone([Math.sin(e)*i[0],Math.sin(e)*i[1],Math.sin(e)*i[2],Math.cos(e)]),c.multiply(t,r,t)}}_loop(){o.identity(this.m),void 0===this._targetQuat?(c.set(this.tempRotation,this._rotation[0],this._rotation[1],this._rotation[2],this._rotation[3]),this._updateRotation(this.tempRotation)):(this._slerp+=.1*(0-this._slerp),this._slerp<5e-4?(c.copy(this._rotation,this._targetQuat),c.copy(this.tempRotation,this._targetQuat),this._targetQuat=void 0,this._diffX.setTo(0),this._diffY.setTo(0),this._slerp=-1):(c.set(this.tempRotation,0,0,0,0),c.slerp(this.tempRotation,this._targetQuat,this._rotation,this._slerp))),u.transformQuat(this._vZaxis,this._vZaxis,this.tempRotation),o.fromQuat(this.matrix,this.tempRotation)}set easing(t){this._diffX.easing=t,this._diffY.easing=t}get easing(){return this._diffX.easing}};var $o=class{constructor(t={}){this._children=[],this._matrixIdentity=mat4.create(),aa.enableAlphaBlending(),this._init(t),this._initTextures(t),this._initViews(t),this._efIndex=no.addEF(()=>this._loop()),this._targetListener=t.container||window,this._resize=this.resize.bind(this),window.addEventListener("resize",this._resize)}update(){}render(){}stop(){-1!==this._efIndex&&(this._efIndex=no.removeEF(this._efIndex))}start(){-1===this._efIndex&&(this._efIndex=no.addEF(()=>this._loop()))}resize(t,e){aa.setSize(t||window.innerWidth,e||window.innerHeight),this.camera.setAspectRatio(aa.aspectRatio)}addChild(t){this._children.push(t)}removeChild(t){const e=this._children.indexOf(t);-1!=e&&this._children.splice(e,1)}_initTextures(){}_initViews(){}_renderChildren(){let t;for(let e=0;e<this._children.length;e++)t=this._children[e],t.toRender();aa.rotate(this._matrixIdentity)}_init(t){this.camera=new Wa,this.camera.setPerspective(45*Math.PI/180,aa.aspectRatio,.1,100),this.orbitalControl=new Zo(this.camera,this._targetListener,15),t.noControl||this.orbitalControl.connect(),this.orbitalControl.radius.value=10,this.cameraOrtho=new ja}_loop(){aa.viewport(0,0,aa.width,aa.height),aa.setMatrices(this.camera),this.update(),this._renderChildren(),this.render()}destroy(){this.orbitalControl.disconnect(),no.removeEF(this._efIndex),window.removeEventListener("resize",this._resize)}};var Jo={simpleColorFrag:Ra,bigTriangleVert:Aa,generalVert:ga,copyFrag:xa,basicVert:ca,skyboxVert:La,skyboxFrag:Na};var tu=class{constructor(t,e=.1,r=.9){this._value=t,this._targetValue=t,this.speed=e,this.decreaseRate=r,this._velocity=0,this._efIndex=no.addEF(()=>this._update())}_update(){this._checkLimit(),Math.abs(this._targetValue-this._value)<1e-4?this._value=this._targetValue:(this._velocity+=(this._targetValue-this._value)*this.speed,this._value+=this._velocity,this._velocity*=this.decreaseRate,Math.abs(this._targetValue-this._value)<1e-4&&(this._value=this._targetValue))}limit(t,e){t>e?this.limit(e,t):(this._min=t,this._max=e,this._checkLimit())}_checkLimit(){void 0!==this._min&&this._targetValue<this._min&&(this._targetValue=this._min),void 0!==this._max&&this._targetValue>this._max&&(this._targetValue=this._max)}destroy(){no.removeEF(this._efIndex)}set value(t){this._targetValue=t}get value(){return this._value}};let eu;var ru=class{constructor(t,e){eu=aa.gl,this._vs=t,this._fs=e,this._init()}_init(){this._meshCurrent=new ha,this._meshTarget=new ha,this._numPoints=-1,this._varyings=[],this.transformFeedback=eu.createTransformFeedback()}bufferData(t,e,r){const n=!!r;this._meshCurrent.bufferData(t,e,null,eu.STREAM_COPY,!1),this._meshTarget.bufferData(t,e,null,eu.STREAM_COPY,!1),n&&(this._varyings.push(r),this._numPoints<0&&(this._numPoints=t.length))}bufferIndex(t){this._meshCurrent.bufferIndex(t),this._meshTarget.bufferIndex(t)}uniform(t,e,r){this.shader&&this.shader.uniform(t,e,r)}generate(){this.shader=new pa(this._vs,this._fs,this._varyings)}render(){this.shader||this.generate(),this.shader.bind(),aa.drawTransformFeedback(this),this._swap()}_swap(){const t=this._meshCurrent;this._meshCurrent=this._meshTarget,this._meshTarget=t}get numPoints(){return this._numPoints}get meshCurrent(){return this._meshCurrent}get meshTarget(){return this._meshTarget}get meshSource(){return this._meshCurrent}get meshDestination(){return this._meshTarget}};const nu={Linear:{None:t=>t},Quadratic:{In:t=>t*t,Out:t=>t*(2-t),InOut:t=>(t*=2)<1?.5*t*t:-.5*(--t*(t-2)-1)},Cubic:{In:t=>t*t*t,Out:t=>--t*t*t+1,InOut:t=>(t*=2)<1?.5*t*t*t:.5*((t-=2)*t*t+2)},Quartic:{In:t=>t*t*t*t,Out:t=>1- --t*t*t*t,InOut:t=>(t*=2)<1?.5*t*t*t*t:-.5*((t-=2)*t*t*t-2)},Quintic:{In:t=>t*t*t*t*t,Out:t=>--t*t*t*t*t+1,InOut:t=>(t*=2)<1?.5*t*t*t*t*t:.5*((t-=2)*t*t*t*t+2)},Sinusoidal:{In:t=>1-Math.cos(t*Math.PI/2),Out:t=>Math.sin(t*Math.PI/2),InOut:t=>.5*(1-Math.cos(Math.PI*t))},Exponential:{In:t=>0===t?0:Math.pow(1024,t-1),Out:t=>1===t?1:1-Math.pow(2,-10*t),InOut:t=>0===t?0:1===t?1:(t*=2)<1?.5*Math.pow(1024,t-1):.5*(2-Math.pow(2,-10*(t-1)))},Circular:{In:t=>1-Math.sqrt(1-t*t),Out:t=>Math.sqrt(1- --t*t),InOut:t=>(t*=2)<1?-.5*(Math.sqrt(1-t*t)-1):.5*(Math.sqrt(1-(t-=2)*t)+1)},Elastic:{In(t){let e,r=.1;return 0===t?0:1===t?1:(!r||r<1?(r=1,e=.1):e=.4*Math.asin(1/r)/(2*Math.PI),-r*Math.pow(2,10*(t-=1))*Math.sin((t-e)*(2*Math.PI)/.4))},Out(t){let e,r=.1;return 0===t?0:1===t?1:(!r||r<1?(r=1,e=.1):e=.4*Math.asin(1/r)/(2*Math.PI),r*Math.pow(2,-10*t)*Math.sin((t-e)*(2*Math.PI)/.4)+1)},InOut(t){let e,r=.1;const n=.4;return 0===t?0:1===t?1:(!r||r<1?(r=1,e=.1):e=n*Math.asin(1/r)/(2*Math.PI),(t*=2)<1?r*Math.pow(2,10*(t-=1))*Math.sin((t-e)*(2*Math.PI)/n)*-.5:r*Math.pow(2,-10*(t-=1))*Math.sin((t-e)*(2*Math.PI)/n)*.5+1)}},Back:{In(t){const e=1.70158;return t*t*((e+1)*t-e)},Out(t){const e=1.70158;return--t*t*((e+1)*t+e)+1},InOut(t){const e=2.5949095;return(t*=2)<1?t*t*((e+1)*t-e)*.5:.5*((t-=2)*t*((e+1)*t+e)+2)}},Bounce:{in:t=>1-nu.Bounce.out(1-t),out:t=>t<1/2.75?7.5625*t*t:t<2/2.75?7.5625*(t-=1.5/2.75)*t+.75:t<2.5/2.75?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375,inOut:t=>t<.5?.5*nu.Bounce.in(2*t):.5*nu.Bounce.out(2*t-1)+.5}};var iu=class{constructor(t,e="expOut",r=.01){this._value=t,this._startValue=t,this._targetValue=t,this._counter=1,this.speed=r,this.easing=e,this._needUpdate=!0,this._efIndex=no.addEF(()=>this._update())}_update(){let t=this._counter+this.speed;t>1&&(t=1),this._counter!==t?(this._counter=t,this._needUpdate=!0):this._needUpdate=!1}limit(t,e){t>e?this.limit(e,t):(this._min=t,this._max=e,this._checkLimit())}setTo(t){this._value=t,this._targetValue=t,this._counter=1}_checkLimit(){void 0!==this._min&&this._targetValue<this._min&&(this._targetValue=this._min),void 0!==this._max&&this._targetValue>this._max&&(this._targetValue=this._max)}destroy(){no.removeEF(this._efIndex)}set value(t){this._startValue=this._value,this._targetValue=t,this._checkLimit(),this._counter=0}get value(){if(this._needUpdate){const t=function(t){switch(t){default:case"linear":return nu.Linear.None;case"expIn":return nu.Exponential.In;case"expOut":return nu.Exponential.Out;case"expInOut":return nu.Exponential.InOut;case"cubicIn":return nu.Cubic.In;case"cubicOut":return nu.Cubic.Out;case"cubicInOut":return nu.Cubic.InOut;case"quarticIn":return nu.Quartic.In;case"quarticOut":return nu.Quartic.Out;case"quarticInOut":return nu.Quartic.InOut;case"quinticIn":return nu.Quintic.In;case"quinticOut":return nu.Quintic.Out;case"quinticInOut":return nu.Quintic.InOut;case"sinusoidalIn":return nu.Sinusoidal.In;case"sinusoidalOut":return nu.Sinusoidal.Out;case"sinusoidalInOut":return nu.Sinusoidal.InOut;case"circularIn":return nu.Circular.In;case"circularOut":return nu.Circular.Out;case"circularInOut":return nu.Circular.InOut;case"elasticIn":return nu.Elastic.In;case"elasticOut":return nu.Elastic.Out;case"elasticInOut":return nu.Elastic.InOut;case"backIn":return nu.Back.In;case"backOut":return nu.Back.Out;case"backInOut":return nu.Back.InOut;case"bounceIn":return nu.Bounce.in;case"bounceOut":return nu.Bounce.out;case"bounceInOut":return nu.Bounce.inOut}}(this.easing)(this._counter);this._value=this._startValue+t*(this._targetValue-this._startValue),this._needUpdate=!1}return this._value}get targetValue(){return this._targetValue}};var su=class{constructor(t,e){this.shader=new pa(t,e),this._init()}_init(){}render(){}destroy(){this.shader.destroy()}};var au=class extends qo{constructor(t,e){super(),this._children=[],this.shader=new pa(t,e),this._init()}_init(){}render(){}destroy(){this.shader.destroy()}};var ou=new class{constructor(){this.glm=l,this.GL=aa,this.GLTool=aa,this.GLShader=pa,this.GLTexture=To,this.GLCubeTexture=Ja,this.Mesh=ha,this.Geom=va,this.Batch=oa,this.FrameBuffer=Mo,this.CubeFrameBuffer=eo,this.Scheduler=no,this.EventDispatcher=ao,this.EaseNumber=io,this.SpringNumber=tu,this.TweenNumber=iu,this.Camera=Ca,this.CameraOrtho=ja,this.CameraPerspective=Wa,this.Ray=ka,this.CameraCube=qa,this.OrbitalControl=Zo,this.QuatRotation=Qo,this.BinaryLoader=Fa,this.ObjLoader=zo,this.GLTFParser=wo,this.HDRLoader=Uo,this.BatchCopy=ba,this.BatchAxis=Ea,this.BatchBall=Ma,this.BatchBall=Ma,this.BatchLine=Ia,this.BatchSkybox=wa,this.BatchSky=Sa,this.BatchDotsPlane=ya,this.Scene=$o,this.View=su,this.View3D=au,this.Draw=ro,this.Object3D=qo,this.ShaderLibs=Jo,this.WebglNumber=co.a,this.FboArray=Ao,this.FboPingPong=xo,this.MultisampleFrameBuffer=Yo,this.TransformFeedbackObject=ru;for(const t in l)l[t]&&window&&(window[t]=l[t])}log(){navigator.userAgent.indexOf("Chrome");for(const t in this)this[t]}};const uu={};let hu,cu=[],_u=[];uu.init=function(t,e){hu=t;let r={};cu=e.map(t=>{const e=function(t){const e=t.split(".");return e[e.length-1]}(t.url),n=(i=t.id,hu.find(t=>t.id===i).file);var i;let s;switch(e){case"jpg":case"png":return s=new To(n),_u.push(s),{id:t.id,file:s};case"hdr":let e=t.id.split("_")[0];s=ou.HDRLoader.parse(n);const i={id:t.id,file:s};return r[e]||(r[e]=[]),r[e].push(i),i;case"dds":return s=Ja.parseDDS(n),{id:t.id,file:s};case"obj":const a=zo.parse(n);return{id:t.id,file:a}}});for(let t in r)if(6==r[t].length){const e=[uu.get(t+"_posx"),uu.get(t+"_negx"),uu.get(t+"_posy"),uu.get(t+"_negy"),uu.get(t+"_posz"),uu.get(t+"_negz")],r=new ou.GLCubeTexture(e);cu.push({id:t,file:r})}cu.length},uu.destroy=t=>{for(let e=0;e<_u.length;e++)t.deleteTexture(_u[e]._texture);_u.length=0},uu.get=function(t){return cu.find(e=>e.id===t).file};var fu=uu,lu={active:!1};function du(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function pu(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,t.__proto__=e}var Eu,mu,Tu,vu,gu,Ru,Mu,Au,xu,bu,yu,Iu,Su,Nu,Lu,wu,Fu,Cu,Uu,Pu,Ou,Du,Bu,Xu,Vu,Gu={autoSleep:120,force3D:"auto",nullTargetWarn:1,units:{lineHeight:""}},ku={duration:.5,overwrite:!1,delay:0},Hu=1e8,Yu=2*Math.PI,Wu=Yu/4,zu=0,qu=Math.sqrt,ju=Math.cos,Zu=Math.sin,Ku=function(t){return"string"==typeof t},Qu=function(t){return"function"==typeof t},$u=function(t){return"number"==typeof t},Ju=function(t){return void 0===t},th=function(t){return"object"==typeof t},eh=function(t){return!1!==t},rh=function(){return"undefined"!=typeof window},nh=function(t){return Qu(t)||Ku(t)},ih=Array.isArray,sh=/(?:-?\.?\d|\.)+/gi,ah=/[-+=.]*\d+[.e\-+]*\d*[e\-\+]*\d*/g,oh=/[-+=.]*\d+[.e-]*\d*[a-z%]*/g,uh=/[-+=.]*\d+(?:\.|e-|e)*\d*/gi,hh=/\(([^()]+)\)/i,ch=/[+-]=-?[\.\d]+/,_h=/[#\-+.]*\b[a-z\d-=+%.]+/gi,fh={},lh={},dh=function(t){return(lh=Xh(t,fh))&&T_},ph=function(t,e){return!e&&void 0},Eh=function(t,e){return t&&(fh[t]=e)&&lh&&(lh[t]=e)||fh},mh=function(){return 0},Th={},vh=[],gh={},Rh={},Mh={},Ah=30,xh=[],bh="",yh=function(t){var e,r,n=t[0];if(th(n)||Qu(n)||(t=[t]),!(e=(n._gsap||{}).harness)){for(r=xh.length;r--&&!xh[r].targetTest(n););e=xh[r]}for(r=t.length;r--;)t[r]&&(t[r]._gsap||(t[r]._gsap=new Hc(t[r],e)))||t.splice(r,1);return t},Ih=function(t){return t._gsap||yh(cc(t))[0]._gsap},Sh=function(t,e){var r=t[e];return Qu(r)?t[e]():Ju(r)&&t.getAttribute(e)||r},Nh=function(t,e){return(t=t.split(",")).forEach(e)||t},Lh=function(t){return Math.round(1e5*t)/1e5||0},wh=function(t,e){for(var r=e.length,n=0;t.indexOf(e[n])<0&&++n<r;);return n<r},Fh=function(t,e,r){var n,i=$u(t[1]),s=(i?2:1)+(e<2?0:1),a=t[s];if(i&&(a.duration=t[1]),a.parent=r,e){for(n=a;r&&!("immediateRender"in n);)n=r.vars.defaults||{},r=eh(r.vars.inherit)&&r.parent;a.immediateRender=eh(n.immediateRender),e<2?a.runBackwards=1:a.startAt=t[s-1]}return a},Ch=function(){var t,e,r=vh.length,n=vh.slice(0);for(gh={},vh.length=0,t=0;t<r;t++)(e=n[t])&&e._lazy&&(e.render(e._lazy[0],e._lazy[1],!0)._lazy=0)},Uh=function(t,e,r,n){vh.length&&Ch(),t.render(e,r,n),vh.length&&Ch()},Ph=function(t){var e=parseFloat(t);return(e||0===e)&&(t+"").match(_h).length<2?e:t},Oh=function(t){return t},Dh=function(t,e){for(var r in e)r in t||(t[r]=e[r]);return t},Bh=function(t,e){for(var r in e)r in t||"duration"===r||"ease"===r||(t[r]=e[r])},Xh=function(t,e){for(var r in e)t[r]=e[r];return t},Vh=function t(e,r){for(var n in r)e[n]=th(r[n])?t(e[n]||(e[n]={}),r[n]):r[n];return e},Gh=function(t,e){var r,n={};for(r in t)r in e||(n[r]=t[r]);return n},kh=function(t){var e=t.parent||Eu,r=t.keyframes?Bh:Dh;if(eh(t.inherit))for(;e;)r(t,e.vars.defaults),e=e.parent;return t},Hh=function(t,e,r,n){void 0===r&&(r="_first"),void 0===n&&(n="_last");var i=e._prev,s=e._next;i?i._next=s:t[r]===e&&(t[r]=s),s?s._prev=i:t[n]===e&&(t[n]=i),e._next=e._prev=e.parent=null},Yh=function(t,e){!t.parent||e&&!t.parent.autoRemoveChildren||t.parent.remove(t),t._act=0},Wh=function(t){for(var e=t;e;)e._dirty=1,e=e.parent;return t},zh=function(t){for(var e=t.parent;e&&e.parent;)e._dirty=1,e.totalDuration(),e=e.parent;return t},qh=function(t){return t._repeat?jh(t._tTime,t=t.duration()+t._rDelay)*t:0},jh=function(t,e){return(t/=e)&&~~t===t?~~t-1:~~t},Zh=function(t,e){return(t-e._start)*e._ts+(e._ts>=0?0:e._dirty?e.totalDuration():e._tDur)},Kh=function(t){return t._end=Lh(t._start+(t._tDur/Math.abs(t._ts||t._rts||1e-8)||0))},Qh=function(t,e){var r;if((e._time||e._initted&&!e._dur)&&(r=Zh(t.rawTime(),e),(!e._dur||sc(0,e.totalDuration(),r)-e._tTime>1e-8)&&e.render(r,!0)),Wh(t)._dp&&t._initted&&t._time>=t._dur&&t._ts){if(t._dur<t.duration())for(r=t;r._dp;)r.rawTime()>=0&&r.totalTime(r._tTime),r=r._dp;t._zTime=-1e-8}},$h=function(t,e,r,n){return e.parent&&Yh(e),e._start=Lh(r+e._delay),e._end=Lh(e._start+(e.totalDuration()/Math.abs(e.timeScale())||0)),function(t,e,r,n,i){void 0===r&&(r="_first"),void 0===n&&(n="_last");var s,a=t[n];if(i)for(s=e[i];a&&a[i]>s;)a=a._prev;a?(e._next=a._next,a._next=e):(e._next=t[r],t[r]=e),e._next?e._next._prev=e:t[n]=e,e._prev=a,e.parent=e._dp=t}(t,e,"_first","_last",t._sort?"_start":0),t._recent=e,n||Qh(t,e),t},Jh=function(t,e,r,n){return Kc(t,e),t._initted?!r&&t._pt&&(t._dur&&!1!==t.vars.lazy||!t._dur&&t.vars.lazy)&&Ru!==wc.frame?(vh.push(t),t._lazy=[e,n],1):void 0:1},tc=function(t,e,r){var n=t._repeat,i=Lh(e)||0;return t._dur=i,t._tDur=n?n<0?1e12:Lh(i*(n+1)+t._rDelay*n):i,t._time>i&&(t._time=i,t._tTime=Math.min(t._tTime,t._tDur)),!r&&Wh(t.parent),t.parent&&Kh(t),t},ec=function(t){return t instanceof Wc?Wh(t):tc(t,t._dur)},rc={_start:0,endTime:mh},nc=function t(e,r){var n,i,s=e.labels,a=e._recent||rc,o=e.duration()>=Hu?a.endTime(!1):e._dur;return Ku(r)&&(isNaN(r)||r in s)?"<"===(n=r.charAt(0))||">"===n?("<"===n?a._start:a.endTime(a._repeat>=0))+(parseFloat(r.substr(1))||0):(n=r.indexOf("="))<0?(r in s||(s[r]=o),s[r]):(i=+(r.charAt(n-1)+r.substr(n+1)),n>1?t(e,r.substr(0,n-1))+i:o+i):null==r?o:+r},ic=function(t,e){return t||0===t?e(t):e},sc=function(t,e,r){return r<t?t:r>e?e:r},ac=function(t){return(t+"").substr((parseFloat(t)+"").length)},oc=[].slice,uc=function(t,e){return t&&th(t)&&"length"in t&&(!e&&!t.length||t.length-1 in t&&th(t[0]))&&!t.nodeType&&t!==mu},hc=function(t,e,r){return void 0===r&&(r=[]),t.forEach((function(t){var n;return Ku(t)&&!e||uc(t,1)?(n=r).push.apply(n,cc(t)):r.push(t)}))||r},cc=function(t,e){return!Ku(t)||e||!Tu&&Fc()?ih(t)?hc(t,e):uc(t)?oc.call(t,0):t?[t]:[]:oc.call(vu.querySelectorAll(t),0)},_c=function(t){return t.sort((function(){return.5-Math.random()}))},fc=function(t){if(Qu(t))return t;var e=th(t)?t:{each:t},r=Bc(e.ease),n=e.from||0,i=parseFloat(e.base)||0,s={},a=n>0&&n<1,o=isNaN(n)||a,u=e.axis,h=n,c=n;return Ku(n)?h=c={center:.5,edges:.5,end:1}[n]||0:!a&&o&&(h=n[0],c=n[1]),function(t,a,_){var f,l,d,p,E,m,T,v,g,R=(_||e).length,M=s[R];if(!M){if(!(g="auto"===e.grid?0:(e.grid||[1,Hu])[1])){for(T=-Hu;T<(T=_[g++].getBoundingClientRect().left)&&g<R;);g--}for(M=s[R]=[],f=o?Math.min(g,R)*h-.5:n%g,l=o?R*c/g-.5:n/g|0,T=0,v=Hu,m=0;m<R;m++)d=m%g-f,p=l-(m/g|0),M[m]=E=u?Math.abs("y"===u?p:d):qu(d*d+p*p),E>T&&(T=E),E<v&&(v=E);"random"===n&&_c(M),M.max=T-v,M.min=v,M.v=R=(parseFloat(e.amount)||parseFloat(e.each)*(g>R?R-1:u?"y"===u?R/g:g:Math.max(g,R/g))||0)*("edges"===n?-1:1),M.b=R<0?i-R:i,M.u=ac(e.amount||e.each)||0,r=r&&R<0?Dc(r):r}return R=(M[t]-M.min)/M.max||0,Lh(M.b+(r?r(R):R)*M.v)+M.u}},lc=function(t){var e=t<1?Math.pow(10,(t+"").length-2):1;return function(r){return~~(Math.round(parseFloat(r)/t)*t*e)/e+($u(r)?0:ac(r))}},dc=function(t,e){var r,n,i=ih(t);return!i&&th(t)&&(r=i=t.radius||Hu,t.values?(t=cc(t.values),(n=!$u(t[0]))&&(r*=r)):t=lc(t.increment)),ic(e,i?Qu(t)?function(e){return n=t(e),Math.abs(n-e)<=r?n:e}:function(e){for(var i,s,a=parseFloat(n?e.x:e),o=parseFloat(n?e.y:0),u=Hu,h=0,c=t.length;c--;)(i=n?(i=t[c].x-a)*i+(s=t[c].y-o)*s:Math.abs(t[c]-a))<u&&(u=i,h=c);return h=!r||u<=r?t[h]:e,n||h===e||$u(e)?h:h+ac(e)}:lc(t))},pc=function(t,e,r,n){return ic(ih(t)?!e:!0===r?!!(r=0):!n,(function(){return ih(t)?t[~~(Math.random()*t.length)]:(r=r||1e-5)&&(n=r<1?Math.pow(10,(r+"").length-2):1)&&~~(Math.round((t+Math.random()*(e-t))/r)*r*n)/n}))},Ec=function(t,e,r){return ic(r,(function(r){return t[~~e(r)]}))},mc=function(t){for(var e,r,n,i,s=0,a="";~(e=t.indexOf("random(",s));)n=t.indexOf(")",e),i="["===t.charAt(e+7),r=t.substr(e+7,n-e-7).match(i?_h:sh),a+=t.substr(s,e-s)+pc(i?r:+r[0],+r[1],+r[2]||1e-5),s=n+1;return a+t.substr(s,t.length-s)},Tc=function(t,e,r,n,i){var s=e-t,a=n-r;return ic(i,(function(e){return r+(e-t)/s*a}))},vc=function(t,e,r){var n,i,s,a=t.labels,o=Hu;for(n in a)(i=a[n]-e)<0==!!r&&i&&o>(i=Math.abs(i))&&(s=n,o=i);return s},gc=function(t,e,r){var n,i,s=t.vars,a=s[e];if(a)return n=s[e+"Params"],i=s.callbackScope||t,r&&vh.length&&Ch(),n?a.apply(i,n):a.call(i)},Rc=function(t){return Yh(t),t.progress()<1&&gc(t,"onInterrupt"),t},Mc=function(t){var e=(t=!t.name&&t.default||t).name,r=Qu(t),n=e&&!r&&t.init?function(){this._props=[]}:t,i={init:mh,render:h_,add:jc,kill:__,modifier:c_,rawVars:0},s={targetTest:0,get:0,getSetter:s_,aliases:{},register:0};if(Fc(),t!==n){if(Rh[e])return;Dh(n,Dh(Gh(t,i),s)),Xh(n.prototype,Xh(i,Gh(t,s))),Rh[n.prop=e]=n,t.targetTest&&(xh.push(n),Th[e]=1),e=("css"===e?"CSS":e.charAt(0).toUpperCase()+e.substr(1))+"Plugin"}Eh(e,n),t.register&&t.register(T_,n,d_)},Ac={aqua:[0,255,255],lime:[0,255,0],silver:[192,192,192],black:[0,0,0],maroon:[128,0,0],teal:[0,128,128],blue:[0,0,255],navy:[0,0,128],white:[255,255,255],olive:[128,128,0],yellow:[255,255,0],orange:[255,165,0],gray:[128,128,128],purple:[128,0,128],green:[0,128,0],red:[255,0,0],pink:[255,192,203],cyan:[0,255,255],transparent:[255,255,255,0]},xc=function(t,e,r){return 255*(6*(t=t<0?t+1:t>1?t-1:t)<1?e+(r-e)*t*6:t<.5?r:3*t<2?e+(r-e)*(2/3-t)*6:e)+.5|0},bc=function(t,e,r){var n,i,s,a,o,u,h,c,_,f,l=t?$u(t)?[t>>16,t>>8&255,255&t]:0:Ac.black;if(!l){if(","===t.substr(-1)&&(t=t.substr(0,t.length-1)),Ac[t])l=Ac[t];else if("#"===t.charAt(0))4===t.length&&(n=t.charAt(1),i=t.charAt(2),s=t.charAt(3),t="#"+n+n+i+i+s+s),l=[(t=parseInt(t.substr(1),16))>>16,t>>8&255,255&t];else if("hsl"===t.substr(0,3))if(l=f=t.match(sh),e){if(~t.indexOf("="))return l=t.match(ah),r&&l.length<4&&(l[3]=1),l}else a=+l[0]%360/360,o=+l[1]/100,n=2*(u=+l[2]/100)-(i=u<=.5?u*(o+1):u+o-u*o),l.length>3&&(l[3]*=1),l[0]=xc(a+1/3,n,i),l[1]=xc(a,n,i),l[2]=xc(a-1/3,n,i);else l=t.match(sh)||Ac.transparent;l=l.map(Number)}return e&&!f&&(n=l[0]/255,i=l[1]/255,s=l[2]/255,u=((h=Math.max(n,i,s))+(c=Math.min(n,i,s)))/2,h===c?a=o=0:(_=h-c,o=u>.5?_/(2-h-c):_/(h+c),a=h===n?(i-s)/_+(i<s?6:0):h===i?(s-n)/_+2:(n-i)/_+4,a*=60),l[0]=~~(a+.5),l[1]=~~(100*o+.5),l[2]=~~(100*u+.5)),r&&l.length<4&&(l[3]=1),l},yc=function(t){var e=[],r=[],n=-1;return t.split(Sc).forEach((function(t){var i=t.match(oh)||[];e.push.apply(e,i),r.push(n+=i.length+1)})),e.c=r,e},Ic=function(t,e,r){var n,i,s,a,o="",u=(t+o).match(Sc),h=e?"hsla(":"rgba(",c=0;if(!u)return t;if(u=u.map((function(t){return(t=bc(t,e,1))&&h+(e?t[0]+","+t[1]+"%,"+t[2]+"%,"+t[3]:t.join(","))+")"})),r&&(s=yc(t),(n=r.c).join(o)!==s.c.join(o)))for(a=(i=t.replace(Sc,"1").split(oh)).length-1;c<a;c++)o+=i[c]+(~n.indexOf(c)?u.shift()||h+"0,0,0,0)":(s.length?s:u.length?u:r).shift());if(!i)for(a=(i=t.split(Sc)).length-1;c<a;c++)o+=i[c]+u[c];return o+i[a]},Sc=function(){var t,e="(?:\\b(?:(?:rgb|rgba|hsl|hsla)\\(.+?\\))|\\B#(?:[0-9a-f]{3}){1,2}\\b";for(t in Ac)e+="|"+t+"\\b";return new RegExp(e+")","gi")}(),Nc=/hsl[a]?\(/,Lc=function(t){var e,r=t.join(" ");if(Sc.lastIndex=0,Sc.test(r))return e=Nc.test(r),t[1]=Ic(t[1],e),t[0]=Ic(t[0],e,yc(t[1])),!0},wc=(Su=Date.now,Nu=500,Lu=33,wu=Su(),Fu=wu,Uu=Cu=1/240,Ou=function t(e){var r,n,i=Su()-Fu,s=!0===e;i>Nu&&(wu+=i-Lu),Fu+=i,Iu.time=(Fu-wu)/1e3,((r=Iu.time-Uu)>0||s)&&(Iu.frame++,Uu+=r+(r>=Cu?.004:Cu-r),n=1),s||(xu=bu(t)),n&&Pu.forEach((function(t){return t(Iu.time,i,Iu.frame,e)}))},Iu={time:0,frame:0,tick:function(){Ou(!0)},wake:function(){gu&&(!Tu&&rh()&&(mu=Tu=window,vu=mu.document||{},fh.gsap=T_,(mu.gsapVersions||(mu.gsapVersions=[])).push(T_.version),dh(lh||mu.GreenSockGlobals||!mu.gsap&&mu||{}),yu=mu.requestAnimationFrame),xu&&Iu.sleep(),bu=yu||function(t){return setTimeout(t,1e3*(Uu-Iu.time)+1|0)},Au=1,Ou(2))},sleep:function(){(yu?mu.cancelAnimationFrame:clearTimeout)(xu),Au=0,bu=mh},lagSmoothing:function(t,e){Nu=t||1/1e-8,Lu=Math.min(e,Nu,0)},fps:function(t){Cu=1/(t||240),Uu=Iu.time+Cu},add:function(t){Pu.indexOf(t)<0&&Pu.push(t),Fc()},remove:function(t){var e;~(e=Pu.indexOf(t))&&Pu.splice(e,1)},_listeners:Pu=[]}),Fc=function(){return!Au&&wc.wake()},Cc={},Uc=/^[\d.\-M][\d.\-,\s]/,Pc=/["']/g,Oc=function(t){for(var e,r,n,i={},s=t.substr(1,t.length-3).split(":"),a=s[0],o=1,u=s.length;o<u;o++)r=s[o],e=o!==u-1?r.lastIndexOf(","):r.length,n=r.substr(0,e),i[a]=isNaN(n)?n.replace(Pc,"").trim():+n,a=r.substr(e+1).trim();return i},Dc=function(t){return function(e){return 1-t(1-e)}},Bc=function(t,e){return t&&(Qu(t)?t:Cc[t]||function(t){var e=(t+"").split("("),r=Cc[e[0]];return r&&e.length>1&&r.config?r.config.apply(null,~t.indexOf("{")?[Oc(e[1])]:hh.exec(t)[1].split(",").map(Ph)):Cc._CE&&Uc.test(t)?Cc._CE("",t):r}(t))||e},Xc=function(t,e,r,n){void 0===r&&(r=function(t){return 1-e(1-t)}),void 0===n&&(n=function(t){return t<.5?e(2*t)/2:1-e(2*(1-t))/2});var i,s={easeIn:e,easeOut:r,easeInOut:n};return Nh(t,(function(t){for(var e in Cc[t]=fh[t]=s,Cc[i=t.toLowerCase()]=r,s)Cc[i+("easeIn"===e?".in":"easeOut"===e?".out":".inOut")]=Cc[t+"."+e]=s[e]})),s},Vc=function(t){return function(e){return e<.5?(1-t(1-2*e))/2:.5+t(2*(e-.5))/2}},Gc=function t(e,r,n){var i=r>=1?r:1,s=(n||(e?.3:.45))/(r<1?r:1),a=s/Yu*(Math.asin(1/i)||0),o=function(t){return 1===t?1:i*Math.pow(2,-10*t)*Zu((t-a)*s)+1},u="out"===e?o:"in"===e?function(t){return 1-o(1-t)}:Vc(o);return s=Yu/s,u.config=function(r,n){return t(e,r,n)},u},kc=function t(e,r){void 0===r&&(r=1.70158);var n=function(t){return t?--t*t*((r+1)*t+r)+1:0},i="out"===e?n:"in"===e?function(t){return 1-n(1-t)}:Vc(n);return i.config=function(r){return t(e,r)},i};Nh("Linear,Quad,Cubic,Quart,Quint,Strong",(function(t,e){var r=e<5?e+1:e;Xc(t+",Power"+(r-1),e?function(t){return Math.pow(t,r)}:function(t){return t},(function(t){return 1-Math.pow(1-t,r)}),(function(t){return t<.5?Math.pow(2*t,r)/2:1-Math.pow(2*(1-t),r)/2}))})),Cc.Linear.easeNone=Cc.none=Cc.Linear.easeIn,Xc("Elastic",Gc("in"),Gc("out"),Gc()),Du=7.5625,Xu=1/(Bu=2.75),Xc("Bounce",(function(t){return 1-Vu(1-t)}),Vu=function(t){return t<Xu?Du*t*t:t<.7272727272727273?Du*Math.pow(t-1.5/Bu,2)+.75:t<.9090909090909092?Du*(t-=2.25/Bu)*t+.9375:Du*Math.pow(t-2.625/Bu,2)+.984375}),Xc("Expo",(function(t){return t?Math.pow(2,10*(t-1)):0})),Xc("Circ",(function(t){return-(qu(1-t*t)-1)})),Xc("Sine",(function(t){return 1-ju(t*Wu)})),Xc("Back",kc("in"),kc("out"),kc()),Cc.SteppedEase=Cc.steps=fh.SteppedEase={config:function(t,e){void 0===t&&(t=1);var r=1/t,n=t+(e?0:1),i=e?1:0;return function(t){return((n*sc(0,1-1e-8,t)|0)+i)*r}}},ku.ease=Cc["quad.out"],Nh("onComplete,onUpdate,onStart,onRepeat,onReverseComplete,onInterrupt",(function(t){return bh+=t+","+t+"Params,"}));var Hc=function(t,e){this.id=zu++,t._gsap=this,this.target=t,this.harness=e,this.get=e?e.get:Sh,this.set=e?e.getSetter:s_},Yc=function(){function t(t,e){var r=t.parent||Eu;this.vars=t,this._delay=+t.delay||0,(this._repeat=t.repeat||0)&&(this._rDelay=t.repeatDelay||0,this._yoyo=!!t.yoyo||!!t.yoyoEase),this._ts=1,tc(this,+t.duration,1),this.data=t.data,Au||wc.wake(),r&&$h(r,this,e||0===e?e:r._time,1),t.reversed&&this.reverse(),t.paused&&this.paused(!0)}var e=t.prototype;return e.delay=function(t){return t||0===t?(this.parent&&this.parent.smoothChildTiming&&this.startTime(this._start+t-this._delay),this._delay=t,this):this._delay},e.duration=function(t){return arguments.length?this.totalDuration(this._repeat>0?t+(t+this._rDelay)*this._repeat:t):this.totalDuration()&&this._dur},e.totalDuration=function(t){return arguments.length?(this._dirty=0,tc(this,this._repeat<0?t:(t-this._repeat*this._rDelay)/(this._repeat+1))):this._tDur},e.totalTime=function(t,e){if(Fc(),!arguments.length)return this._tTime;var r=this.parent||this._dp;if(r&&r.smoothChildTiming&&this._ts){for(this._start=Lh(r._time-(this._ts>0?t/this._ts:((this._dirty?this.totalDuration():this._tDur)-t)/-this._ts)),Kh(this),r._dirty||Wh(r);r.parent;)r.parent._time!==r._start+(r._ts>=0?r._tTime/r._ts:(r.totalDuration()-r._tTime)/-r._ts)&&r.totalTime(r._tTime,!0),r=r.parent;!this.parent&&this._dp.autoRemoveChildren&&$h(this._dp,this,this._start-this._delay)}return(this._tTime!==t||!this._dur&&!e||this._initted&&1e-8===Math.abs(this._zTime))&&(this._ts||(this._pTime=t),Uh(this,t,e)),this},e.time=function(t,e){return arguments.length?this.totalTime(Math.min(this.totalDuration(),t+qh(this))%this._dur||(t?this._dur:0),e):this._time},e.totalProgress=function(t,e){return arguments.length?this.totalTime(this.totalDuration()*t,e):this.totalDuration()?Math.min(1,this._tTime/this._tDur):this.ratio},e.progress=function(t,e){return arguments.length?this.totalTime(this.duration()*(!this._yoyo||1&this.iteration()?t:1-t)+qh(this),e):this.duration()?Math.min(1,this._time/this._dur):this.ratio},e.iteration=function(t,e){var r=this.duration()+this._rDelay;return arguments.length?this.totalTime(this._time+(t-1)*r,e):this._repeat?jh(this._tTime,r)+1:1},e.timeScale=function(t){if(!arguments.length)return-1e-8===this._rts?0:this._rts;if(this._rts===t)return this;var e=this.parent&&this._ts?Zh(this.parent._time,this):this._tTime;return this._rts=+t||0,this._ts=this._ps||-1e-8===t?0:this._rts,zh(this.totalTime(sc(0,this._tDur,e),!0))},e.paused=function(t){return arguments.length?(this._ps!==t&&(this._ps=t,t?(this._pTime=this._tTime||Math.max(-this._delay,this.rawTime()),this._ts=this._act=0):(Fc(),this._ts=this._rts,this.totalTime(this.parent&&!this.parent.smoothChildTiming?this.rawTime():this._tTime||this._pTime,1===this.progress()&&(this._tTime-=1e-8)&&1e-8!==Math.abs(this._zTime)))),this):this._ps},e.startTime=function(t){if(arguments.length){this._start=t;var e=this.parent||this._dp;return e&&(e._sort||!this.parent)&&$h(e,this,t-this._delay),this}return this._start},e.endTime=function(t){return this._start+(eh(t)?this.totalDuration():this.duration())/Math.abs(this._ts)},e.rawTime=function(t){var e=this.parent||this._dp;return e?t&&(!this._ts||this._repeat&&this._time&&this.totalProgress()<1)?this._tTime%(this._dur+this._rDelay):this._ts?Zh(e.rawTime(t),this):this._tTime:this._tTime},e.repeat=function(t){return arguments.length?(this._repeat=t,ec(this)):this._repeat},e.repeatDelay=function(t){return arguments.length?(this._rDelay=t,ec(this)):this._rDelay},e.yoyo=function(t){return arguments.length?(this._yoyo=t,this):this._yoyo},e.seek=function(t,e){return this.totalTime(nc(this,t),eh(e))},e.restart=function(t,e){return this.play().totalTime(t?-this._delay:0,eh(e))},e.play=function(t,e){return null!=t&&this.seek(t,e),this.reversed(!1).paused(!1)},e.reverse=function(t,e){return null!=t&&this.seek(t||this.totalDuration(),e),this.reversed(!0).paused(!1)},e.pause=function(t,e){return null!=t&&this.seek(t,e),this.paused(!0)},e.resume=function(){return this.paused(!1)},e.reversed=function(t){return arguments.length?(!!t!==this.reversed()&&this.timeScale(-this._rts||(t?-1e-8:0)),this):this._rts<0},e.invalidate=function(){return this._initted=0,this._zTime=-1e-8,this},e.isActive=function(t){var e,r=this.parent||this._dp,n=this._start;return!(r&&!(this._ts&&(this._initted||!t)&&r.isActive(t)&&(e=r.rawTime(!0))>=n&&e<this.endTime(!0)-1e-8))},e.eventCallback=function(t,e,r){var n=this.vars;return arguments.length>1?(e?(n[t]=e,r&&(n[t+"Params"]=r),"onUpdate"===t&&(this._onUpdate=e)):delete n[t],this):n[t]},e.then=function(t){var e=this;return new Promise((function(r){var n=Qu(t)?t:Oh,i=function(){var t=e.then;e.then=null,Qu(n)&&(n=n(e))&&(n.then||n===e)&&(e.then=t),r(n),e.then=t};e._initted&&1===e.totalProgress()&&e._ts>=0||!e._tTime&&e._ts<0?i():e._prom=i}))},e.kill=function(){Rc(this)},t}();Dh(Yc.prototype,{_time:0,_start:0,_end:0,_tTime:0,_tDur:0,_dirty:0,_repeat:0,_yoyo:!1,parent:null,_initted:!1,_rDelay:0,_ts:1,_dp:0,ratio:0,_zTime:-1e-8,_prom:0,_ps:!1,_rts:1});var Wc=function(t){function e(e,r){var n;return void 0===e&&(e={}),(n=t.call(this,e,r)||this).labels={},n.smoothChildTiming=!!e.smoothChildTiming,n.autoRemoveChildren=!!e.autoRemoveChildren,n._sort=eh(e.sortChildren),n.parent&&Qh(n.parent,du(n)),n}pu(e,t);var r=e.prototype;return r.to=function(t,e,r){return new t_(t,Fh(arguments,0,this),nc(this,$u(e)?arguments[3]:r)),this},r.from=function(t,e,r){return new t_(t,Fh(arguments,1,this),nc(this,$u(e)?arguments[3]:r)),this},r.fromTo=function(t,e,r,n){return new t_(t,Fh(arguments,2,this),nc(this,$u(e)?arguments[4]:n)),this},r.set=function(t,e,r){return e.duration=0,e.parent=this,kh(e).repeatDelay||(e.repeat=0),e.immediateRender=!!e.immediateRender,new t_(t,e,nc(this,r),1),this},r.call=function(t,e,r){return $h(this,t_.delayedCall(0,t,e),nc(this,r))},r.staggerTo=function(t,e,r,n,i,s,a){return r.duration=e,r.stagger=r.stagger||n,r.onComplete=s,r.onCompleteParams=a,r.parent=this,new t_(t,r,nc(this,i)),this},r.staggerFrom=function(t,e,r,n,i,s,a){return r.runBackwards=1,kh(r).immediateRender=eh(r.immediateRender),this.staggerTo(t,e,r,n,i,s,a)},r.staggerFromTo=function(t,e,r,n,i,s,a,o){return n.startAt=r,kh(n).immediateRender=eh(n.immediateRender),this.staggerTo(t,e,n,i,s,a,o)},r.render=function(t,e,r){var n,i,s,a,o,u,h,c,_,f,l,d,p=this._time,E=this._dirty?this.totalDuration():this._tDur,m=this._dur,T=this!==Eu&&t>E-1e-8&&t>=0?E:t<1e-8?0:t,v=this._zTime<0!=t<0&&(this._initted||!m);if(T!==this._tTime||r||v){if(p!==this._time&&m&&(T+=this._time-p,t+=this._time-p),n=T,_=this._start,u=!(c=this._ts),v&&(m||(p=this._zTime),!t&&e||(this._zTime=t)),this._repeat&&(l=this._yoyo,o=m+this._rDelay,((n=Lh(T%o))>m||E===T)&&(n=m),(a=~~(T/o))&&a===T/o&&(n=m,a--),l&&1&a&&(n=m-n,d=1),a!==(f=jh(this._tTime,o))&&!this._lock)){var g=l&&1&f,R=g===(l&&1&a);if(a<f&&(g=!g),p=g?0:m,this._lock=1,this.render(p,e,!m)._lock=0,!e&&this.parent&&gc(this,"onRepeat"),this.vars.repeatRefresh&&!d&&(this.invalidate()._lock=1),p!==this._time||u!==!this._ts)return this;if(R&&(this._lock=2,p=g?m+1e-4:-1e-4,this.render(p,!0),this.vars.repeatRefresh&&!d&&this.invalidate()),this._lock=0,!this._ts&&!u)return this}if(this._hasPause&&!this._forcing&&this._lock<2&&(h=function(t,e,r){var n;if(r>e)for(n=t._first;n&&n._start<=r;){if(!n._dur&&"isPause"===n.data&&n._start>e)return n;n=n._next}else for(n=t._last;n&&n._start>=r;){if(!n._dur&&"isPause"===n.data&&n._start<e)return n;n=n._prev}}(this,Lh(p),Lh(n)))&&(T-=n-(n=h._start)),this._tTime=T,this._time=n,this._act=!c,this._initted||(this._onUpdate=this.vars.onUpdate,this._initted=1,this._zTime=t),p||!n||e||gc(this,"onStart"),n>=p&&t>=0)for(i=this._first;i;){if(s=i._next,(i._act||n>=i._start)&&i._ts&&h!==i){if(i.parent!==this)return this.render(t,e,r);if(i.render(i._ts>0?(n-i._start)*i._ts:(i._dirty?i.totalDuration():i._tDur)+(n-i._start)*i._ts,e,r),n!==this._time||!this._ts&&!u){h=0,s&&(T+=this._zTime=-1e-8);break}}i=s}else{i=this._last;for(var M=t<0?t:n;i;){if(s=i._prev,(i._act||M<=i._end)&&i._ts&&h!==i){if(i.parent!==this)return this.render(t,e,r);if(i.render(i._ts>0?(M-i._start)*i._ts:(i._dirty?i.totalDuration():i._tDur)+(M-i._start)*i._ts,e,r),n!==this._time||!this._ts&&!u){h=0,s&&(T+=this._zTime=M?-1e-8:1e-8);break}}i=s}}if(h&&!e&&(this.pause(),h.render(n>=p?0:-1e-8)._zTime=n>=p?1:-1,this._ts))return this._start=_,Kh(this),this.render(t,e,r);this._onUpdate&&!e&&gc(this,"onUpdate",!0),(T===E&&E>=this.totalDuration()||!T&&this._ts<0)&&(_!==this._start&&Math.abs(c)===Math.abs(this._ts)||this._lock||((t||!m)&&(t&&this._ts>0||!T&&this._ts<0)&&Yh(this,1),e||t<0&&!p||(gc(this,T===E?"onComplete":"onReverseComplete",!0),this._prom&&this._prom())))}return this},r.add=function(t,e){var r=this;if($u(e)||(e=nc(this,e)),!(t instanceof Yc)){if(ih(t))return t.forEach((function(t){return r.add(t,e)})),Wh(this);if(Ku(t))return this.addLabel(t,e);if(!Qu(t))return this;t=t_.delayedCall(0,t)}return this!==t?$h(this,t,e):this},r.getChildren=function(t,e,r,n){void 0===t&&(t=!0),void 0===e&&(e=!0),void 0===r&&(r=!0),void 0===n&&(n=-Hu);for(var i=[],s=this._first;s;)s._start>=n&&(s instanceof t_?e&&i.push(s):(r&&i.push(s),t&&i.push.apply(i,s.getChildren(!0,e,r)))),s=s._next;return i},r.getById=function(t){for(var e=this.getChildren(1,1,1),r=e.length;r--;)if(e[r].vars.id===t)return e[r]},r.remove=function(t){return Ku(t)?this.removeLabel(t):Qu(t)?this.killTweensOf(t):(Hh(this,t),t===this._recent&&(this._recent=this._last),Wh(this))},r.totalTime=function(e,r){return arguments.length?(this._forcing=1,this.parent||this._dp||!this._ts||(this._start=Lh(wc.time-(this._ts>0?e/this._ts:(this.totalDuration()-e)/-this._ts))),t.prototype.totalTime.call(this,e,r),this._forcing=0,this):this._tTime},r.addLabel=function(t,e){return this.labels[t]=nc(this,e),this},r.removeLabel=function(t){return delete this.labels[t],this},r.addPause=function(t,e,r){var n=t_.delayedCall(0,e||mh,r);return n.data="isPause",this._hasPause=1,$h(this,n,nc(this,t))},r.removePause=function(t){var e=this._first;for(t=nc(this,t);e;)e._start===t&&"isPause"===e.data&&Yh(e),e=e._next},r.killTweensOf=function(t,e,r){for(var n=this.getTweensOf(t,r),i=n.length;i--;)zc!==n[i]&&n[i].kill(t,e);return this},r.getTweensOf=function(t,e){for(var r,n=[],i=cc(t),s=this._first;s;)s instanceof t_?!wh(s._targets,i)||e&&!s.isActive("started"===e)||n.push(s):(r=s.getTweensOf(i,e)).length&&n.push.apply(n,r),s=s._next;return n},r.tweenTo=function(t,e){e=e||{};var r=this,n=nc(r,t),i=e,s=i.startAt,a=i.onStart,o=i.onStartParams,u=t_.to(r,Dh(e,{ease:"none",lazy:!1,time:n,duration:e.duration||Math.abs((n-(s&&"time"in s?s.time:r._time))/r.timeScale())||1e-8,onStart:function(){r.pause();var t=e.duration||Math.abs((n-r._time)/r.timeScale());u._dur!==t&&tc(u,t).render(u._time,!0,!0),a&&a.apply(u,o||[])}}));return u},r.tweenFromTo=function(t,e,r){return this.tweenTo(e,Dh({startAt:{time:nc(this,t)}},r))},r.recent=function(){return this._recent},r.nextLabel=function(t){return void 0===t&&(t=this._time),vc(this,nc(this,t))},r.previousLabel=function(t){return void 0===t&&(t=this._time),vc(this,nc(this,t),1)},r.currentLabel=function(t){return arguments.length?this.seek(t,!0):this.previousLabel(this._time+1e-8)},r.shiftChildren=function(t,e,r){void 0===r&&(r=0);for(var n,i=this._first,s=this.labels;i;)i._start>=r&&(i._start+=t),i=i._next;if(e)for(n in s)s[n]>=r&&(s[n]+=t);return Wh(this)},r.invalidate=function(){var e=this._first;for(this._lock=0;e;)e.invalidate(),e=e._next;return t.prototype.invalidate.call(this)},r.clear=function(t){void 0===t&&(t=!0);for(var e,r=this._first;r;)e=r._next,this.remove(r),r=e;return this._time=this._tTime=0,t&&(this.labels={}),Wh(this)},r.totalDuration=function(t){var e,r,n,i,s=0,a=this,o=a._last,u=Hu;if(arguments.length)return a.timeScale((a._repeat<0?a.duration():a.totalDuration())/(a.reversed()?-t:t));if(a._dirty){for(i=a.parent;o;)e=o._prev,o._dirty&&o.totalDuration(),(n=o._start)>u&&a._sort&&o._ts&&!a._lock?(a._lock=1,$h(a,o,n-o._delay,1)._lock=0):u=n,n<0&&o._ts&&(s-=n,(!i&&!a._dp||i&&i.smoothChildTiming)&&(a._start+=n/a._ts,a._time-=n,a._tTime-=n),a.shiftChildren(-n,!1,-1e20),u=0),(r=Kh(o))>s&&o._ts&&(s=r),o=e;tc(a,a===Eu&&a._time>s?a._time:Math.min(Hu,s),1),a._dirty=0}return a._tDur},e.updateRoot=function(t){if(Eu._ts&&(Uh(Eu,Zh(t,Eu)),Ru=wc.frame),wc.frame>=Ah){Ah+=Gu.autoSleep||120;var e=Eu._first;if((!e||!e._ts)&&Gu.autoSleep&&wc._listeners.length<2){for(;e&&!e._ts;)e=e._next;e||wc.sleep()}}},e}(Yc);Dh(Wc.prototype,{_lock:0,_hasPause:0,_forcing:0});var zc,qc=function(t,e,r,n,i,s,a){var o,u,h,c,_,f,l,d,p=new d_(this._pt,t,e,0,1,u_,null,i),E=0,m=0;for(p.b=r,p.e=n,r+="",(l=~(n+="").indexOf("random("))&&(n=mc(n)),s&&(s(d=[r,n],t,e),r=d[0],n=d[1]),u=r.match(uh)||[];o=uh.exec(n);)c=o[0],_=n.substring(E,o.index),h?h=(h+1)%5:"rgba("===_.substr(-5)&&(h=1),c!==u[m++]&&(f=parseFloat(u[m-1])||0,p._pt={_next:p._pt,p:_||1===m?_:",",s:f,c:"="===c.charAt(1)?parseFloat(c.substr(2))*("-"===c.charAt(0)?-1:1):parseFloat(c)-f,m:h&&h<4?Math.round:0},E=uh.lastIndex);return p.c=E<n.length?n.substring(E,n.length):"",p.fp=a,(ch.test(n)||l)&&(p.e=0),this._pt=p,p},jc=function(t,e,r,n,i,s,a,o,u){Qu(n)&&(n=n(i||0,t,s));var h,c=t[e],_="get"!==r?r:Qu(c)?u?t[e.indexOf("set")||!Qu(t["get"+e.substr(3)])?e:"get"+e.substr(3)](u):t[e]():c,f=Qu(c)?u?n_:r_:e_;if(Ku(n)&&(~n.indexOf("random(")&&(n=mc(n)),"="===n.charAt(1)&&(n=parseFloat(_)+parseFloat(n.substr(2))*("-"===n.charAt(0)?-1:1)+(ac(_)||0))),_!==n)return isNaN(_+n)?qc.call(this,t,e,_,n,f,o||Gu.stringFilter,u):(h=new d_(this._pt,t,e,+_||0,n-(_||0),"boolean"==typeof c?o_:a_,0,f),u&&(h.fp=u),a&&h.modifier(a,this,t),this._pt=h)},Zc=function(t,e,r,n,i,s){var a,o,u,h;if(Rh[t]&&!1!==(a=new Rh[t]).init(i,a.rawVars?e[t]:function(t,e,r,n,i){if(Qu(t)&&(t=Qc(t,i,e,r,n)),!th(t)||t.style&&t.nodeType||ih(t))return Ku(t)?Qc(t,i,e,r,n):t;var s,a={};for(s in t)a[s]=Qc(t[s],i,e,r,n);return a}(e[t],n,i,s,r),r,n,s)&&(r._pt=o=new d_(r._pt,i,t,0,1,a.render,a,0,a.priority),r!==Mu))for(u=r._ptLookup[r._targets.indexOf(i)],h=a._props.length;h--;)u[a._props[h]]=o;return a},Kc=function t(e,r){var n,i,s,a,o,u,h,c,_,f,l,d,p=e.vars,E=p.ease,m=p.startAt,T=p.immediateRender,v=p.lazy,g=p.onUpdate,R=p.onUpdateParams,M=p.callbackScope,A=p.runBackwards,x=p.yoyoEase,b=p.keyframes,y=p.autoRevert,I=e._dur,S=e._startAt,N=e._targets,L=e.parent,w=L&&"nested"===L.data?L.parent._targets:N,F="auto"===e._overwrite,C=e.timeline;if(!C||b&&E||(E="none"),e._ease=Bc(E,ku.ease),e._yEase=x?Dc(Bc(!0===x?E:x,ku.ease)):0,x&&e._yoyo&&!e._repeat&&(x=e._yEase,e._yEase=e._ease,e._ease=x),!C){if(S&&S.render(-1,!0).kill(),m){if(Yh(e._startAt=t_.set(N,Dh({data:"isStart",overwrite:!1,parent:L,immediateRender:!0,lazy:eh(v),startAt:null,delay:0,onUpdate:g,onUpdateParams:R,callbackScope:M,stagger:0},m))),T)if(r>0)!y&&(e._startAt=0);else if(I)return}else if(A&&I)if(S)!y&&(e._startAt=0);else if(r&&(T=!1),Yh(e._startAt=t_.set(N,Xh(Gh(p,Th),{overwrite:!1,data:"isFromStart",lazy:T&&eh(v),immediateRender:T,stagger:0,parent:L}))),T){if(!r)return}else t(e._startAt,1e-8);for(n=Gh(p,Th),e._pt=0,d=(c=N[0]?Ih(N[0]).harness:0)&&p[c.prop],v=I&&eh(v)||v&&!I,i=0;i<N.length;i++){if(h=(o=N[i])._gsap||yh(N)[i]._gsap,e._ptLookup[i]=f={},gh[h.id]&&Ch(),l=w===N?i:w.indexOf(o),c&&!1!==(_=new c).init(o,d||n,e,l,w)&&(e._pt=a=new d_(e._pt,o,_.name,0,1,_.render,_,0,_.priority),_._props.forEach((function(t){f[t]=a})),_.priority&&(u=1)),!c||d)for(s in n)Rh[s]&&(_=Zc(s,n,e,l,o,w))?_.priority&&(u=1):f[s]=a=jc.call(e,o,s,"get",n[s],l,w,0,p.stringFilter);e._op&&e._op[i]&&e.kill(o,e._op[i]),F&&e._pt&&(zc=e,Eu.killTweensOf(o,f,"started"),zc=0),e._pt&&v&&(gh[h.id]=1)}u&&l_(e),e._onInit&&e._onInit(e)}e._from=!C&&!!p.runBackwards,e._onUpdate=g,e._initted=1},Qc=function(t,e,r,n,i){return Qu(t)?t.call(e,r,n,i):Ku(t)&&~t.indexOf("random(")?mc(t):t},$c=bh+"repeat,repeatDelay,yoyo,repeatRefresh,yoyoEase",Jc=($c+",id,stagger,delay,duration,paused").split(","),t_=function(t){function e(e,r,n,i){var s;"number"==typeof r&&(n.duration=r,r=n,n=null);var a,o,u,h,c,_,f,l,d=(s=t.call(this,i?r:kh(r),n)||this).vars,p=d.duration,E=d.delay,m=d.immediateRender,T=d.stagger,v=d.overwrite,g=d.keyframes,R=d.defaults,M=s.parent,A=(ih(e)?$u(e[0]):"length"in r)?[e]:cc(e);if(s._targets=A.length?yh(A):ph(0,!Gu.nullTargetWarn)||[],s._ptLookup=[],s._overwrite=v,g||T||nh(p)||nh(E)){if(r=s.vars,(a=s.timeline=new Wc({data:"nested",defaults:R||{}})).kill(),a.parent=du(s),g)Dh(a.vars.defaults,{ease:"none"}),g.forEach((function(t){return a.to(A,t,">")}));else{if(h=A.length,f=T?fc(T):mh,th(T))for(c in T)~$c.indexOf(c)&&(l||(l={}),l[c]=T[c]);for(o=0;o<h;o++){for(c in u={},r)Jc.indexOf(c)<0&&(u[c]=r[c]);u.stagger=0,l&&Xh(u,l),r.yoyoEase&&!r.repeat&&(u.yoyoEase=r.yoyoEase),_=A[o],u.duration=+Qc(p,du(s),o,_,A),u.delay=(+Qc(E,du(s),o,_,A)||0)-s._delay,!T&&1===h&&u.delay&&(s._delay=E=u.delay,s._start+=E,u.delay=0),a.to(_,u,f(o,_,A))}p=E=0}p||s.duration(p=a.duration())}else s.timeline=0;return!0===v&&(zc=du(s),Eu.killTweensOf(A),zc=0),M&&Qh(M,du(s)),(m||!p&&!g&&s._start===M._time&&eh(m)&&function t(e){return!e||e._ts&&t(e.parent)}(du(s))&&"nested"!==M.data)&&(s._tTime=-1e-8,s.render(Math.max(0,-E))),s}pu(e,t);var r=e.prototype;return r.render=function(t,e,r){var n,i,s,a,o,u,h,c,_,f=this._time,l=this._tDur,d=this._dur,p=t>l-1e-8&&t>=0?l:t<1e-8?0:t;if(d){if(p!==this._tTime||!t||r||this._startAt&&this._zTime<0!=t<0){if(n=p,c=this.timeline,this._repeat){if(a=d+this._rDelay,((n=Lh(p%a))>d||l===p)&&(n=d),(s=~~(p/a))&&s===p/a&&(n=d,s--),(u=this._yoyo&&1&s)&&(_=this._yEase,n=d-n),o=jh(this._tTime,a),n===f&&!r&&this._initted)return this;s!==o&&(!this.vars.repeatRefresh||u||this._lock||(this._lock=r=1,this.render(a*s,!0).invalidate()._lock=0))}if(!this._initted){if(Jh(this,n,r,e))return this._tTime=0,this;if(d!==this._dur)return this.render(t,e,r)}for(this._tTime=p,this._time=n,!this._act&&this._ts&&(this._act=1,this._lazy=0),this.ratio=h=(_||this._ease)(n/d),this._from&&(this.ratio=h=1-h),f||!n||e||gc(this,"onStart"),i=this._pt;i;)i.r(h,i.d),i=i._next;c&&c.render(t<0?t:!n&&u?-1e-8:c._dur*h,e,r)||this._startAt&&(this._zTime=t),this._onUpdate&&!e&&(t<0&&this._startAt&&this._startAt.render(t,!0,r),gc(this,"onUpdate")),this._repeat&&s!==o&&this.vars.onRepeat&&!e&&this.parent&&gc(this,"onRepeat"),p!==this._tDur&&p||this._tTime!==p||(t<0&&this._startAt&&!this._onUpdate&&this._startAt.render(t,!0,r),(t||!d)&&(t&&this._ts>0||!p&&this._ts<0)&&Yh(this,1),e||t<0&&!f||p<l&&this.timeScale()>0||(gc(this,p===l?"onComplete":"onReverseComplete",!0),this._prom&&this._prom()))}}else!function(t,e,r,n){var i,s=t._zTime<0?0:1,a=e<0?0:1,o=t._rDelay,u=0;if(o&&t._repeat&&(u=sc(0,t._tDur,e),jh(u,o)!==jh(t._tTime,o)&&(s=1-a,t.vars.repeatRefresh&&t._initted&&t.invalidate())),(t._initted||!Jh(t,e,n,r))&&(a!==s||n||1e-8===t._zTime||!e&&t._zTime)){for(t._zTime=e||(r?1e-8:0),t.ratio=a,t._from&&(a=1-a),t._time=0,t._tTime=u,r||gc(t,"onStart"),i=t._pt;i;)i.r(a,i.d),i=i._next;!a&&t._startAt&&!t._onUpdate&&t._start&&t._startAt.render(e,!0,n),t._onUpdate&&(r||gc(t,"onUpdate")),u&&t._repeat&&!r&&t.parent&&gc(t,"onRepeat"),(e>=t._tDur||e<0)&&t.ratio===a&&(t.ratio&&Yh(t,1),r||(gc(t,t.ratio?"onComplete":"onReverseComplete",!0),t._prom&&t._prom()))}}(this,t,e,r);return this},r.targets=function(){return this._targets},r.invalidate=function(){return this._pt=this._op=this._startAt=this._onUpdate=this._act=this._lazy=0,this._ptLookup=[],this.timeline&&this.timeline.invalidate(),t.prototype.invalidate.call(this)},r.kill=function(t,e){if(void 0===e&&(e="all"),!(t||e&&"all"!==e)&&(this._lazy=0,this.parent))return Rc(this);if(this.timeline)return this.timeline.killTweensOf(t,e,zc&&!0!==zc.vars.overwrite),this;var r,n,i,s,a,o,u,h=this._targets,c=t?cc(t):h,_=this._ptLookup,f=this._pt;if((!e||"all"===e)&&function(t,e){for(var r=t.length,n=r===e.length;n&&r--&&t[r]===e[r];);return r<0}(h,c))return Rc(this);for(r=this._op=this._op||[],"all"!==e&&(Ku(e)&&(a={},Nh(e,(function(t){return a[t]=1})),e=a),e=function(t,e){var r,n,i,s,a=t[0]?Ih(t[0]).harness:0,o=a&&a.aliases;if(!o)return e;for(n in r=Xh({},e),o)if(n in r)for(i=(s=o[n].split(",")).length;i--;)r[s[i]]=r[n];return r}(h,e)),u=h.length;u--;)if(~c.indexOf(h[u]))for(a in n=_[u],"all"===e?(r[u]=e,s=n,i={}):(i=r[u]=r[u]||{},s=e),s)(o=n&&n[a])&&("kill"in o.d&&!0!==o.d.kill(a)||Hh(this,o,"_pt"),delete n[a]),"all"!==i&&(i[a]=1);return this._initted&&!this._pt&&f&&Rc(this),this},e.to=function(t,r){return new e(t,r,arguments[2])},e.from=function(t,r){return new e(t,Fh(arguments,1))},e.delayedCall=function(t,r,n,i){return new e(r,0,{immediateRender:!1,lazy:!1,overwrite:!1,delay:t,onComplete:r,onReverseComplete:r,onCompleteParams:n,onReverseCompleteParams:n,callbackScope:i})},e.fromTo=function(t,r,n){return new e(t,Fh(arguments,2))},e.set=function(t,r){return r.duration=0,r.repeatDelay||(r.repeat=0),new e(t,r)},e.killTweensOf=function(t,e,r){return Eu.killTweensOf(t,e,r)},e}(Yc);Dh(t_.prototype,{_targets:[],_lazy:0,_startAt:0,_op:0,_onInit:0}),Nh("staggerTo,staggerFrom,staggerFromTo",(function(t){t_[t]=function(){var e=new Wc,r=oc.call(arguments,0);return r.splice("staggerFromTo"===t?5:4,0,0),e[t].apply(e,r)}}));var e_=function(t,e,r){return t[e]=r},r_=function(t,e,r){return t[e](r)},n_=function(t,e,r,n){return t[e](n.fp,r)},i_=function(t,e,r){return t.setAttribute(e,r)},s_=function(t,e){return Qu(t[e])?r_:Ju(t[e])&&t.setAttribute?i_:e_},a_=function(t,e){return e.set(e.t,e.p,Math.round(1e4*(e.s+e.c*t))/1e4,e)},o_=function(t,e){return e.set(e.t,e.p,!!(e.s+e.c*t),e)},u_=function(t,e){var r=e._pt,n="";if(!t&&e.b)n=e.b;else if(1===t&&e.e)n=e.e;else{for(;r;)n=r.p+(r.m?r.m(r.s+r.c*t):Math.round(1e4*(r.s+r.c*t))/1e4)+n,r=r._next;n+=e.c}e.set(e.t,e.p,n,e)},h_=function(t,e){for(var r=e._pt;r;)r.r(t,r.d),r=r._next},c_=function(t,e,r,n){for(var i,s=this._pt;s;)i=s._next,s.p===n&&s.modifier(t,e,r),s=i},__=function(t){for(var e,r,n=this._pt;n;)r=n._next,n.p===t&&!n.op||n.op===t?Hh(this,n,"_pt"):n.dep||(e=1),n=r;return!e},f_=function(t,e,r,n){n.mSet(t,e,n.m.call(n.tween,r,n.mt),n)},l_=function(t){for(var e,r,n,i,s=t._pt;s;){for(e=s._next,r=n;r&&r.pr>s.pr;)r=r._next;(s._prev=r?r._prev:i)?s._prev._next=s:n=s,(s._next=r)?r._prev=s:i=s,s=e}t._pt=n},d_=function(){function t(t,e,r,n,i,s,a,o,u){this.t=e,this.s=n,this.c=i,this.p=r,this.r=s||a_,this.d=a||this,this.set=o||e_,this.pr=u||0,this._next=t,t&&(t._prev=this)}return t.prototype.modifier=function(t,e,r){this.mSet=this.mSet||this.set,this.set=f_,this.m=t,this.mt=r,this.tween=e},t}();Nh(bh+"parent,duration,ease,delay,overwrite,runBackwards,startAt,yoyo,immediateRender,repeat,repeatDelay,data,paused,reversed,lazy,callbackScope,stringFilter,id,yoyoEase,stagger,inherit,repeatRefresh,keyframes,autoRevert",(function(t){return Th[t]=1})),fh.TweenMax=fh.TweenLite=t_,fh.TimelineLite=fh.TimelineMax=Wc,Eu=new Wc({sortChildren:!1,defaults:ku,autoRemoveChildren:!0,id:"root",smoothChildTiming:!0}),Gu.stringFilter=Lc;var p_={registerPlugin:function(){for(var t=arguments.length,e=new Array(t),r=0;r<t;r++)e[r]=arguments[r];e.forEach((function(t){return Mc(t)}))},timeline:function(t){return new Wc(t)},getTweensOf:function(t,e){return Eu.getTweensOf(t,e)},getProperty:function(t,e,r,n){Ku(t)&&(t=cc(t)[0]);var i=Ih(t||{}).get,s=r?Oh:Ph;return"native"===r&&(r=""),t?e?s((Rh[e]&&Rh[e].get||i)(t,e,r,n)):function(e,r,n){return s((Rh[e]&&Rh[e].get||i)(t,e,r,n))}:t},quickSetter:function(t,e,r){if((t=cc(t)).length>1){var n=t.map((function(t){return T_.quickSetter(t,e,r)})),i=n.length;return function(t){for(var e=i;e--;)n[e](t)}}t=t[0]||{};var s=Rh[e],a=Ih(t),o=s?function(e){var n=new s;Mu._pt=0,n.init(t,r?e+r:e,Mu,0,[t]),n.render(1,n),Mu._pt&&h_(1,Mu)}:a.set(t,e);return s?o:function(n){return o(t,e,r?n+r:n,a,1)}},isTweening:function(t){return Eu.getTweensOf(t,!0).length>0},defaults:function(t){return t&&t.ease&&(t.ease=Bc(t.ease,ku.ease)),Vh(ku,t||{})},config:function(t){return Vh(Gu,t||{})},registerEffect:function(t){var e=t.name,r=t.effect,n=t.plugins,i=t.defaults,s=t.extendTimeline;(n||"").split(",").forEach((function(t){return t&&!Rh[t]&&!fh[t]&&ph()})),Mh[e]=function(t,e,n){return r(cc(t),Dh(e||{},i),n)},s&&(Wc.prototype[e]=function(t,r,n){return this.add(Mh[e](t,th(r)?r:(n=r)&&{},this),n)})},registerEase:function(t,e){Cc[t]=Bc(e)},parseEase:function(t,e){return arguments.length?Bc(t,e):Cc},getById:function(t){return Eu.getById(t)},exportRoot:function(t,e){void 0===t&&(t={});var r,n,i=new Wc(t);for(i.smoothChildTiming=eh(t.smoothChildTiming),Eu.remove(i),i._dp=0,i._time=i._tTime=Eu._time,r=Eu._first;r;)n=r._next,!e&&!r._dur&&r instanceof t_&&r.vars.onComplete===r._targets[0]||$h(i,r,r._start-r._delay),r=n;return $h(Eu,i,0),i},utils:{wrap:function t(e,r,n){var i=r-e;return ih(e)?Ec(e,t(0,e.length),r):ic(n,(function(t){return(i+(t-e)%i)%i+e}))},wrapYoyo:function t(e,r,n){var i=r-e,s=2*i;return ih(e)?Ec(e,t(0,e.length-1),r):ic(n,(function(t){return e+((t=(s+(t-e)%s)%s)>i?s-t:t)}))},distribute:fc,random:pc,snap:dc,normalize:function(t,e,r){return Tc(t,e,0,1,r)},getUnit:ac,clamp:function(t,e,r){return ic(r,(function(r){return sc(t,e,r)}))},splitColor:bc,toArray:cc,mapRange:Tc,pipe:function(){for(var t=arguments.length,e=new Array(t),r=0;r<t;r++)e[r]=arguments[r];return function(t){return e.reduce((function(t,e){return e(t)}),t)}},unitize:function(t,e){return function(r){return t(parseFloat(r))+(e||ac(r))}},interpolate:function t(e,r,n,i){var s=isNaN(e+r)?0:function(t){return(1-t)*e+t*r};if(!s){var a,o,u,h,c,_=Ku(e),f={};if(!0===n&&(i=1)&&(n=null),_)e={p:e},r={p:r};else if(ih(e)&&!ih(r)){for(u=[],h=e.length,c=h-2,o=1;o<h;o++)u.push(t(e[o-1],e[o]));h--,s=function(t){t*=h;var e=Math.min(c,~~t);return u[e](t-e)},n=r}else i||(e=Xh(ih(e)?[]:{},e));if(!u){for(a in r)jc.call(f,e,a,"get",r[a]);s=function(t){return h_(t,f)||(_?e.p:e)}}}return ic(n,s)},shuffle:_c},install:dh,effects:Mh,ticker:wc,updateRoot:Wc.updateRoot,plugins:Rh,globalTimeline:Eu,core:{PropTween:d_,globals:Eh,Tween:t_,Timeline:Wc,Animation:Yc,getCache:Ih,_removeLinkedListItem:Hh}};Nh("to,from,fromTo,delayedCall,set,killTweensOf",(function(t){return p_[t]=t_[t]})),wc.add(Wc.updateRoot),Mu=p_.to({},{duration:0});var E_=function(t,e){for(var r=t._pt;r&&r.p!==e&&r.op!==e&&r.fp!==e;)r=r._next;return r},m_=function(t,e){return{name:t,rawVars:1,init:function(t,r,n){n._onInit=function(t){var n,i;if(Ku(r)&&(n={},Nh(r,(function(t){return n[t]=1})),r=n),e){for(i in n={},r)n[i]=e(r[i]);r=n}!function(t,e){var r,n,i,s=t._targets;for(r in e)for(n=s.length;n--;)(i=t._ptLookup[n][r])&&(i=i.d)&&(i._pt&&(i=E_(i,r)),i&&i.modifier&&i.modifier(e[r],t,s[n],r))}(t,r)}}}},T_=p_.registerPlugin({name:"attr",init:function(t,e,r,n,i){for(var s in e)this.add(t,"setAttribute",(t.getAttribute(s)||0)+"",e[s],n,i,0,0,s),this._props.push(s)}},{name:"endArray",init:function(t,e){for(var r=e.length;r--;)this.add(t,r,t[r]||0,e[r])}},m_("roundProps",lc),m_("modifiers"),m_("snap",dc))||p_;t_.version=Wc.version=T_.version="3.2.6",gu=1,rh()&&Fc();Cc.Power0,Cc.Power1,Cc.Power2,Cc.Power3,Cc.Power4,Cc.Linear,Cc.Quad,Cc.Cubic,Cc.Quart,Cc.Quint,Cc.Strong,Cc.Elastic,Cc.Back,Cc.SteppedEase,Cc.Bounce,Cc.Sine,Cc.Expo,Cc.Circ;var v_,g_,R_,M_,A_,x_,b_,y_,I_={},S_=180/Math.PI,N_=Math.PI/180,L_=Math.atan2,w_=/([A-Z])/g,F_=/(?:left|right|width|margin|padding|x)/i,C_=/[\s,\(]\S/,U_={autoAlpha:"opacity,visibility",scale:"scaleX,scaleY",alpha:"opacity"},P_=function(t,e){return e.set(e.t,e.p,Math.round(1e4*(e.s+e.c*t))/1e4+e.u,e)},O_=function(t,e){return e.set(e.t,e.p,1===t?e.e:Math.round(1e4*(e.s+e.c*t))/1e4+e.u,e)},D_=function(t,e){return e.set(e.t,e.p,t?Math.round(1e4*(e.s+e.c*t))/1e4+e.u:e.b,e)},B_=function(t,e){var r=e.s+e.c*t;e.set(e.t,e.p,~~(r+(r<0?-.5:.5))+e.u,e)},X_=function(t,e){return e.set(e.t,e.p,t?e.e:e.b,e)},V_=function(t,e){return e.set(e.t,e.p,1!==t?e.b:e.e,e)},G_=function(t,e,r){return t.style[e]=r},k_=function(t,e,r){return t.style.setProperty(e,r)},H_=function(t,e,r){return t._gsap[e]=r},Y_=function(t,e,r){return t._gsap.scaleX=t._gsap.scaleY=r},W_=function(t,e,r,n,i){var s=t._gsap;s.scaleX=s.scaleY=r,s.renderTransform(i,s)},z_=function(t,e,r,n,i){var s=t._gsap;s[e]=r,s.renderTransform(i,s)},q_="transform",j_=q_+"Origin",Z_=function(t,e){var r=g_.createElementNS?g_.createElementNS((e||"http://www.w3.org/1999/xhtml").replace(/^https/,"http"),t):g_.createElement(t);return r.style?r:g_.createElement(t)},K_=function t(e,r,n){var i=getComputedStyle(e);return i[r]||i.getPropertyValue(r.replace(w_,"-$1").toLowerCase())||i.getPropertyValue(r)||!n&&t(e,$_(r)||r,1)||""},Q_="O,Moz,ms,Ms,Webkit".split(","),$_=function(t,e,r){var n=(e||A_).style,i=5;if(t in n&&!r)return t;for(t=t.charAt(0).toUpperCase()+t.substr(1);i--&&!(Q_[i]+t in n););return i<0?null:(3===i?"ms":i>=0?Q_[i]:"")+t},J_=function(){"undefined"!=typeof window&&(v_=window,g_=v_.document,R_=g_.documentElement,A_=Z_("div")||{style:{}},x_=Z_("div"),q_=$_(q_),j_=$_(j_),A_.style.cssText="border-width:0;line-height:0;position:absolute;padding:0",y_=!!$_("perspective"),M_=1)},tf=function t(e){var r,n=Z_("svg",this.ownerSVGElement&&this.ownerSVGElement.getAttribute("xmlns")||"http://www.w3.org/2000/svg"),i=this.parentNode,s=this.nextSibling,a=this.style.cssText;if(R_.appendChild(n),n.appendChild(this),this.style.display="block",e)try{r=this.getBBox(),this._gsapBBox=this.getBBox,this.getBBox=t}catch(t){}else this._gsapBBox&&(r=this._gsapBBox());return i&&(s?i.insertBefore(this,s):i.appendChild(this)),R_.removeChild(n),this.style.cssText=a,r},ef=function(t,e){for(var r=e.length;r--;)if(t.hasAttribute(e[r]))return t.getAttribute(e[r])},rf=function(t){var e;try{e=t.getBBox()}catch(r){e=tf.call(t,!0)}return e&&(e.width||e.height)||t.getBBox===tf||(e=tf.call(t,!0)),!e||e.width||e.x||e.y?e:{x:+ef(t,["x","cx","x1"])||0,y:+ef(t,["y","cy","y1"])||0,width:0,height:0}},nf=function(t){return!(!t.getCTM||t.parentNode&&!t.ownerSVGElement||!rf(t))},sf=function(t,e){if(e){var r=t.style;e in I_&&(e=q_),r.removeProperty?("ms"!==e.substr(0,2)&&"webkit"!==e.substr(0,6)||(e="-"+e),r.removeProperty(e.replace(w_,"-$1").toLowerCase())):r.removeAttribute(e)}},af=function(t,e,r,n,i,s){var a=new d_(t._pt,e,r,0,1,s?V_:X_);return t._pt=a,a.b=n,a.e=i,t._props.push(r),a},of={deg:1,rad:1,turn:1},uf=function t(e,r,n,i){var s,a,o,u,h=parseFloat(n)||0,c=(n+"").trim().substr((h+"").length)||"px",_=A_.style,f=F_.test(r),l="svg"===e.tagName.toLowerCase(),d=(l?"client":"offset")+(f?"Width":"Height"),p="px"===i,E="%"===i;return i===c||!h||of[i]||of[c]?h:("px"!==c&&!p&&(h=t(e,r,n,"px")),u=e.getCTM&&nf(e),E&&(I_[r]||~r.indexOf("adius"))?Lh(h/(u?e.getBBox()[f?"width":"height"]:e[d])*100):(_[f?"width":"height"]=100+(p?c:i),a=~r.indexOf("adius")||"em"===i&&e.appendChild&&!l?e:e.parentNode,u&&(a=(e.ownerSVGElement||{}).parentNode),a&&a!==g_&&a.appendChild||(a=g_.body),(o=a._gsap)&&E&&o.width&&f&&o.time===wc.time?Lh(h/o.width*100):((E||"%"===c)&&(_.position=K_(e,"position")),a===e&&(_.position="static"),a.appendChild(A_),s=A_[d],a.removeChild(A_),_.position="absolute",f&&E&&((o=Ih(a)).time=wc.time,o.width=a[d]),Lh(p?s*h/100:s&&h?100/s*h:0))))},hf=function(t,e,r,n){var i;return M_||J_(),e in U_&&"transform"!==e&&~(e=U_[e]).indexOf(",")&&(e=e.split(",")[0]),I_[e]&&"transform"!==e?(i=gf(t,n),i="transformOrigin"!==e?i[e]:Rf(K_(t,j_))+" "+i.zOrigin+"px"):(!(i=t.style[e])||"auto"===i||n||~(i+"").indexOf("calc("))&&(i=lf[e]&&lf[e](t,e,r)||K_(t,e)||Sh(t,e)||("opacity"===e?1:0)),r&&!~(i+"").indexOf(" ")?uf(t,e,i,r)+r:i},cf=function(t,e,r,n){if(!r||"none"===r){var i=$_(e,t,1),s=i&&K_(t,i,1);s&&s!==r&&(e=i,r=s)}var a,o,u,h,c,_,f,l,d,p,E,m,T=new d_(this._pt,t.style,e,0,1,u_),v=0,g=0;if(T.b=r,T.e=n,r+="","auto"===(n+="")&&(t.style[e]=n,n=K_(t,e)||n,t.style[e]=r),Lc(a=[r,n]),n=a[1],u=(r=a[0]).match(oh)||[],(n.match(oh)||[]).length){for(;o=oh.exec(n);)f=o[0],d=n.substring(v,o.index),c?c=(c+1)%5:"rgba("!==d.substr(-5)&&"hsla("!==d.substr(-5)||(c=1),f!==(_=u[g++]||"")&&(h=parseFloat(_)||0,E=_.substr((h+"").length),(m="="===f.charAt(1)?+(f.charAt(0)+"1"):0)&&(f=f.substr(2)),l=parseFloat(f),p=f.substr((l+"").length),v=oh.lastIndex-p.length,p||(p=p||Gu.units[e]||E,v===n.length&&(n+=p,T.e+=p)),E!==p&&(h=uf(t,e,_,p)||0),T._pt={_next:T._pt,p:d||1===g?d:",",s:h,c:m?m*l:l-h,m:c&&c<4?Math.round:0});T.c=v<n.length?n.substring(v,n.length):""}else T.r="display"===e&&"none"===n?V_:X_;return ch.test(n)&&(T.e=0),this._pt=T,T},_f={top:"0%",bottom:"100%",left:"0%",right:"100%",center:"50%"},ff=function(t,e){if(e.tween&&e.tween._time===e.tween._dur){var r,n,i,s=e.t,a=s.style,o=e.u,u=s._gsap;if("all"===o||!0===o)a.cssText="",n=1;else for(i=(o=o.split(",")).length;--i>-1;)r=o[i],I_[r]&&(n=1,r="transformOrigin"===r?j_:q_),sf(s,r);n&&(sf(s,q_),u&&(u.svg&&s.removeAttribute("transform"),gf(s,1),u.uncache=1))}},lf={clearProps:function(t,e,r,n,i){if("isFromStart"!==i.data){var s=t._pt=new d_(t._pt,e,r,0,0,ff);return s.u=n,s.pr=-10,s.tween=i,t._props.push(r),1}}},df=[1,0,0,1,0,0],pf={},Ef=function(t){return"matrix(1, 0, 0, 1, 0, 0)"===t||"none"===t||!t},mf=function(t){var e=K_(t,q_);return Ef(e)?df:e.substr(7).match(ah).map(Lh)},Tf=function(t,e){var r,n,i,s,a=t._gsap||Ih(t),o=t.style,u=mf(t);return a.svg&&t.getAttribute("transform")?"1,0,0,1,0,0"===(u=[(i=t.transform.baseVal.consolidate().matrix).a,i.b,i.c,i.d,i.e,i.f]).join(",")?df:u:(u!==df||t.offsetParent||t===R_||a.svg||(i=o.display,o.display="block",(r=t.parentNode)&&t.offsetParent||(s=1,n=t.nextSibling,R_.appendChild(t)),u=mf(t),i?o.display=i:sf(t,"display"),s&&(n?r.insertBefore(t,n):r?r.appendChild(t):R_.removeChild(t))),e&&u.length>6?[u[0],u[1],u[4],u[5],u[12],u[13]]:u)},vf=function(t,e,r,n,i,s){var a,o,u,h=t._gsap,c=i||Tf(t,!0),_=h.xOrigin||0,f=h.yOrigin||0,l=h.xOffset||0,d=h.yOffset||0,p=c[0],E=c[1],m=c[2],T=c[3],v=c[4],g=c[5],R=e.split(" "),M=parseFloat(R[0])||0,A=parseFloat(R[1])||0;r?c!==df&&(o=p*T-E*m)&&(u=M*(-E/o)+A*(p/o)-(p*g-E*v)/o,M=M*(T/o)+A*(-m/o)+(m*g-T*v)/o,A=u):(M=(a=rf(t)).x+(~R[0].indexOf("%")?M/100*a.width:M),A=a.y+(~(R[1]||R[0]).indexOf("%")?A/100*a.height:A)),n||!1!==n&&h.smooth?(v=M-_,g=A-f,h.xOffset=l+(v*p+g*m)-v,h.yOffset=d+(v*E+g*T)-g):h.xOffset=h.yOffset=0,h.xOrigin=M,h.yOrigin=A,h.smooth=!!n,h.origin=e,h.originIsAbsolute=!!r,t.style[j_]="0px 0px",s&&(af(s,h,"xOrigin",_,M),af(s,h,"yOrigin",f,A),af(s,h,"xOffset",l,h.xOffset),af(s,h,"yOffset",d,h.yOffset)),t.setAttribute("data-svg-origin",M+" "+A)},gf=function(t,e){var r=t._gsap||new Hc(t);if("x"in r&&!e&&!r.uncache)return r;var n,i,s,a,o,u,h,c,_,f,l,d,p,E,m,T,v,g,R,M,A,x,b,y,I,S,N,L,w,F,C,U,P=t.style,O=r.scaleX<0,D=K_(t,j_)||"0";return n=i=s=u=h=c=_=f=l=0,a=o=1,r.svg=!(!t.getCTM||!nf(t)),E=Tf(t,r.svg),r.svg&&(y=!r.uncache&&t.getAttribute("data-svg-origin"),vf(t,y||D,!!y||r.originIsAbsolute,!1!==r.smooth,E)),d=r.xOrigin||0,p=r.yOrigin||0,E!==df&&(g=E[0],R=E[1],M=E[2],A=E[3],n=x=E[4],i=b=E[5],6===E.length?(a=Math.sqrt(g*g+R*R),o=Math.sqrt(A*A+M*M),u=g||R?L_(R,g)*S_:0,(_=M||A?L_(M,A)*S_+u:0)&&(o*=Math.cos(_*N_)),r.svg&&(n-=d-(d*g+p*M),i-=p-(d*R+p*A))):(U=E[6],F=E[7],N=E[8],L=E[9],w=E[10],C=E[11],n=E[12],i=E[13],s=E[14],h=(m=L_(U,w))*S_,m&&(y=x*(T=Math.cos(-m))+N*(v=Math.sin(-m)),I=b*T+L*v,S=U*T+w*v,N=x*-v+N*T,L=b*-v+L*T,w=U*-v+w*T,C=F*-v+C*T,x=y,b=I,U=S),c=(m=L_(-M,w))*S_,m&&(T=Math.cos(-m),C=A*(v=Math.sin(-m))+C*T,g=y=g*T-N*v,R=I=R*T-L*v,M=S=M*T-w*v),u=(m=L_(R,g))*S_,m&&(y=g*(T=Math.cos(m))+R*(v=Math.sin(m)),I=x*T+b*v,R=R*T-g*v,b=b*T-x*v,g=y,x=I),h&&Math.abs(h)+Math.abs(u)>359.9&&(h=u=0,c=180-c),a=Lh(Math.sqrt(g*g+R*R+M*M)),o=Lh(Math.sqrt(b*b+U*U)),m=L_(x,b),_=Math.abs(m)>2e-4?m*S_:0,l=C?1/(C<0?-C:C):0),r.svg&&(E=t.getAttribute("transform"),r.forceCSS=t.setAttribute("transform","")||!Ef(K_(t,q_)),E&&t.setAttribute("transform",E))),Math.abs(_)>90&&Math.abs(_)<270&&(O?(a*=-1,_+=u<=0?180:-180,u+=u<=0?180:-180):(o*=-1,_+=_<=0?180:-180)),r.x=((r.xPercent=n&&Math.round(t.offsetWidth/2)===Math.round(-n)?-50:0)?0:n)+"px",r.y=((r.yPercent=i&&Math.round(t.offsetHeight/2)===Math.round(-i)?-50:0)?0:i)+"px",r.z=s+"px",r.scaleX=Lh(a),r.scaleY=Lh(o),r.rotation=Lh(u)+"deg",r.rotationX=Lh(h)+"deg",r.rotationY=Lh(c)+"deg",r.skewX=_+"deg",r.skewY=f+"deg",r.transformPerspective=l+"px",(r.zOrigin=parseFloat(D.split(" ")[2])||0)&&(P[j_]=Rf(D)),r.xOffset=r.yOffset=0,r.force3D=Gu.force3D,r.renderTransform=r.svg?bf:y_?xf:Af,r.uncache=0,r},Rf=function(t){return(t=t.split(" "))[0]+" "+t[1]},Mf=function(t,e,r){var n=ac(e);return Lh(parseFloat(e)+parseFloat(uf(t,"x",r+"px",n)))+n},Af=function(t,e){e.z="0px",e.rotationY=e.rotationX="0deg",e.force3D=0,xf(t,e)},xf=function(t,e){var r=e||this,n=r.xPercent,i=r.yPercent,s=r.x,a=r.y,o=r.z,u=r.rotation,h=r.rotationY,c=r.rotationX,_=r.skewX,f=r.skewY,l=r.scaleX,d=r.scaleY,p=r.transformPerspective,E=r.force3D,m=r.target,T=r.zOrigin,v="",g="auto"===E&&t&&1!==t||!0===E;if(T&&("0deg"!==c||"0deg"!==h)){var R,M=parseFloat(h)*N_,A=Math.sin(M),x=Math.cos(M);M=parseFloat(c)*N_,R=Math.cos(M),s=Mf(m,s,A*R*-T),a=Mf(m,a,-Math.sin(M)*-T),o=Mf(m,o,x*R*-T+T)}"0px"!==p&&(v+="perspective("+p+") "),(n||i)&&(v+="translate("+n+"%, "+i+"%) "),(g||"0px"!==s||"0px"!==a||"0px"!==o)&&(v+="0px"!==o||g?"translate3d("+s+", "+a+", "+o+") ":"translate("+s+", "+a+") "),"0deg"!==u&&(v+="rotate("+u+") "),"0deg"!==h&&(v+="rotateY("+h+") "),"0deg"!==c&&(v+="rotateX("+c+") "),"0deg"===_&&"0deg"===f||(v+="skew("+_+", "+f+") "),1===l&&1===d||(v+="scale("+l+", "+d+") "),m.style[q_]=v||"translate(0, 0)"},bf=function(t,e){var r,n,i,s,a,o=e||this,u=o.xPercent,h=o.yPercent,c=o.x,_=o.y,f=o.rotation,l=o.skewX,d=o.skewY,p=o.scaleX,E=o.scaleY,m=o.target,T=o.xOrigin,v=o.yOrigin,g=o.xOffset,R=o.yOffset,M=o.forceCSS,A=parseFloat(c),x=parseFloat(_);f=parseFloat(f),l=parseFloat(l),(d=parseFloat(d))&&(l+=d=parseFloat(d),f+=d),f||l?(f*=N_,l*=N_,r=Math.cos(f)*p,n=Math.sin(f)*p,i=Math.sin(f-l)*-E,s=Math.cos(f-l)*E,l&&(d*=N_,a=Math.tan(l-d),i*=a=Math.sqrt(1+a*a),s*=a,d&&(a=Math.tan(d),r*=a=Math.sqrt(1+a*a),n*=a)),r=Lh(r),n=Lh(n),i=Lh(i),s=Lh(s)):(r=p,s=E,n=i=0),(A&&!~(c+"").indexOf("px")||x&&!~(_+"").indexOf("px"))&&(A=uf(m,"x",c,"px"),x=uf(m,"y",_,"px")),(T||v||g||R)&&(A=Lh(A+T-(T*r+v*i)+g),x=Lh(x+v-(T*n+v*s)+R)),(u||h)&&(a=m.getBBox(),A=Lh(A+u/100*a.width),x=Lh(x+h/100*a.height)),a="matrix("+r+","+n+","+i+","+s+","+A+","+x+")",m.setAttribute("transform",a),M&&(m.style[q_]=a)},yf=function(t,e,r,n,i,s){var a,o,u=Ku(i),h=parseFloat(i)*(u&&~i.indexOf("rad")?S_:1),c=s?h*s:h-n,_=n+c+"deg";return u&&("short"===(a=i.split("_")[1])&&(c%=360)!==c%180&&(c+=c<0?360:-360),"cw"===a&&c<0?c=(c+36e9)%360-360*~~(c/360):"ccw"===a&&c>0&&(c=(c-36e9)%360-360*~~(c/360))),t._pt=o=new d_(t._pt,e,r,n,c,O_),o.e=_,o.u="deg",t._props.push(r),o},If=function(t,e,r){var n,i,s,a,o,u,h,c=x_.style,_=r._gsap;for(i in c.cssText=getComputedStyle(r).cssText+";position:absolute;display:block;",c[q_]=e,g_.body.appendChild(x_),n=gf(x_,1),I_)(s=_[i])!==(a=n[i])&&"perspective,force3D,transformOrigin,svgOrigin".indexOf(i)<0&&(o=ac(s)!==(h=ac(a))?uf(r,i,s,h):parseFloat(s),u=parseFloat(a),t._pt=new d_(t._pt,_,i,o,u-o,P_),t._pt.u=h||0,t._props.push(i));g_.body.removeChild(x_)};Nh("padding,margin,Width,Radius",(function(t,e){var r="Top",n="Right",i="Bottom",s="Left",a=(e<3?[r,n,i,s]:[r+s,r+n,i+n,i+s]).map((function(r){return e<2?t+r:"border"+r+t}));lf[e>1?"border"+t:t]=function(t,e,r,n,i){var s,o;if(arguments.length<4)return s=a.map((function(e){return hf(t,e,r)})),5===(o=s.join(" ")).split(s[0]).length?s[0]:o;s=(n+"").split(" "),o={},a.forEach((function(t,e){return o[t]=s[e]=s[e]||s[(e-1)/2|0]})),t.init(e,o,i)}}));var Sf,Nf,Lf={name:"css",register:J_,targetTest:function(t){return t.style&&t.nodeType},init:function(t,e,r,n,i){var s,a,o,u,h,c,_,f,l,d,p,E,m,T,v,g,R,M,A,x=this._props,b=t.style;for(_ in M_||J_(),e)if("autoRound"!==_&&(a=e[_],!Rh[_]||!Zc(_,e,r,n,t,i)))if(h=typeof a,c=lf[_],"function"===h&&(h=typeof(a=a.call(r,n,t,i))),"string"===h&&~a.indexOf("random(")&&(a=mc(a)),c)c(this,t,_,a,r)&&(v=1);else if("--"===_.substr(0,2))this.add(b,"setProperty",getComputedStyle(t).getPropertyValue(_)+"",a+"",n,i,0,0,_);else{if(s=hf(t,_),u=parseFloat(s),(d="string"===h&&"="===a.charAt(1)?+(a.charAt(0)+"1"):0)&&(a=a.substr(2)),o=parseFloat(a),_ in U_&&("autoAlpha"===_&&(1===u&&"hidden"===hf(t,"visibility")&&o&&(u=0),af(this,b,"visibility",u?"inherit":"hidden",o?"inherit":"hidden",!o)),"scale"!==_&&"transform"!==_&&~(_=U_[_]).indexOf(",")&&(_=_.split(",")[0])),p=_ in I_)if(E||((m=t._gsap).renderTransform||gf(t),T=!1!==e.smoothOrigin&&m.smooth,(E=this._pt=new d_(this._pt,b,q_,0,1,m.renderTransform,m,0,-1)).dep=1),"scale"===_)this._pt=new d_(this._pt,m,"scaleY",m.scaleY,d?d*o:o-m.scaleY),x.push("scaleY",_),_+="X";else{if("transformOrigin"===_){R=void 0,M=void 0,A=void 0,R=(g=a).split(" "),M=R[0],A=R[1]||"50%","top"!==M&&"bottom"!==M&&"left"!==A&&"right"!==A||(g=M,M=A,A=g),R[0]=_f[M]||M,R[1]=_f[A]||A,a=R.join(" "),m.svg?vf(t,a,0,T,0,this):((l=parseFloat(a.split(" ")[2])||0)!==m.zOrigin&&af(this,m,"zOrigin",m.zOrigin,l),af(this,b,_,Rf(s),Rf(a)));continue}if("svgOrigin"===_){vf(t,a,1,T,0,this);continue}if(_ in pf){yf(this,m,_,u,a,d);continue}if("smoothOrigin"===_){af(this,m,"smooth",m.smooth,a);continue}if("force3D"===_){m[_]=a;continue}if("transform"===_){If(this,a,t);continue}}else _ in b||(_=$_(_)||_);if(p||(o||0===o)&&(u||0===u)&&!C_.test(a)&&_ in b)o||(o=0),(f=(s+"").substr((u+"").length))!==(l=(a+"").substr((o+"").length)||(_ in Gu.units?Gu.units[_]:f))&&(u=uf(t,_,s,l)),this._pt=new d_(this._pt,p?m:b,_,u,d?d*o:o-u,"px"!==l||!1===e.autoRound||p?P_:B_),this._pt.u=l||0,f!==l&&(this._pt.b=s,this._pt.r=D_);else if(_ in b)cf.call(this,t,_,s,a);else{if(!(_ in t))continue;this.add(t,_,t[_],a,n,i)}x.push(_)}v&&l_(this)},get:hf,aliases:U_,getSetter:function(t,e,r){var n=U_[e];return n&&n.indexOf(",")<0&&(e=n),e in I_&&e!==j_&&(t._gsap.x||hf(t,"x"))?r&&b_===r?"scale"===e?Y_:H_:(b_=r||{})&&("scale"===e?W_:z_):t.style&&!Ju(t.style[e])?G_:~e.indexOf("-")?k_:s_(t,e)},core:{_removeProperty:sf,_getMatrix:Tf}};T_.utils.checkPrefix=$_,Nf=Nh("x,y,z,scale,scaleX,scaleY,xPercent,yPercent,"+(Sf="rotation,rotationX,rotationY,skewX,skewY")+",transform,transformOrigin,svgOrigin,force3D,smoothOrigin,transformPerspective",(function(t){I_[t]=1})),Nh(Sf,(function(t){Gu.units[t]="deg",pf[t]=1})),U_[Nf[13]]="x,y,z,scale,scaleX,scaleY,xPercent,yPercent,"+Sf,Nh("0:translateX,1:translateY,2:translateZ,8:rotate,8:rotationZ,8:rotateZ,9:rotateX,10:rotateY",(function(t){var e=t.split(":");U_[e[1]]=Nf[e[0]]})),Nh("x,y,z,top,right,bottom,left,width,height,fontSize,padding,margin,perspective",(function(t){Gu.units[t]="px"})),T_.registerPlugin(Lf);var wf=T_.registerPlugin(Lf)||T_;wf.core.Tween;new class{constructor(){this.orbitalControl=null,this.initialised=!1}init(t){this.initialised=!0,this.orbitalControl=t}tween(t){const e=this.orbitalControl,r={radius:e.radius.value,rx:e.rx.value,ry:e.ry.value,centerX:e.center[0],centerY:e.center[1],centerZ:e.center[2],offsetX:e.positionOffset[0],offsetY:e.positionOffset[1],offsetZ:e.positionOffset[2]};wf.to(r,t.duration||1,{delay:t.delay||0,radius:t.radius||0,rx:t.rx||0,ry:t.ry||0,centerX:t.centerX||0,centerY:t.centerY||0,centerZ:t.centerZ||0,offsetX:t.offsetX||0,offsetY:t.offsetY||0,offsetZ:t.offsetZ||0,ease:t.ease||"sine.out",onUpdate:()=>{void 0!==t.rx&&e.rx.setTo(r.rx),void 0!==t.ry&&e.ry.setTo(r.ry),void 0!==t.radius&&e.radius.setTo(r.radius),void 0!==t.centerX&&(e.center[0]=r.centerX),void 0!==t.centerY&&(e.center[1]=r.centerY),void 0!==t.centerZ&&(e.center[2]=r.centerZ),void 0!==t.offsetX&&(e.positionOffset[0]=r.offsetX),void 0!==t.offsetY&&(e.positionOffset[1]=r.offsetY),void 0!==t.offsetZ&&(e.positionOffset[2]=r.offsetZ)},onComplete:t.onComplete||null})}get isReady(){return this.initialised}};r(3);var Ff=class extends su{constructor(){super(ou.ShaderLibs.bigTriangleVert,"// copy.frag\n\nprecision highp float;\n#define GLSLIFY 1\nvarying vec2 vTextureCoord;\nuniform sampler2D texture;\nuniform vec2 uResolution;\n\nfloat FXAA_SUBPIX_SHIFT = 1.0/4.0;\n#define FXAA_REDUCE_MIN   (1.0/ 128.0)\n#define FXAA_REDUCE_MUL   (1.0 / 8.0)\n#define FXAA_SPAN_MAX     8.0\n\nvec4 applyFXAA(sampler2D tex) {\n    vec4 color;\n    vec2 fragCoord = gl_FragCoord.xy;\n    vec3 rgbNW = texture2D(tex, (fragCoord + vec2(-1.0, -1.0)) * uResolution).xyz;\n    vec3 rgbNE = texture2D(tex, (fragCoord + vec2(1.0, -1.0)) * uResolution).xyz;\n    vec3 rgbSW = texture2D(tex, (fragCoord + vec2(-1.0, 1.0)) * uResolution).xyz;\n    vec3 rgbSE = texture2D(tex, (fragCoord + vec2(1.0, 1.0)) * uResolution).xyz;\n    vec3 rgbM  = texture2D(tex, fragCoord  * uResolution).xyz;\n    vec3 luma = vec3(0.299, 0.587, 0.114);\n    float lumaNW = dot(rgbNW, luma);\n    float lumaNE = dot(rgbNE, luma);\n    float lumaSW = dot(rgbSW, luma);\n    float lumaSE = dot(rgbSE, luma);\n    float lumaM  = dot(rgbM,  luma);\n    float lumaMin = min(lumaM, min(min(lumaNW, lumaNE), min(lumaSW, lumaSE)));\n    float lumaMax = max(lumaM, max(max(lumaNW, lumaNE), max(lumaSW, lumaSE)));\n\n    vec2 dir;\n    dir.x = -((lumaNW + lumaNE) - (lumaSW + lumaSE));\n    dir.y =  ((lumaNW + lumaSW) - (lumaNE + lumaSE));\n\n    float dirReduce = max((lumaNW + lumaNE + lumaSW + lumaSE) *\n                          (0.25 * FXAA_REDUCE_MUL), FXAA_REDUCE_MIN);\n\n    float rcpDirMin = 1.0 / (min(abs(dir.x), abs(dir.y)) + dirReduce);\n    dir = min(vec2(FXAA_SPAN_MAX, FXAA_SPAN_MAX),\n              max(vec2(-FXAA_SPAN_MAX, -FXAA_SPAN_MAX),\n              dir * rcpDirMin)) * uResolution;\n\n    vec3 rgbA = 0.5 * (\n        texture2D(tex, fragCoord * uResolution + dir * (1.0 / 3.0 - 0.5)).xyz +\n        texture2D(tex, fragCoord * uResolution + dir * (2.0 / 3.0 - 0.5)).xyz);\n    vec3 rgbB = rgbA * 0.5 + 0.25 * (\n        texture2D(tex, fragCoord * uResolution + dir * -0.5).xyz +\n        texture2D(tex, fragCoord * uResolution + dir * 0.5).xyz);\n\n    float lumaB = dot(rgbB, luma);\n    if ((lumaB < lumaMin) || (lumaB > lumaMax))\n        color = vec4(rgbA, 1.0);\n    else\n        color = vec4(rgbB, 1.0);\n    return color;\n}\n\nvec3 blendOverlay(vec3 base, vec3 blend) {\n    return mix(1.0 - 2.0 * (1.0 - base) * (1.0 - blend), 2.0 * base * blend, step(base, vec3(0.5)));\n}\n\nvec3 blendOverlay(vec3 base, vec3 blend, float opacity) {\n\tvec3 blended = mix(1.0 - 2.0 * (1.0 - base) * (1.0 - blend), 2.0 * base * blend, step(base, vec3(0.5)));\n\treturn mix(base, blended, opacity);\n}\n\nfloat luma(vec3 color) {\n  return dot(color, vec3(0.299, 0.587, 0.114));\n}\n\nvoid main(void) {\n\tvec4 color   = applyFXAA(texture);\n\tgl_FragColor = color;\n}")}_init(){this.mesh=ou.Geom.bigTriangle()}render(t){this.shader.bind(),this.shader.uniform("texture","uniform1i",0),t.bind(0),this.shader.uniform("uResolution","vec2",[1/aa.width,1/aa.height]),aa.draw(this.mesh)}destroy(){super.destroy(),this.mesh.destroy()}};const Cf=(t,e)=>{var r=document.createElement("a"),n=(t=>{for(var e=t.split(","),r=e[0].match(/:(.*?);/)[1],n=atob(e[1]),i=n.length,s=new Uint8Array(i);i--;)s[i]=n.charCodeAt(i);return new Blob([s],{type:r})})(t.toDataURL({format:"png",multiplier:4})),i=URL.createObjectURL(n);r.download=e+".png",r.href=i,r.click()};h.create();u.create();var Uf=class extends $o{constructor(t={}){let e;t.container?(e=document.createElement("div"),e.className="webgl",t.container.appendChild(e)):(e=document.querySelector(".webgl"),t.container=e),super(t),this.options=t,this.containerHTML=e,aa.enableAlphaBlending(),this.resize()}_init(t){super._init(t)}_initViews(){this._bCopy=new ou.BatchCopy,this._bAxis=new ou.BatchAxis,this._bDots=new ou.BatchDotsPlane,this._vFxaa=new Ff;const t={minFilter:aa.LINEAR,magFilter:aa.LINEAR};this.fboRender=new ou.FrameBuffer(aa.width,aa.height,t),this.orbitalControl.radius.setTo(3.75),this.orbitalControl.radius.limit(1.9,3.75)}render(){aa.clear(0,0,0,0),this._bAxis.draw(),this._bDots.draw(),lu.active&&(this.fboRender.bind(),aa.clear(0,0,0,1)),lu.active&&(this.fboRender.unbind(),this._vFxaa.render(this.fboRender.getTexture()))}resize(t,e){((t,e,r,n)=>{r|=window.innerWidth,n|=window.innerHeight,t=t||r,e=e||n,aa.setSize(t,e);let i=Math.min(t,r),s=Math.min(e,n);const a=r/t,o=n/e,u=Math.min(a,o);i=t*u,s=e*u,aa.canvas.style.width=i+"px",aa.canvas.style.height=s+"px"})(null,null,this.containerHTML.clientWidth,this.containerHTML.clientHeight),this.camera.setAspectRatio(aa.aspectRatio)}};var Pf=[],Of=r(2),Df=r.n(Of);String.prototype.replaceAll=function(t,e){return this.replace(new RegExp(t,"g"),e)};window.addEventListener("keydown",t=>{if(83===t.keyCode&&t.metaKey){t.preventDefault();const e=new Date;let r=e.getFullYear()+"."+(e.getMonth()+1)+"."+e.getDate()+"-"+e.getHours()+"."+e.getMinutes()+"."+e.getSeconds();Cf(aa.canvas,r)}}),r(17);const Bf=(t={})=>new Promise((e,r)=>{let n=document.createElement("canvas");n.className="Main-Canvas",(t.container||document.body.querySelector(".container")).appendChild(n),aa.init(n,{ignoreWebgl2:!1,preserveDrawingBuffer:!0}),e()}),Xf=(t={})=>new Promise((e,r)=>{if(t.assets.length>0){document.body.classList.add("isLoading");t.assets;const r=t.assets.map(e=>(e.url=e.url.indexOf("static")>-1?e.url:(t.assetsPath||"")+e.url,e));new Df.a({assets:r}).on("error",t=>{}).on("progress",e=>{t.onProgress&&t.onProgress(e)}).on("complete",r=>{t.onComplete&&t.onComplete(r),e(r)}).start()}else e([])}),Vf=(t,e)=>new Promise((r,n)=>{fu.init(e,t),r()}),Gf=t=>new Promise((e,r)=>{Bf(t).then(Xf.bind(null,t)).then(Vf.bind(null,t.assets)).then(()=>{e()}).catch(t=>{})});class kf{constructor(){this.scene=null}init(t){t.assets=Pf,Gf(t).then(()=>{this.scene=new Uf(t,this)},t=>{})}}}])}));
//# sourceMappingURL=webgl-build.js.map